(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{1120:(e,t,r)=>{"use strict";r.d(t,{Lx:()=>s,Ni:()=>o,SR:()=>l,y4:()=>i});var n=r(31886);let s=async e=>(await n.A.post("/login",e)).data,o=async()=>(await n.A.get("/me")).data,i=async()=>(await n.A.post("/logout")).data,l=async(e,t)=>(await n.A.put("/user/".concat(e,"/sms-notification"),{smsNotification:t})).data},4236:(e,t,r)=>{"use strict";r.d(t,{Cd:()=>f,Wn:()=>d,rA:()=>m,vz:()=>c});var n=r(50228),s=r(23274),o=r(1120),i=r(5041),l=r(32960),a=r(26715),u=r(35695);let c=()=>{let e=(0,u.useRouter)();return(0,i.n)({mutationFn:e=>(0,o.Lx)(e),onSuccess:()=>{e.push("/request")}})},d=()=>{let e=(0,u.useRouter)(),{setUser:t}=(0,s.A)();return(0,i.n)({mutationFn:o.y4,onSuccess:()=>{t(null),e.push("/login")}})},m=()=>(0,l.I)({queryKey:["me"],queryFn:o.Ni}),f=()=>{let e=(0,a.jE)();return(0,i.n)({mutationFn:e=>(0,o.SR)(e.id,e.smsNotification),onSuccess:(t,r)=>{e.invalidateQueries({queryKey:["me"]}),n.A.successAlert("Success","SMS notification turned ".concat(r.smsNotification?"ON":"OFF"))}})}},23274:(e,t,r)=>{"use strict";r.d(t,{A:()=>a,AuthProvider:()=>l});var n=r(95155),s=r(12115),o=r(31886);let i=(0,s.createContext)({user:null,setUser:()=>{},loading:!0}),l=e=>{let{children:t}=e,[r,l]=(0,s.useState)(null),[a,u]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{o.A.get("/me").then(e=>l(e.data)).catch(()=>l(null)).finally(()=>u(!1))},[]),(0,n.jsx)(i.Provider,{value:{user:r,setUser:l,loading:a},children:t})},a=()=>(0,s.useContext)(i)},31886:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(23464),s=r(49509);let o=n.A.create({baseURL:"".concat(s.env.NEXT_PUBLIC_APP_URL,"/api"),withCredentials:!0})},35218:(e,t,r)=>{"use strict";r.d(t,{L3:()=>o,X5:()=>s,q8:()=>i});var n=r(22531);let s=n.Ik({username:n.Yj().min(1),password:n.Yj().min(6)}),o=n.Ik({name:n.Yj().min(1,"Name is required"),email:n.Yj().optional(),username:n.Yj().min(1,"Username is required"),password:n.Yj().min(6,"Password must be at least 6 characters"),role:n.k5(["Admin","User","Branch","Superadmin","Coordinator","System"]).default("User"),branchId:n.ai().optional(),position:n.Yj().optional(),initial:n.Yj().optional(),phoneNumber:n.Yj().max(11,"Password must be at 11 characters").optional(),approver:n.zM().default(!1)}),i=o.extend({id:n.ai().optional(),password:n.Yj().optional(),email:n.Yj().optional()})},50228:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(24752),s=r.n(n);let o={successAlert:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Success",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s().fire({title:e,text:t,icon:"success",confirmButtonText:"OK",confirmButtonColor:"#3085d6"})},successAlertFunction:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Success",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return s().fire({title:e,text:t,icon:"success",confirmButtonText:"OK",confirmButtonColor:"#3085d6"}).then(e=>{(e.isConfirmed&&"function"==typeof r||e.isDismissed)&&(r(),n())})},warningAlert:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Warning",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s().fire({title:e,text:t,icon:"warning",showCancelButton:!0,confirmButtonText:"OK",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"})},errorAlert:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Error",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s().fire({title:e,text:t,icon:"error",confirmButtonText:"OK",confirmButtonColor:"#d33"})},confirmationAlert:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Are you sure?",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;return s().fire({title:e,html:t,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"}).then(e=>{e.isConfirmed&&"function"==typeof r&&r()})}}},78007:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n=r(95155),s=r(62177),o=r(90221),i=r(35218),l=r(4236),a=r(23274),u=r(50228),c=r(66766);function d(){var e,t;let{register:r,handleSubmit:d,formState:{errors:m}}=(0,s.mN)({resolver:(0,o.u)(i.X5)}),{setUser:f}=(0,a.A)(),{mutate:h}=(0,l.vz)();return(0,n.jsxs)("div",{className:"flex bg-white-500 min-h-screen items-center justify-center relative",children:[(0,n.jsx)("div",{className:"absolute w-[8rem] h-[8rem] rounded-b-full bg-amber-100 top-0 right-1 blur-2xl"}),(0,n.jsx)("div",{className:"absolute w-[8rem] h-[8rem] rounded-t-full bg-violet-200 bottom-0 left-1 blur-2xl"}),(0,n.jsx)("div",{className:"absolute w-[11rem] h-[7rem] rounded-r-full bg-red-100 top-0 left-1 blur-2xl"}),(0,n.jsx)("div",{className:"absolute w-[11rem] h-[8rem] rounded-l-full bg-green-200 bottom-0 right-1 blur-2xl"}),(0,n.jsxs)("form",{onSubmit:d(e=>{h(e,{onSuccess:e=>{f(e.user),u.A.successAlert("Signing In","User Sign in Successfully")},onError:()=>{u.A.errorAlert("Invalid Credential","Please check your username or password.")}})}),className:"space-y-4 z-10 w-[min(90rem,85%)] mx-auto my-4 flex flex-col justify-center max-w-[30rem] p-6 rounded-lg shadow",children:[(0,n.jsx)(c.default,{src:"/RMSLogo.png",alt:"Rejected",width:140,height:120,className:"pb-[1rem]"}),(0,n.jsxs)("div",{className:"flex flex-col gap-[0.5rem] py-2",children:[(0,n.jsx)("h1",{className:"font-semibold text-2xl text-[#444444]",children:"Welcome Back!"}),(0,n.jsx)("p",{className:"font-normal  text-[#444444]",children:"Let's get started, Please enter your details."})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-[0.5rem] mt-[0.8rem]",children:[(0,n.jsx)("input",{...r("username"),placeholder:"Email / Username",className:"border p-2 rounded w-full"}),(0,n.jsx)("p",{className:"text-red-500 text-sm",children:null==(e=m.username)?void 0:e.message}),(0,n.jsx)("input",{...r("password"),type:"password",placeholder:"Password",className:"border p-2 rounded w-full"}),(0,n.jsx)("p",{className:"text-red-500 text-sm",children:null==(t=m.password)?void 0:t.message})]}),(0,n.jsx)("button",{className:"bg-green-800 text-white py-2 mt-1 px-4 rounded cursor-pointer hover:bg-green-600",type:"submit",children:"Sign In"})]})]})}},86001:(e,t,r)=>{Promise.resolve().then(r.bind(r,78007))}},e=>{e.O(0,[320,466,960,280,807,441,964,358],()=>e(e.s=86001)),_N_E=e.O()}]);