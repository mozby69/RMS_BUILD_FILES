(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{6357:(e,r,l)=>{"use strict";l.d(r,{Ku:()=>t,Pd:()=>d,sO:()=>s,zD:()=>n});var a=l(95155);let d=e=>{let{label:r,placeholder:l,register:d,error:t,type:s,readonly:n,step:o}=e;return(0,a.jsxs)("div",{className:"flex flex-col w-full",children:[r&&(0,a.jsx)("label",{htmlFor:null==d?void 0:d.name,className:"block mb-2 text-sm font-medium text-gray-900",children:r}),(0,a.jsx)("input",{type:s,...d,readOnly:n,step:o,id:null==d?void 0:d.name,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg\n            focus:outline-none  block w-full p-2.5 \n            ".concat(t?"focus:ring-2 focus:ring-red-500 focus:border-red-500":"focus:ring-2 focus:ring-green-500 focus:border-green-500 "),placeholder:l}),"string"==typeof(null==t?void 0:t.message)&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:t.message})]})},t=e=>{let{label:r,register:l,error:d,options:t,placeholder:s}=e;return(0,a.jsxs)("div",{className:"flex flex-col",children:[r&&(0,a.jsx)("label",{htmlFor:null==l?void 0:l.name,className:"block mb-2 text-sm font-medium text-gray-900",children:r}),(0,a.jsxs)("select",{...l,id:null==l?void 0:l.name,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg\n            focus:outline-none  block w-full p-2.5 \n            ".concat(d?"focus:ring-2 focus:ring-red-500 focus:border-red-500":"focus:ring-2 focus:ring-green-500 focus:border-green-500 "),children:[(0,a.jsx)("option",{value:"",children:s}),null==t?void 0:t.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))]}),d&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.message})]})},s=e=>{let{label:r,placeholder:l,register:d,error:t}=e;return(0,a.jsxs)("div",{className:"flex flex-col w-full h-full",children:[r&&(0,a.jsx)("label",{htmlFor:null==d?void 0:d.name,className:"block mb-2 text-sm font-medium text-gray-900",children:r}),(0,a.jsx)("textarea",{...d,id:null==d?void 0:d.name,placeholder:l,className:"h-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg \n            focus:outline-none block w-full p-2.5 \n            ".concat(t?"focus:ring-2 focus:ring-red-500 focus:border-red-500":"focus:ring-2 focus:ring-green-500 focus:border-green-500")}),"string"==typeof(null==t?void 0:t.message)&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:t.message})]})},n=e=>{let{label:r,placeholder:l,register:d,error:t}=e;return(0,a.jsxs)("div",{className:"flex flex-col w-full",children:[r&&(0,a.jsx)("label",{htmlFor:null==d?void 0:d.name,className:"block mb-2 text-sm font-medium text-gray-900",children:r}),(0,a.jsxs)("div",{className:"flex items-center me-4 bg-gray-50 border border-gray-300 p-2.5 rounded-lg",children:[(0,a.jsx)("input",{id:null==d?void 0:d.name,type:"checkbox",className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded-sm focus:ring-blue-500 focus:ring-2",...d}),(0,a.jsx)("label",{htmlFor:null==d?void 0:d.name,className:"ms-2 text-sm font-medium text-gray-900",children:l})]}),"string"==typeof(null==t?void 0:t.message)&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:t.message})]})}},13930:(e,r,l)=>{Promise.resolve().then(l.bind(l,41487))},15234:(e,r,l)=>{"use strict";l.d(r,{A:()=>t});var a=l(95155),d=l(12115);let t=e=>{let{data:r,placeholder:l="Select data...",label:t,name:s,value:n,onChange:o,inputRef:i,error:c,disabled:u=!1,returnField:p="id"}=e,[m,x]=(0,d.useState)(""),[h,v]=(0,d.useState)(!1),[b,y]=(0,d.useState)([]),[g,j]=(0,d.useState)(!1),f=(0,d.useMemo)(()=>{var e;return null==n||""===n?null:null!=(e=r.find(e=>String(e.id)===String(n)))?e:null},[n,r]);(0,d.useEffect)(()=>{if(!g)if(""===n||null==n)x("");else{var e;x(null!=(e=null==f?void 0:f.name)?e:String(n))}},[f,n,g]);let N="si-".concat(s);return(0,a.jsxs)("div",{className:"relative w-full",children:[t&&(0,a.jsx)("label",{htmlFor:N,className:"block mb-2 text-sm font-medium text-gray-900",children:t}),(0,a.jsx)("input",{id:N,ref:i,name:s,type:"text",value:m,onChange:e=>{let l=e.target.value;if(x(l),j(!0),0===l.trim().length){o(""),y([]),v(!1);return}let a=l.toLowerCase();y(r.filter(e=>String(e.id).toLowerCase().includes(a)||e.name.toLowerCase().includes(a))),v(!0)},onBlur:()=>{setTimeout(()=>j(!1),200),v(!1)},placeholder:l,disabled:u,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg\n          focus:outline-none block w-full p-2.5\n          ".concat(c?"focus:ring-2 focus:ring-red-500 focus:border-red-500":"focus:ring-2 focus:ring-green-500 focus:border-green-500","\n          ").concat(u?"opacity-50 cursor-not-allowed bg-gray-100":"","\n        "),autoComplete:"off"}),c&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:c.message}),h&&b.length>0&&(0,a.jsx)("ul",{className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded border border-gray-200 bg-white shadow",children:b.map(e=>(0,a.jsx)("li",{className:"cursor-pointer px-3 py-2 hover:bg-gray-100",onMouseDown:()=>(e=>{x(e.name),v(!1),j(!1),o("name"===p?e.name:e.id)})(e),children:(0,a.jsx)("span",{className:"text-gray-700",children:e.name})},e.id))})]})}},37610:(e,r,l)=>{"use strict";l.d(r,{ai:()=>t,p6:()=>n,zM:()=>s});var a=l(70186),d=l(22531);function t(e){return a.qG(d.rS,e)}function s(e){return a.dN(d.WF,e)}function n(e){return a.B4(d.aP,e)}},40857:(e,r,l)=>{"use strict";l.d(r,{A:()=>t});var a=l(28322),d=l(95155);let t=(0,a.A)((0,d.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},41487:(e,r,l)=>{"use strict";l.r(r),l.d(r,{default:()=>e4});var a=l(95155),d=l(12115),t=l(51935),s=l(28322);let n=(0,s.A)((0,a.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"Restore");var o=l(15234),i=l(93709),c=l(6357),u=l(62177),p=l(60502),m=l(90221),x=l(16304),h=l(92523),v=l(70567),b=l(99472),y=l(60152),g=l(80968);function j(e){var r,l,d,s,n,o;let{requestType:c,formData:u,onClose:p,onReset:m,approvers:h}=e,{data:j}=(0,i.XU)(),{data:f=[]}=(0,i.In)(),{mutate:N}=(0,i.Pm)(),I=null!=(r=null==j?void 0:j.find(e=>e.id===(null==u?void 0:u.requestToId)))?r:null,_=f.find(e=>e.id===(null==u?void 0:u.requestFromId));return(0,a.jsxs)("div",{className:"flex flex-col px-10 overflow-auto max-h-150",children:[(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center font-extrabold text-xl",children:[(0,a.jsx)("h1",{children:null!=(l=null==_?void 0:_.companyName)?l:""}),(0,a.jsxs)("h1",{children:[null!=(d=null==_?void 0:_.branchName)?d:""," "]})]}),(0,a.jsxs)("div",{className:"flex flex-col border-t-3 border-b-3 mt-3 py-2 font-semibold",children:[(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("p",{className:"w-20",children:"To"}),(0,a.jsx)("p",{children:":"}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("p",{children:null!=(s=null==I?void 0:I.name)?s:""}),(0,a.jsx)("p",{className:"text-center",children:null!=(n=null==I?void 0:I.position)?n:""})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("p",{className:"w-20",children:"From"}),(0,a.jsx)("p",{children:":"}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)("p",{children:null!=(o=null==_?void 0:_.branchName)?o:""})})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("p",{className:"w-20",children:"Report"}),(0,a.jsx)("p",{children:":"}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)("p",{children:null==c?void 0:c.requestName})})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("p",{className:"w-20",children:"Date"}),(0,a.jsx)("p",{children:":"}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)("p",{children:(0,a.jsx)(b.XU,{value:null==u?void 0:u.requestDate})})})]})]}),(0,a.jsxs)("div",{className:"flex flex-col py-5 gap-3 font-semibold",children:[(0,a.jsx)("div",{className:"indent-8",children:(0,a.jsx)("p",{children:"Good Day!"})}),(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("p",{className:"indent-8",children:null==u?void 0:u.requestContent})}),(0,a.jsx)("p",{className:"indent-8",children:"Your favorable response with this matter would be highly appreciated."}),(0,a.jsx)("p",{className:"indent-8",children:"Thank you very much & God Bless"})]}),(0,a.jsx)(g.A,{approverList:h}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(x.A,{label:"Submit with e signature",onClick:()=>{N(u,{onSuccess:()=>{(0,y.Te)({message:"Request added successfully!",position:"top-center",duration:3e3}),null==m||m(),null==p||p()}})},variant:"success",icon:(0,a.jsx)(t.A,{})}),(0,a.jsx)(x.A,{label:"Close",variant:"danger",onClick:p,icon:(0,a.jsx)(v.A,{})})]})]})}var f=l(4236);function N(e){return(e.toUpperCase(),e.includes("EMB")||e.includes("PSPMI"))?7:8}function I(e,r){var l;let a=e.find(e=>e.id===r);return console.log("bramcj ",null==a?void 0:a.bfomId),null!=(l=null==a?void 0:a.bfomId)?l:null}let _=[{label:"Checked By",field:"checkedById"},{label:"Checked By 2",field:"checkedBy2Id"},{label:"Checked By 3",field:"checkedBy3Id"},{label:"Checked By 4",field:"checkedBy4Id"},{label:"Recom Approval",field:"recomApprovalId"},{label:"Recom Approval 2",field:"recomApproval2Id"},{label:"Approve",field:"approveById"},{label:"Final Approver",field:"approveBy2Id"}];function k(e){let{control:r,approverData:l,setValue:t,getValues:s}=e,{data:n}=(0,f.rA)(),{data:c}=(0,i.In)();return(0,d.useEffect)(()=>{var e;(null==n||null==(e=n.branch)?void 0:e.coordinatorId)&&_.forEach(e=>{2===s("approvers.".concat(e.field))&&t("approvers.".concat(e.field),n.branch.coordinatorId)})},[n,s,t]),(0,a.jsx)("div",{className:"grid grid-cols-12 gap-3 mt-4 w-full",children:_.map(e=>(0,a.jsx)("div",{className:"col-span-3",children:(0,a.jsx)(u.xI,{name:"approvers.".concat(e.field),control:r,render:r=>{var d;let{field:t,fieldState:s}=r;return(0,a.jsx)(o.A,{data:l,label:e.label,placeholder:"Select ".concat(e.label),name:t.name,value:null!=(d=t.value)?d:void 0,onChange:e=>{var r,l;2===e&&(null==n||null==(r=n.branch)?void 0:r.coordinatorId)?t.onChange(n.branch.coordinatorId):3===e&&(null==n?void 0:n.branch)?t.onChange(N(n.branch.branchName)):4===e&&(null==n||null==(l=n.branch)?void 0:l.id)&&void 0!==c?t.onChange(I(c,n.branch.id)):t.onChange(e)},inputRef:t.ref,error:s.error})}})},e.field))})}function A(e){var r,l,s;let{requestTypeId:v,requestType:b}=e,[y,g]=(0,d.useState)(null),[_,A]=(0,d.useState)(!1),[B,T]=(0,d.useState)(null),{data:w}=(0,i.XU)(),{data:C=[]}=(0,i.In)(),{data:D}=(0,f.rA)(),S=(null!=w?w:[]).filter(e=>e.approver).map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.name)?l:""}}),q=C.map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.branchName)?l:""}}),{control:E,register:R,handleSubmit:P,reset:F,setValue:Y,getValues:O,formState:{errors:M}}=(0,u.mN)({resolver:(0,m.u)(p.Vm),defaultValues:{requestTypeId:v,requestFromId:null!=(s=null==D||null==(r=D.branch)?void 0:r.id)?s:void 0,approvers:{checkedById:void 0,checkedBy2Id:void 0,checkedBy3Id:void 0,checkedBy4Id:void 0,recomApprovalId:void 0,recomApproval2Id:void 0,approveById:void 0,approveBy2Id:void 0}}});(0,d.useEffect)(()=>{if(b){var e,r,l,a,d,t,s,n,o,i;F({requestTypeId:v,requestToId:void 0,requestFromId:null!=(r=null==D||null==(e=D.branch)?void 0:e.id)?r:void 0,requestDate:void 0,requestContent:"",approvers:{checkedById:null!=(l=b.checkedById)?l:void 0,checkedBy2Id:null!=(a=b.checkedBy2Id)?a:void 0,checkedBy3Id:null!=(d=b.checkedBy3Id)?d:void 0,checkedBy4Id:null!=(t=b.checkedBy4Id)?t:void 0,recomApprovalId:null!=(s=b.recomApprovalId)?s:void 0,recomApproval2Id:null!=(n=b.recomApproval2Id)?n:void 0,approveById:null!=(o=b.approveById)?o:void 0,approveBy2Id:null!=(i=b.approveBy2Id)?i:void 0}})}},[b,F,v,null==D||null==(l=D.branch)?void 0:l.id]),(0,d.useEffect)(()=>{if(null==D?void 0:D.branch){var e;Y("requestFromId",null==D||null==(e=D.branch)?void 0:e.id)}},[null==D?void 0:D.branch,Y]);let L=()=>{F()};return(0,a.jsxs)("div",{className:"bg-white border border-[#ECECEC] min-h-80 px-6 py-3 rounded-md",children:[(0,a.jsx)("div",{className:"p-1.5",children:(0,a.jsx)("h3",{className:"text-2xl font-extrabold text-gray-600 text-center",children:"Fund Transfer Request Form"})}),(0,a.jsxs)("form",{onSubmit:P(e=>{var r,l,a,d,t,s,n,o,i,c,u,p,m,x,h,v,b;T(e.approvers);let y=null==D||null==(r=D.branch)?void 0:r.coordinatorId,j=[{id:null!=(c=null==(l=e.approvers)?void 0:l.checkedById)?c:null,roleType:"checkedById"},{id:null!=(u=null==(a=e.approvers)?void 0:a.checkedBy2Id)?u:null,roleType:"checkedBy2Id"},{id:null!=(p=null==(d=e.approvers)?void 0:d.checkedBy3Id)?p:null,roleType:"checkedBy3Id"},{id:null!=(m=null==(t=e.approvers)?void 0:t.checkedBy4Id)?m:null,roleType:"checkedBy4Id"},{id:null!=(x=null==(s=e.approvers)?void 0:s.recomApprovalId)?x:null,roleType:"recomApprovalId"},{id:null!=(h=null==(n=e.approvers)?void 0:n.recomApproval2Id)?h:null,roleType:"recomApproval2Id"},{id:null!=(v=null==(o=e.approvers)?void 0:o.approveById)?v:null,roleType:"approveById"},{id:null!=(b=null==(i=e.approvers)?void 0:i.approveBy2Id)?b:null,roleType:"approveBy2Id"}].filter(e=>e.id).map(e=>{if(["checkedById","checkedBy2Id","checkedBy3Id","checkedBy4Id"].includes(e.roleType)){if(2===e.id)return{...e,id:y};else if(4===e.id&&(null==D?void 0:D.branchId))return{...e,id:I(C,null==D?void 0:D.branchId)}}if(["recomApprovalId","recomApproval2Id"].includes(e.roleType)&&3===e.id&&(null==D?void 0:D.branch)){var r;return{...e,id:N(null==D||null==(r=D.branch)?void 0:r.branchName)}}return e});g({...e,approvers:j}),A(!0)}),children:[(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-3 items-center",children:[(0,a.jsx)("div",{className:"flex flex-row items-end col-span-5",children:(0,a.jsx)(u.xI,{name:"requestToId",control:E,render:e=>{let{field:r,fieldState:l}=e;return(0,a.jsx)(o.A,{data:S,label:"Request To",placeholder:"Select request to...",name:r.name,value:r.value,onChange:r.onChange,inputRef:r.ref,error:l.error})}})}),(0,a.jsx)("div",{className:"flex flex-row items-end col-span-5",children:(0,a.jsx)(u.xI,{name:"requestFromId",control:E,render:e=>{let{field:r,fieldState:l}=e;return(0,a.jsx)(o.A,{data:q,label:"Request From",placeholder:"Select branch...",name:r.name,value:r.value,onChange:r.onChange,inputRef:r.ref,error:l.error})}})}),(0,a.jsx)("div",{className:"flex flex-row items-end col-span-2",children:(0,a.jsx)(c.Pd,{label:"Date",placeholder:"Enter Date",register:R("requestDate",{valueAsDate:!0}),error:M.requestDate,type:"date"})}),(0,a.jsx)("div",{className:"col-span-12 h-64",children:(0,a.jsx)(c.sO,{label:"Request Content",placeholder:"Enter request content",register:R("requestContent"),error:M.requestContent})})]}),(0,a.jsx)(k,{control:E,approverData:S,setValue:Y,getValues:O}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 mt-3",children:[(0,a.jsx)(x.A,{label:"Submit",size:"md",type:"submit",icon:(0,a.jsx)(t.A,{})}),(0,a.jsx)(x.A,{label:"Reset",variant:"info",size:"md",type:"button",onClick:L,icon:(0,a.jsx)(n,{})})]})]}),_&&(0,a.jsx)(h.A,{size:"xl",children:(0,a.jsx)(j,{onClose:()=>{A(!1)},onReset:L,formData:y,requestType:b,approvers:B})})]})}var B=l(22531);let T=B.Ik({name:B.Yj().min(1,"Name is required"),position:B.Yj().min(1,"Position is required"),departure_date:B.Yj().min(1,"Departure date is required"),destination:B.Yj().min(1,"Destination is required"),current_date:B.Yj().min(1,"Current date is required"),purpose_of_travel:B.Yj().min(1,"Purpose is required"),report_to:B.Yj(),expenses_allowed:B.ai(),numCols:B.ai().min(0,"Number of columns cannot be negative").max(50,"Number of columns cannot exceed 50").optional(),headers:B.YO(B.Yj()).optional(),rows:B.YO(B.YO(B.Yj())).optional(),totalsEnabled:B.YO(B.zM()).optional(),columnTotals:B.YO(B.ai()).optional(),requestFromId:B.ai().min(1,"from is required"),requestTypeId:B.ai().optional(),createdAt:B.p6().optional(),updatedAt:B.p6().optional()}).omit({createdAt:!0,updatedAt:!0}).extend({approvers:p.XC}),w=B.Ik({item_description:B.Yj().min(1,"item description is required"),quantity:B.Yj().min(1,"quantity is required"),date_of_last_request:B.Yj(),allocation:B.Yj().min(1,"allocation is required"),remarks:B.Yj()}),C=B.Ik({inventory_description:B.Yj().min(1,"inventory description is required"),unit:B.Yj().min(1,"unit is required"),beginning:B.Yj(),ending:B.Yj(),utilized:B.Yj(),remarks:B.Yj(),checkbox:B.zM()}),D=B.Ik({request_description:B.Yj().min(1,"Name is required"),date:B.Yj().min(1,"Date is required"),from_name:B.Yj().min(1,"From is required"),items:B.YO(w).min(1,"At least one entry is required"),inventory_data:B.YO(C).min(1,"at least one entry is required"),requestFromId:B.ai().min(1,"From is required"),requestTypeId:B.ai().optional(),requestToId:B.ai({message:"Select only in the provided data"}).min(1,{message:"Requested to is required"}),createdAt:B.p6().optional(),updatedAt:B.p6().optional()}).omit({createdAt:!0,updatedAt:!0}).extend({approvers:p.XC}),S=B.Ik({item_description:B.Yj().min(1,"description is required"),budget:B.ai().optional(),total_expense:B.ai().optional(),variance:B.ai().optional(),proposed_budget:B.ai().optional(),remarks:B.Yj().optional()}),q=B.Ik({month_of:B.Yj().min(1,"Date is required"),requestFromId:B.ai().min(1,"From is required"),requestTypeId:B.ai().optional(),createdAt:B.p6().optional(),updatedAt:B.p6().optional(),admin_exp:B.YO(S),office_exp:B.YO(S),unbudgeted_exp:B.YO(S)}).omit({createdAt:!0,updatedAt:!0}).extend({approvers:p.XC}),E=B.Ik({date:B.Yj().min(1,"Date is required"),request_description:B.Yj().min(1,"description is required"),request_note:B.Yj(),numCols:B.ai().optional(),headers:B.YO(B.Yj()).optional(),rows:B.YO(B.YO(B.Yj())).optional(),requestFromId:B.ai().min(1,"From is required"),requestTypeId:B.ai().optional(),requestToId:B.ai({message:"Select only in the provided data"}).min(1,{message:"Requested to is required"}),createdAt:B.p6().optional(),updatedAt:B.p6().optional()}).omit({createdAt:!0,updatedAt:!0}).extend({approvers:p.XC}),R=B.Ik({date_endorsed:B.Yj(),id_no:B.Yj().min(1,"id number is required"),name_of_pensioner:B.Yj().min(1,"name of pensioner is required"),bank:B.Yj(),type_of_pension:B.Yj(),age:B.Yj(),date_in:B.Yj(),first_coll_effect:B.Yj(),last_transaction:B.Yj(),transaction_type:B.Yj(),no_of_months_overdue:B.Yj(),with_insurance_icod:B.Yj(),reason_for_no_insurance:B.Yj(),loan_balance_as_of:B.Yj(),total_lr:B.ai(),total_ap:B.ai(),total_udi:B.ai(),total_ide:B.ai(),reason_for_non_coll_acc:B.Yj(),co_maker:B.Yj(),relation_to_ssp:B.Yj(),contact_number:B.Yj(),compromise_payment:B.Yj(),payment_start:B.Yj(),action_taken:B.Yj(),requestFromId:B.ai().min(1,"From is required"),requestTypeId:B.ai().optional(),createdAt:B.p6().optional(),updatedAt:B.p6().optional()}).omit({createdAt:!0,updatedAt:!0}).extend({approvers:p.XC}),P=B.Ik({item_name:B.Yj().min(1,"item is required")}),F=B.Ik({date:B.Yj().min(1,"Date is required"),request_description:B.Yj().min(1,"description is required"),request_note:B.Yj(),items_list:B.YO(P).min(1,"At least one entry is required"),requestFromId:B.ai().min(1,"From is required"),requestTypeId:B.ai().optional(),requestToId:B.ai({message:"Select only in the provided data"}).min(1,{message:"Requested to is required"}),createdAt:B.p6().optional(),updatedAt:B.p6().optional()}).omit({createdAt:!0,updatedAt:!0}).extend({approvers:p.XC}),Y=B.Ik({destination_name:B.Yj().min(1,"destination is required")}),O=B.Ik({date:B.Yj(),day:B.Yj(),from:B.Yj(),to:B.Yj(),transportation_services:B.Yj(),or_number:B.Yj(),amount:B.ai()}),M=B.Ik({computation_date:B.Yj(),branch_name:B.Yj(),beg:B.ai(),ending:B.ai(),kilometers_consume:B.ai(),consumption_km:B.ai(),gas_liter_consume:B.ai(),gas_price_per_liter:B.ai()}),L=B.Ik({branch_name:B.Yj(),transpo:B.ai(),fuel:B.ai(),meals:B.ai(),accomodation:B.ai(),total:B.ai().optional()}),V=B.Ik({name:B.Yj().min(1,"name is required"),trip_ticket_number:B.Yj().min(1,"trip ticket is required"),approved_budget:B.ai().min(1,"budget is required"),computation_date_from:B.Yj(),computation_date_to:B.Yj(),destination_list:B.YO(Y).min(1,"At least one entry is required"),travel_details_list:B.YO(O).min(1,"at least one entry is required"),computation_list:B.YO(M).min(1,"at least one entry is required"),breakdown_expenses_list:B.YO(L),requestFromId:B.ai().min(1,"From is required"),requestTypeId:B.ai().optional(),createdAt:B.p6().optional(),updatedAt:B.p6().optional()}).omit({createdAt:!0,updatedAt:!0}).extend({approvers:p.XC}),z=B.Ik({date:B.Yj(),approved_weekly_itinerary:B.Yj(),purpose:B.Yj(),deviation:B.Yj()}),U=B.Ik({cur_date:B.Yj().min(1,"Date is required"),table_data:B.YO(z).min(1,"At least one entry is required"),requestFromId:B.ai().min(1,"From is required"),requestTypeId:B.ai().optional(),createdAt:B.p6().optional(),updatedAt:B.p6().optional()}).omit({createdAt:!0,updatedAt:!0}).extend({approvers:p.XC}),H=B.Ik({date:B.Yj(),days:B.Yj(),branch:B.Yj(),remarks:B.Yj()}),X=B.Ik({from_date:B.Yj().min(1,"Date is required"),to_date:B.Yj().min(1,"date is required"),table_data:B.YO(H).min(1,"At least one entry is required"),requestFromId:B.ai().min(1,"From is required"),requestTypeId:B.ai().optional(),createdAt:B.p6().optional(),updatedAt:B.p6().optional()}).omit({createdAt:!0,updatedAt:!0}).extend({approvers:p.XC}),G=B.Ik({date:B.Yj(),particulars:B.Yj(),amount:B.ai()}),K=B.Ik({name:B.Yj().min(1,"name is required"),date_covered:B.Yj().min(1,"date is required"),purpose:B.Yj().min(1,"purpose is required"),table_data:B.YO(G).min(1,"At least one entry is required"),requestFromId:B.ai().min(1,"From is required"),requestTypeId:B.ai().optional(),createdAt:B.p6().optional(),updatedAt:B.p6().optional()}).omit({createdAt:!0,updatedAt:!0}).extend({approvers:p.XC}),Q=B.Ik({name:B.Yj().optional(),address:B.Yj().optional(),prices:B.YO(B.ai().optional())}),J=B.Ik({item_name:B.Yj().min(1,"Item name is required"),qty:B.ai().min(1,"Quantity is required"),unit_of_quantity:B.Yj().min(1,"Unit is required"),po_unit_cost:B.ai().optional(),remarks:B.Yj().optional()}),W=B.Ik({date:B.Yj().min(1,"Date is required"),document_number:B.Yj(),items_list:B.YO(J).min(1,"At least one item is required"),supplier_list:B.YO(Q).length(3),requestFromId:B.ai().min(1,"From is required"),requestTypeId:B.ai().optional(),createdAt:B.p6().optional(),updatedAt:B.p6().optional()}).omit({createdAt:!0,updatedAt:!0}).extend({approvers:p.XC}),$=B.Ik({supplier_name:B.Yj().min(1,"Supplier name is required"),supplier_address:B.Yj()}),Z=B.Ik({unit_of_qty:B.Yj(),qty:B.ai().min(1,"Quantity is required"),item_name:B.Yj().min(1,"item name is required"),unit_price:B.ai().min(1,"unit price is required"),supplier_name:B.Yj(),supplier_address:B.Yj(),remarks:B.Yj()}),ee=B.Ik({date:B.Yj().min(1,"Date is required"),document_number:B.Yj(),items_list:B.YO(Z).min(1,"At least one item is required"),requestFromId:B.ai().min(1,"From is required"),requestTypeId:B.ai().optional(),createdAt:B.p6().optional(),updatedAt:B.p6().optional()}).omit({createdAt:!0,updatedAt:!0}).extend({approvers:p.XC});var er=l(59284);function el(e){var r;let{requestTypeId:l,requestType:s}=e,{data:n}=(0,f.rA)(),{data:p=[]}=(0,i.In)(),{data:v}=(0,i.XU)(),[b,y]=(0,d.useState)(null),[g,j]=(0,d.useState)(!1),[_,A]=(0,d.useState)(null),[B,w]=(0,d.useState)(0),[C,D]=(0,d.useState)([]),[S,q]=(0,d.useState)([]),[E,R]=(0,d.useState)([]),P=(null!=v?v:[]).filter(e=>e.approver).map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.name)?l:""}}),F=p.map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.branchName)?l:""}}),{control:Y,register:O,handleSubmit:M,reset:L,setValue:V,getValues:z,formState:{errors:U}}=(0,u.mN)({resolver:(0,m.u)(T),defaultValues:{requestTypeId:l,approvers:{checkedById:void 0,checkedBy2Id:void 0,checkedBy3Id:void 0,checkedBy4Id:void 0,recomApprovalId:void 0,recomApproval2Id:void 0,approveById:void 0,approveBy2Id:void 0}}});return(0,d.useEffect)(()=>{if(s){var e,r,a,d,t,n,o,i;L({requestTypeId:l,requestFromId:void 0,name:void 0,position:"",departure_date:"",destination:"",current_date:"",purpose_of_travel:"",report_to:"",expenses_allowed:0,numCols:0,headers:[],rows:[],totalsEnabled:[],approvers:{checkedById:null!=(e=s.checkedById)?e:void 0,checkedBy2Id:null!=(r=s.checkedBy2Id)?r:void 0,checkedBy3Id:null!=(a=s.checkedBy3Id)?a:void 0,checkedBy4Id:null!=(d=s.checkedBy4Id)?d:void 0,recomApprovalId:null!=(t=s.recomApprovalId)?t:void 0,recomApproval2Id:null!=(n=s.recomApproval2Id)?n:void 0,approveById:null!=(o=s.approveById)?o:void 0,approveBy2Id:null!=(i=s.approveBy2Id)?i:void 0}})}},[s,L,l]),(0,d.useEffect)(()=>{if(null==n?void 0:n.branch){var e;V("requestFromId",null==n||null==(e=n.branch)?void 0:e.id)}},[null==n?void 0:n.branch,V]),(0,d.useEffect)(()=>{S.length>0&&E.some(Boolean)&&V("columnTotals",S[0].map((e,r)=>E[r]?S.reduce((e,l)=>{let a=parseFloat(l[r]);return isNaN(a)?e:e+a},0):0))},[S,E,V]),(0,a.jsxs)("div",{className:"bg-white border border-[#ECECEC] min-h-70 px-3 py-8 rounded-md",children:[(0,a.jsx)("div",{className:"p-1.5",children:(0,a.jsxs)("h3",{className:"text-2xl font-extrabold text-gray-600 text-center",children:[null!=(r=null==s?void 0:s.requestName)?r:""," FORM"]})}),(0,a.jsxs)("form",{className:"grid grid-cols-[repeat(auto-fit,minmax(300px,1fr))] gap-4 px-4 mt-8",onSubmit:M(e=>{var r,l,a,d,t,s,o,i,c,u,m,x,h,v,b,g,f;A(e.approvers);let _=null==n||null==(r=n.branch)?void 0:r.coordinatorId,k=[{id:null!=(u=null==(l=e.approvers)?void 0:l.checkedById)?u:null,roleType:"checkedById"},{id:null!=(m=null==(a=e.approvers)?void 0:a.checkedBy2Id)?m:null,roleType:"checkedBy2Id"},{id:null!=(x=null==(d=e.approvers)?void 0:d.checkedBy3Id)?x:null,roleType:"checkedBy3Id"},{id:null!=(h=null==(t=e.approvers)?void 0:t.checkedBy4Id)?h:null,roleType:"checkedBy4Id"},{id:null!=(v=null==(s=e.approvers)?void 0:s.recomApprovalId)?v:null,roleType:"recomApprovalId"},{id:null!=(b=null==(o=e.approvers)?void 0:o.recomApproval2Id)?b:null,roleType:"recomApproval2Id"},{id:null!=(g=null==(i=e.approvers)?void 0:i.approveById)?g:null,roleType:"approveById"},{id:null!=(f=null==(c=e.approvers)?void 0:c.approveBy2Id)?f:null,roleType:"approveBy2Id"}].filter(e=>e.id).map(e=>{if(["checkedById","checkedBy2Id","checkedBy3Id","checkedBy4Id"].includes(e.roleType)){if(2===e.id)return{...e,id:_};else if(4===e.id&&(null==n?void 0:n.branchId))return{...e,id:I(p,null==n?void 0:n.branchId)}}if(["recomApprovalId","recomApproval2Id"].includes(e.roleType)&&3===e.id&&(null==n?void 0:n.branch)){var r;return{...e,id:N(null==n||null==(r=n.branch)?void 0:r.branchName)}}return e});console.log("approval1: ",k),y({...e,table_data:{headers:C,rows:S},approvers:k}),j(!0)}),children:[(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)(c.Pd,{label:"Name",placeholder:"Enter Date...",register:O("name"),error:U.name,type:"text"})}),(0,a.jsx)("div",{className:"flex flex-row",children:(0,a.jsx)(u.xI,{name:"requestFromId",control:Y,render:e=>{let{field:r,fieldState:l}=e;return(0,a.jsx)(o.A,{data:F,label:"Branch",placeholder:"Select branch...",name:r.name,value:r.value,onChange:r.onChange,inputRef:r.ref,error:l.error})}})}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)(c.Pd,{label:"Position",placeholder:"Enter Position...",register:O("position"),error:U.position,type:"text"})}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)(c.Pd,{label:"Departure Date",placeholder:"Enter departure date...",register:O("departure_date"),error:U.departure_date,type:"date"})}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)(c.Pd,{label:"Destination",placeholder:"Enter destination...",register:O("destination"),error:U.destination,type:"text"})}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)(c.Pd,{label:"Current Date",placeholder:"Enter current date...",register:O("current_date"),error:U.current_date,type:"date"})}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)(c.Pd,{label:"Purpose of Travel",placeholder:"Enter purpose of travel...",register:O("purpose_of_travel"),error:U.purpose_of_travel,type:"text"})}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)(c.Pd,{label:"Report To",placeholder:"Enter Report to...",register:O("report_to"),error:U.report_to,type:"text"})}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)(c.Pd,{label:"Expenses Allowed",placeholder:"Enter expenses allowed...",register:O("expenses_allowed",{valueAsNumber:!0}),error:U.expenses_allowed,type:"number"})}),(0,a.jsx)("div",{className:"flex flex-col col-span-full w-4/12",children:(0,a.jsx)(c.Pd,{label:"Number of columns",register:O("numCols",{valueAsNumber:!0,onChange:e=>{let r=Number(e.target.value);if(isNaN(r)||r<0){w(0),D([]),q([]),R([]);return}if(r>50){alert("⚠️ Maximum of 50 columns allowed."),w(50),D(Array(50).fill("")),q([Array(50).fill("")]),R(Array(50).fill(!1));return}r>0?(w(r),D(Array(r).fill("")),q([Array(r).fill("")]),R(Array(r).fill(!1))):(w(0),D([]),q([]),R([]))}}),placeholder:"Enter a number...",type:"number"})}),B>0&&(0,a.jsxs)("div",{className:"p-4 col-span-full",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"DEFINE COLUMN HEADERS"}),(0,a.jsxs)("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(10rem,1fr))] gap-2",children:[C.map((e,r)=>(0,a.jsx)("input",{type:"text",placeholder:"Column ".concat(r+1),value:e,onChange:e=>{var l;return l=e.target.value,void D(e=>{let a=e.map((e,a)=>a===r?l:e);return V("headers",a),a})},className:"border border-gray-300 bg-gray-50 rounded-lg p-2"},r)),U.numCols&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:U.numCols.message})]})]}),(0,a.jsx)("div",{className:"col-span-full",children:S.length>0&&(0,a.jsx)("div",{className:"overflow-x-auto p-4",children:(0,a.jsxs)("table",{className:"w-full border border-gray-300",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:C.map((e,r)=>(0,a.jsx)("th",{className:"border border-gray-300 p-2 bg-gray-100 text-sm",children:e||"Column ".concat(r+1)},r))})}),(0,a.jsxs)("tbody",{children:[S.map((e,r)=>(0,a.jsxs)("tr",{children:[e.map((e,l)=>(0,a.jsx)("td",{className:"border border-gray-300 p-2",children:(0,a.jsx)("input",{type:"text",value:e,onChange:e=>{var a;return a=e.target.value,void q(e=>{let d=e.map((e,d)=>d===r?e.map((e,r)=>r===l?a:e):e);if(0===l&&r===e.length-1&&""!==a.trim()){let e=[...d,Array(B).fill("")];return V("rows",e),e}return V("rows",d),d})},className:"w-full border border-gray-300 rounded p-1"})},l)),(0,a.jsx)("td",{className:"border border-gray-300 p-2 text-center",children:S.length>1&&(0,a.jsx)("button",{type:"button",onClick:()=>{q(e=>e.filter((e,l)=>l!==r))},className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-md",children:"\uD83D\uDDD1"})})]},r)),(0,a.jsxs)("tr",{children:[C.map((e,r)=>(0,a.jsx)("td",{className:"border border-gray-300 p-2 text-center",children:(0,a.jsxs)("label",{className:"flex items-center justify-center gap-1 text-xs",children:[(0,a.jsx)("input",{type:"checkbox",checked:E[r]||!1,onChange:e=>{let l=[...E];l[r]=e.target.checked,R(l),V("totalsEnabled",l)}}),"Total"]})},r)),(0,a.jsx)("td",{className:"border border-gray-300 p-2"})]})]})]})})}),(0,a.jsx)("div",{className:"col-span-full mt-10",children:(0,a.jsx)(k,{control:Y,approverData:P,setValue:V,getValues:z})}),(0,a.jsx)("div",{className:"col-span-full justify-end flex gap-2",children:(0,a.jsx)(x.A,{label:"Preview",size:"md",type:"submit",icon:(0,a.jsx)(t.A,{})})})]}),g&&(0,a.jsx)(h.A,{title:"TravelOrder Summary",size:"xl",children:(0,a.jsx)(er.A,{onClose:()=>{j(!1)},onReset:()=>{L(),w(0),D([]),q([]),R([])},formData:{...b,headers:C,rows:S},requestType:s,approvers:_})})]})}var ea=l(88933);function ed(e){let{requestTypeId:r,requestType:l}=e,[s,n]=(0,d.useState)(null),[p,v]=(0,d.useState)(!1),[b,y]=(0,d.useState)(null),{data:g}=(0,f.rA)(),{data:j}=(0,i.XU)(),{data:_=[]}=(0,i.In)(),A=(null!=j?j:[]).filter(e=>e.approver).map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.name)?l:""}}),B=_.map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.branchName)?l:""}}),{control:T,register:w,handleSubmit:C,reset:D,setValue:S,getValues:E,formState:{errors:R}}=(0,u.mN)({resolver:(0,m.u)(q),defaultValues:{requestTypeId:r,approvers:{checkedById:void 0,checkedBy2Id:void 0,checkedBy3Id:void 0,checkedBy4Id:void 0,recomApprovalId:void 0,recomApproval2Id:void 0,approveById:void 0,approveBy2Id:void 0}}});(0,d.useEffect)(()=>{if(l){var e,a,d,t,s,n,o,i;D({requestTypeId:r,requestFromId:void 0,month_of:"",admin_exp:[{item_description:"",budget:0,total_expense:0,variance:0,proposed_budget:0,remarks:""}],office_exp:[{item_description:"",budget:0,total_expense:0,variance:0,proposed_budget:0,remarks:""}],unbudgeted_exp:[{item_description:"",budget:0,total_expense:0,variance:0,proposed_budget:0,remarks:""}],approvers:{checkedById:null!=(e=l.checkedById)?e:void 0,checkedBy2Id:null!=(a=l.checkedBy2Id)?a:void 0,checkedBy3Id:null!=(d=l.checkedBy3Id)?d:void 0,checkedBy4Id:null!=(t=l.checkedBy4Id)?t:void 0,recomApprovalId:null!=(s=l.recomApprovalId)?s:void 0,recomApproval2Id:null!=(n=l.recomApproval2Id)?n:void 0,approveById:null!=(o=l.approveById)?o:void 0,approveBy2Id:null!=(i=l.approveBy2Id)?i:void 0}})}},[l,D,r]);let{fields:P,append:F,remove:Y}=(0,u.jz)({control:T,name:"admin_exp"}),{fields:O,append:M,remove:L}=(0,u.jz)({control:T,name:"office_exp"}),{fields:V,append:z,remove:U}=(0,u.jz)({control:T,name:"unbudgeted_exp"});return(0,a.jsxs)("div",{className:"bg-white border border-[#ECECEC] min-h-80 px-6 py-3 rounded-md",children:[(0,a.jsx)("div",{children:(0,a.jsx)("h2",{className:"p-4 font-extrabold text-2xl text-center text-gray-700",children:"PROPOSED BUDGET"})}),(0,a.jsx)("form",{onSubmit:C(e=>{var r,l,a,d,t,s,o,i,c,u,p,m,x,h,b,j,f;y(e.approvers);let k=null==g||null==(r=g.branch)?void 0:r.coordinatorId,A=[{id:null!=(u=null==(l=e.approvers)?void 0:l.checkedById)?u:null,roleType:"checkedById"},{id:null!=(p=null==(a=e.approvers)?void 0:a.checkedBy2Id)?p:null,roleType:"checkedBy2Id"},{id:null!=(m=null==(d=e.approvers)?void 0:d.checkedBy3Id)?m:null,roleType:"checkedBy3Id"},{id:null!=(x=null==(t=e.approvers)?void 0:t.checkedBy4Id)?x:null,roleType:"checkedBy4Id"},{id:null!=(h=null==(s=e.approvers)?void 0:s.recomApprovalId)?h:null,roleType:"recomApprovalId"},{id:null!=(b=null==(o=e.approvers)?void 0:o.recomApproval2Id)?b:null,roleType:"recomApproval2Id"},{id:null!=(j=null==(i=e.approvers)?void 0:i.approveById)?j:null,roleType:"approveById"},{id:null!=(f=null==(c=e.approvers)?void 0:c.approveBy2Id)?f:null,roleType:"approveBy2Id"}].filter(e=>e.id).map(e=>{if(["checkedById","checkedBy2Id","checkedBy3Id","checkedBy4Id"].includes(e.roleType)){if(2===e.id)return{...e,id:k};else if(4===e.id&&(null==g?void 0:g.branchId))return{...e,id:I(_,null==g?void 0:g.branchId)}}if(["recomApprovalId","recomApproval2Id"].includes(e.roleType)&&3===e.id&&(null==g?void 0:g.branch)){var r;return{...e,id:N(null==g||null==(r=g.branch)?void 0:r.branchName)}}return e});n({...e,approvers:A}),v(!0)}),children:(0,a.jsxs)("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(20rem,1fr))] gap-4 p-4 mt-8",children:[(0,a.jsx)("div",{className:"flex flex-row",children:(0,a.jsx)(u.xI,{name:"requestFromId",control:T,render:e=>{let{field:r,fieldState:l}=e;return(0,a.jsx)(o.A,{data:B,label:"Branch",placeholder:"Select branch...",name:r.name,value:r.value,onChange:r.onChange,inputRef:r.ref,error:l.error})}})}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)(c.Pd,{label:"Month Of",placeholder:"Enter Date...",register:w("month_of"),error:R.month_of,type:"month"})}),(0,a.jsxs)("div",{className:"col-span-full mt-4",children:[(0,a.jsx)("h2",{className:"font-bold text-gray-700 mb-2",children:"ADMIN & PERSONNEL EXPENSES:"}),(0,a.jsxs)("table",{className:"w-full border border-gray-600 text-center",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"Item Description"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"Budget"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"Total Expense"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"Variance"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"Proposed Budget"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"Remarks"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"Action"})]})}),(0,a.jsx)("tbody",{children:P.map((e,r)=>{var l,d,t,s,n,o,i,u,p,m,x,h;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"bg-white p-2 border border-gray-300",children:(0,a.jsx)(c.Pd,{type:"text",placeholder:"Description",register:w("admin_exp.".concat(r,".item_description")),error:null==(d=R.admin_exp)||null==(l=d[r])?void 0:l.item_description})}),(0,a.jsx)("td",{className:"border border-gray-300 p-2",children:(0,a.jsx)(c.Pd,{type:"number",placeholder:"Budget",register:w("admin_exp.".concat(r,".budget"),{valueAsNumber:!0,onChange:e=>{let l=Number(e.target.value)||0,a=E("admin_exp.".concat(r,".total_expense"))||0;S("admin_exp.".concat(r,".variance"),l-a)}}),error:null==(s=R.admin_exp)||null==(t=s[r])?void 0:t.budget})}),(0,a.jsx)("td",{className:"border border-gray-300 p-2",children:(0,a.jsx)(c.Pd,{type:"number",placeholder:"Total Expense",register:w("admin_exp.".concat(r,".total_expense"),{valueAsNumber:!0,onChange:e=>{let l=Number(e.target.value)||0,a=E("admin_exp.".concat(r,".budget"))||0;S("admin_exp.".concat(r,".variance"),a-l)}}),error:null==(o=R.admin_exp)||null==(n=o[r])?void 0:n.total_expense})}),(0,a.jsx)("td",{className:"border border-gray-300 p-2",children:(0,a.jsx)(c.Pd,{type:"number",placeholder:"Variance",register:w("admin_exp.".concat(r,".variance"),{valueAsNumber:!0}),error:null==(u=R.admin_exp)||null==(i=u[r])?void 0:i.variance})}),(0,a.jsx)("td",{className:"border border-gray-300 p-2",children:(0,a.jsx)(c.Pd,{type:"number",placeholder:"Proposed Budget",register:w("admin_exp.".concat(r,".proposed_budget"),{valueAsNumber:!0}),error:null==(m=R.admin_exp)||null==(p=m[r])?void 0:p.proposed_budget})}),(0,a.jsx)("td",{className:"border border-gray-300 p-2",children:(0,a.jsx)(c.Pd,{type:"text",placeholder:"Remarks",register:w("admin_exp.".concat(r,".remarks")),error:null==(h=R.admin_exp)||null==(x=h[r])?void 0:x.remarks})}),(0,a.jsx)("td",{className:"border border-gray-300",children:(0,a.jsx)("button",{disabled:1===P.length,type:"button",onClick:()=>Y(r),className:"px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600 disabled:bg-red-300 disabled:cursor-not-allowed",children:"\uD83D\uDDD1"})})]},e.id)})})]}),(0,a.jsx)("button",{type:"button",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 mt-4",onClick:()=>F({item_description:"",budget:0,total_expense:0,variance:0,proposed_budget:0,remarks:""}),children:"✚ Add Admin EXP"})]}),(0,a.jsxs)("div",{className:"col-span-full mt-4",children:[(0,a.jsx)("h2",{className:"font-bold text-gray-700 mb-2",children:"OFFICE & OTHER EXPENSES:"}),(0,a.jsxs)("table",{className:"w-full border border-gray-600 text-center",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"Item Description"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"Budget"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"Total Expense"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"Variance"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"Proposed Budget"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"Remarks"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"Action"})]})}),(0,a.jsx)("tbody",{children:O.map((e,r)=>{var l,d,t,s,n,o,i,u,p,m,x,h;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"bg-white p-2 border border-gray-300",children:(0,a.jsx)(c.Pd,{type:"text",placeholder:"Description",register:w("office_exp.".concat(r,".item_description")),error:null==(d=R.office_exp)||null==(l=d[r])?void 0:l.item_description})}),(0,a.jsx)("td",{className:"border border-gray-300 p-2",children:(0,a.jsx)(c.Pd,{type:"number",placeholder:"Budget",register:w("office_exp.".concat(r,".budget"),{valueAsNumber:!0,onChange:e=>{let l=Number(e.target.value)||0,a=E("office_exp.".concat(r,".total_expense"))||0;S("office_exp.".concat(r,".variance"),l-a)}}),error:null==(s=R.office_exp)||null==(t=s[r])?void 0:t.budget})}),(0,a.jsx)("td",{className:"border border-gray-300 p-2",children:(0,a.jsx)(c.Pd,{type:"number",placeholder:"Total Expense",register:w("office_exp.".concat(r,".total_expense"),{valueAsNumber:!0,onChange:e=>{let l=Number(e.target.value)||0,a=E("office_exp.".concat(r,".budget"))||0;S("office_exp.".concat(r,".variance"),a-l)}}),error:null==(o=R.office_exp)||null==(n=o[r])?void 0:n.total_expense})}),(0,a.jsx)("td",{className:"border border-gray-300 p-2",children:(0,a.jsx)(c.Pd,{type:"number",placeholder:"Variance",register:w("office_exp.".concat(r,".variance"),{valueAsNumber:!0}),error:null==(u=R.office_exp)||null==(i=u[r])?void 0:i.variance})}),(0,a.jsx)("td",{className:"border border-gray-300 p-2",children:(0,a.jsx)(c.Pd,{type:"number",placeholder:"Proposed Budget",register:w("office_exp.".concat(r,".proposed_budget"),{valueAsNumber:!0}),error:null==(m=R.office_exp)||null==(p=m[r])?void 0:p.proposed_budget})}),(0,a.jsx)("td",{className:"border border-gray-300 p-2",children:(0,a.jsx)(c.Pd,{type:"text",placeholder:"Remarks",register:w("office_exp.".concat(r,".remarks")),error:null==(h=R.office_exp)||null==(x=h[r])?void 0:x.remarks})}),(0,a.jsx)("td",{className:"border border-gray-300",children:(0,a.jsx)("button",{type:"button",disabled:1===O.length,onClick:()=>L(r),className:"px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600 disabled:bg-red-300 disabled:cursor-not-allowed",children:"\uD83D\uDDD1"})})]},e.id)})})]}),(0,a.jsx)("button",{type:"button",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 mt-4",onClick:()=>M({item_description:"",budget:0,total_expense:0,variance:0,proposed_budget:0,remarks:""}),children:"✚ Add Office EXP"})]}),(0,a.jsxs)("div",{className:"col-span-full mt-4",children:[(0,a.jsx)("h2",{className:"font-bold text-gray-700 mb-2",children:"UNBUDGETED EXPENSES:"}),(0,a.jsxs)("table",{className:"w-full border border-gray-600 text-center",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"Item Description"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"Budget"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"Total Expense"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"Variance"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"Proposed Budget"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"Remarks"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"Action"})]})}),(0,a.jsx)("tbody",{children:V.map((e,r)=>{var l,d,t,s,n,o,i,u,p,m,x,h;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"bg-white p-2 border border-gray-300",children:(0,a.jsx)(c.Pd,{type:"text",placeholder:"Description",register:w("unbudgeted_exp.".concat(r,".item_description")),error:null==(d=R.unbudgeted_exp)||null==(l=d[r])?void 0:l.item_description})}),(0,a.jsx)("td",{className:"border border-gray-300 p-2",children:(0,a.jsx)(c.Pd,{type:"number",placeholder:"Budget",register:w("unbudgeted_exp.".concat(r,".budget"),{valueAsNumber:!0}),error:null==(s=R.unbudgeted_exp)||null==(t=s[r])?void 0:t.budget})}),(0,a.jsx)("td",{className:"border border-gray-300 p-2",children:(0,a.jsx)(c.Pd,{type:"number",placeholder:"Total Expense",register:w("unbudgeted_exp.".concat(r,".total_expense"),{valueAsNumber:!0}),error:null==(o=R.unbudgeted_exp)||null==(n=o[r])?void 0:n.total_expense})}),(0,a.jsx)("td",{className:"border border-gray-300 p-2",children:(0,a.jsx)(c.Pd,{type:"number",placeholder:"Variance",register:w("unbudgeted_exp.".concat(r,".variance"),{valueAsNumber:!0}),error:null==(u=R.unbudgeted_exp)||null==(i=u[r])?void 0:i.variance})}),(0,a.jsx)("td",{className:"border border-gray-300 p-2",children:(0,a.jsx)(c.Pd,{type:"number",placeholder:"Proposed Budget",register:w("unbudgeted_exp.".concat(r,".proposed_budget"),{valueAsNumber:!0}),error:null==(m=R.unbudgeted_exp)||null==(p=m[r])?void 0:p.proposed_budget})}),(0,a.jsx)("td",{className:"border border-gray-300 p-2",children:(0,a.jsx)(c.Pd,{type:"text",placeholder:"Remarks",register:w("unbudgeted_exp.".concat(r,".remarks")),error:null==(h=R.unbudgeted_exp)||null==(x=h[r])?void 0:x.remarks})}),(0,a.jsx)("td",{className:"border border-gray-300",children:(0,a.jsx)("button",{disabled:1===V.length,type:"button",onClick:()=>U(r),className:"px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600 disabled:bg-red-300 disabled:cursor-not-allowed",children:"\uD83D\uDDD1"})})]},e.id)})})]}),(0,a.jsx)("button",{type:"button",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 mt-4",onClick:()=>z({item_description:"",budget:0,total_expense:0,variance:0,proposed_budget:0,remarks:""}),children:"✚ Add Office EXP"})]}),(0,a.jsx)("div",{className:"col-span-full mt-10",children:(0,a.jsx)(k,{control:T,approverData:A,setValue:S,getValues:E})}),(0,a.jsx)("div",{className:"col-span-full flex justify-end mt-3",children:(0,a.jsx)(x.A,{label:"Submit",size:"md",type:"submit",icon:(0,a.jsx)(t.A,{})})})]})}),p&&(0,a.jsx)(h.A,{size:"xl",children:(0,a.jsx)(ea.A,{onClose:()=>{v(!1)},onReset:()=>{D()},formData:s,requestType:l,approvers:b})})]})}var et=l(28661);function es(e){let{requestTypeId:r,requestType:l}=e,[s,n]=(0,d.useState)(!1),[p,v]=(0,d.useState)(null),{data:b}=(0,f.rA)(),{data:y=[]}=(0,i.In)(),{data:g}=(0,i.XU)(),[j,_]=(0,d.useState)(null),A=(null!=g?g:[]).filter(e=>e.approver).map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.name)?l:""}}),B=y.map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.branchName)?l:""}}),{control:T,register:w,handleSubmit:C,reset:D,setValue:S,getValues:q,formState:{errors:E}}=(0,u.mN)({resolver:(0,m.u)(F),defaultValues:{requestTypeId:r,approvers:{checkedById:void 0,checkedBy2Id:void 0,checkedBy3Id:void 0,checkedBy4Id:void 0,recomApprovalId:void 0,recomApproval2Id:void 0,approveById:void 0,approveBy2Id:void 0}}});(0,d.useEffect)(()=>{if(l){var e,a,d,t,s,n,o,i;D({requestTypeId:r,requestToId:void 0,requestFromId:void 0,date:void 0,request_description:"",request_note:"",items_list:[{item_name:""}],approvers:{checkedById:null!=(e=l.checkedById)?e:void 0,checkedBy2Id:null!=(a=l.checkedBy2Id)?a:void 0,checkedBy3Id:null!=(d=l.checkedBy3Id)?d:void 0,checkedBy4Id:null!=(t=l.checkedBy4Id)?t:void 0,recomApprovalId:null!=(s=l.recomApprovalId)?s:void 0,recomApproval2Id:null!=(n=l.recomApproval2Id)?n:void 0,approveById:null!=(o=l.approveById)?o:void 0,approveBy2Id:null!=(i=l.approveBy2Id)?i:void 0}})}},[l,D,r]);let{fields:R,append:P,remove:Y}=(0,u.jz)({control:T,name:"items_list"});return(0,a.jsxs)("div",{className:"bg-white border border-[#ECECEC] min-h-90 py-4 px-3 rounded-md",children:[(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("h2",{className:"p-4 font-extrabold text-2xl text-gray-600",children:"TRANSMITTAL MEMO"})}),(0,a.jsx)("form",{onSubmit:C(e=>{var r,l,a,d,t,s,o,i,c,u,p,m,x,h,g,j,f;_(e.approvers);let k=null==b||null==(r=b.branch)?void 0:r.coordinatorId,A=[{id:null!=(u=null==(l=e.approvers)?void 0:l.checkedById)?u:null,roleType:"checkedById"},{id:null!=(p=null==(a=e.approvers)?void 0:a.checkedBy2Id)?p:null,roleType:"checkedBy2Id"},{id:null!=(m=null==(d=e.approvers)?void 0:d.checkedBy3Id)?m:null,roleType:"checkedBy3Id"},{id:null!=(x=null==(t=e.approvers)?void 0:t.checkedBy4Id)?x:null,roleType:"checkedBy4Id"},{id:null!=(h=null==(s=e.approvers)?void 0:s.recomApprovalId)?h:null,roleType:"recomApprovalId"},{id:null!=(g=null==(o=e.approvers)?void 0:o.recomApproval2Id)?g:null,roleType:"recomApproval2Id"},{id:null!=(j=null==(i=e.approvers)?void 0:i.approveById)?j:null,roleType:"approveById"},{id:null!=(f=null==(c=e.approvers)?void 0:c.approveBy2Id)?f:null,roleType:"approveBy2Id"}].filter(e=>e.id).map(e=>{if(["checkedById","checkedBy2Id","checkedBy3Id","checkedBy4Id"].includes(e.roleType)){if(2===e.id)return{...e,id:k};else if(4===e.id&&(null==b?void 0:b.branchId))return{...e,id:I(y,null==b?void 0:b.branchId)}}if(["recomApprovalId","recomApproval2Id"].includes(e.roleType)&&3===e.id&&(null==b?void 0:b.branch)){var r;return{...e,id:N(null==b||null==(r=b.branch)?void 0:r.branchName)}}return e});v({...e,approvers:A}),n(!0)}),children:(0,a.jsxs)("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(25rem,1fr))] gap-4 p-4 mt-8",children:[(0,a.jsx)("div",{className:"flex flex-row",children:(0,a.jsx)(u.xI,{name:"requestToId",control:T,render:e=>{let{field:r,fieldState:l}=e;return(0,a.jsx)(o.A,{data:A,label:"Request To",placeholder:"Select request to...",name:r.name,value:r.value,onChange:r.onChange,inputRef:r.ref,error:l.error})}})}),(0,a.jsx)("div",{className:"flex flex-row",children:(0,a.jsx)(u.xI,{name:"requestFromId",control:T,render:e=>{let{field:r,fieldState:l}=e;return(0,a.jsx)(o.A,{data:B,label:"Branch",placeholder:"Select branch...",name:r.name,value:r.value,onChange:r.onChange,inputRef:r.ref,error:l.error})}})}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)(c.Pd,{label:"Date",register:w("date"),error:E.date,type:"date"})}),(0,a.jsx)("div",{className:"flex col-span-2",children:(0,a.jsx)(c.sO,{label:"Request Description",register:w("request_description"),error:E.request_description})}),(0,a.jsx)("div",{className:"flex flex-row",children:(0,a.jsx)(c.sO,{label:"Note",register:w("request_note"),error:E.request_note})}),(0,a.jsxs)("div",{className:"col-span-full mt-4",children:[(0,a.jsx)("h2",{className:"font-bold text-gray-700 mb-2",children:"ITEM LIST:"}),(0,a.jsxs)("table",{className:"w-full border border-gray-600 text-center",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"Item Name"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400 w-1/12",children:"Action"})]})}),(0,a.jsx)("tbody",{children:R.map((e,r)=>{var l,d;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"bg-white p-2 border border-gray-300",children:(0,a.jsx)(c.Pd,{type:"text",placeholder:"Description",register:w("items_list.".concat(r,".item_name")),error:null==(d=E.items_list)||null==(l=d[r])?void 0:l.item_name})}),(0,a.jsx)("td",{className:"border border-gray-300 w-1/12",children:(0,a.jsx)("button",{disabled:1===R.length,type:"button",onClick:()=>Y(r),className:"px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600 disabled:bg-red-300 disabled:cursor-not-allowed",children:"\uD83D\uDDD1"})})]},e.id)})})]}),(0,a.jsx)("button",{type:"button",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 mt-4",onClick:()=>P({item_name:""}),children:"✚ Add Admin EXP"})]}),(0,a.jsx)("div",{className:"col-span-full mt-15 border-t border-gray-300 pt-4",children:(0,a.jsx)(k,{control:T,approverData:A,setValue:S,getValues:q})}),(0,a.jsx)("div",{className:"col-span-full flex justify-end mt-3",children:(0,a.jsx)(x.A,{label:"Submit",size:"md",type:"submit",icon:(0,a.jsx)(t.A,{})})})]})}),s&&(0,a.jsx)(h.A,{size:"lg",children:(0,a.jsx)(et.A,{onClose:()=>{n(!1)},onReset:()=>{D()},formData:p,requestType:l,approvers:j})})]})}let en=(0,s.A)((0,a.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.89-2-2-2m0 16H5V7h14zm-5.5-6c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5.67-1.5 1.5-1.5 1.5.67 1.5 1.5M12 9c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"Preview");var eo=l(87175);let ei=e=>{let{tags:r,setTags:l,placeholder:t="Type and press Enter",onBlur:s}=e,[n,o]=(0,d.useState)("");return(0,a.jsx)("div",{className:"flex flex-col gap-3",children:(0,a.jsxs)("div",{className:"border border-gray-300 rounded p-1.5 flex flex-wrap gap-2 min-h-[40px]",children:[r.map((e,d)=>(0,a.jsxs)("div",{className:"flex items-center bg-green-200 text-green-700 px-3 py-1 rounded-full text-sm",children:[e,(0,a.jsx)("button",{type:"button",onClick:()=>{l(r.filter((e,r)=>r!==d))},className:"ml-2 text-green-500 hover:text-green-700 focus:outline-none",children:"\xd7"})]},d)),(0,a.jsx)("input",{type:"text",className:"flex-grow outline-none p-1 text-sm",value:n,onChange:e=>o(e.target.value),onKeyDown:e=>{("Enter"===e.key||","===e.key)&&""!==n.trim()&&(e.preventDefault(),(()=>{let e=n.trim();e&&!r.includes(e)&&l([...r,e]),o("")})())},placeholder:t,onBlur:s})]})})},ec=function(e){var r;let{label:l="",name:d,register:t,error:s,type:n="text",options:o=[],className:i="",control:c,...p}=e,m=t(d);return(0,a.jsxs)("div",{className:"flex flex-col gap-2 flex-1",children:[(0,a.jsx)("label",{className:"font-semibold text-[#333333]",htmlFor:String(d),children:l}),"taginput"===n?(0,a.jsx)(u.xI,{name:d,control:c,render:e=>{var r;let{field:l}=e;return(0,a.jsx)(ei,{tags:null!=(r=l.value)?r:[],setTags:e=>l.onChange(e),placeholder:p.placeholder||"Type and press Enter",onBlur:l.onBlur})}}):"textarea"===n?(0,a.jsx)("textarea",{id:String(d),...m,className:"border border-gray-300 rounded p-2 flex flex-wrap gap-2 min-h-[42px] ".concat(i),...p}):"select"===n?(0,a.jsxs)("select",{id:String(d),...m,className:"border border-gray-300 rounded p-2 flex flex-wrap gap-2 min-h-[42px] ".concat(i),...p,children:[(0,a.jsx)("option",{value:"",children:"Select an option"}),o.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))]}):(0,a.jsx)("input",{id:String(d),type:n,...m,className:"border border-gray-300 rounded p-2 flex flex-wrap w-full gap-2 min-h-[42px] ".concat(i),...p}),s&&(0,a.jsx)("p",{className:"text-red-400 font-light",children:"message"in s?s.message:Array.isArray(s)?null==(r=s[0])?void 0:r.message:void 0})]})};var eu=l(40857);let ep=e=>{let{onChange:r,onDataChange:l,resetSignal:t}=e,{register:s,handleSubmit:n,formState:{errors:o},reset:i,control:c,setValue:h,watch:v}=(0,u.mN)({resolver:(0,m.u)(p.EW),defaultValues:{tagsField:[],repairs:[]}}),[b,y]=d.useState([]),g=e=>{var r,l,a,d;return{tagsField:null!=(r=e.tagsField)?r:[],startDate:e.startDate?new Date(e.startDate).toISOString().slice(0,10):null,endDate:e.endDate?new Date(e.endDate).toISOString().slice(0,10):null,travelDate:e.travelDate?new Date(e.travelDate).toISOString().slice(0,10):null,travelling:null!=(l=e.travelling)?l:null,fuelFee:"number"==typeof e.fuelFee?e.fuelFee:null,repairs:e.repairs&&e.repairs.length?e.repairs:null,litigationExp:"number"==typeof e.litigationExp?e.litigationExp:null,totalFunds:"number"==typeof e.totalFunds?e.totalFunds:null,travelKm:null!=(a=e.travelKm)?a:null,fundRemarks:null!=(d=e.fundRemarks)?d:null}},j=d.useCallback(e=>{y(r=>[...r,e]),i({tagsField:e.tagsField,repairs:[],travelDate:void 0,travelling:"",fuelFee:void 0,litigationExp:void 0,totalFunds:void 0,travelKm:"",fundRemarks:"",startDate:void 0,endDate:void 0})},[i]),f=e=>{console.log("Validation errors:",e)},N=d.useCallback(()=>{n(j,f)()},[n,j]),I=d.useMemo(()=>b.reduce((e,r)=>{var l,a;return e.fuel+=Number(null!=(l=r.fuelFee)?l:0),e.total+=Number(null!=(a=r.totalFunds)?a:0),e},{fuel:0,total:0}),[b]),_=e=>e.toFixed(2),k=v("fuelFee"),A=v("litigationExp");return d.useEffect(()=>{h("totalFunds",Number(k||0)+Number(A||0))},[k,A,h]),d.useEffect(()=>{r(I.total)},[I.total,r]),d.useEffect(()=>{l&&l(b.map(g))},[b,l]),d.useEffect(()=>{y([])},[t]),(0,a.jsxs)("div",{className:"main-body flex flex-col gap-6 bg-white px-8 py-6 rounded-md",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-y-3 gap-x-6",children:[(0,a.jsx)("div",{className:"py-2 col-span-2",children:(0,a.jsx)("h6",{className:"font-medium text-gray-500",children:"Period Covered"})}),(0,a.jsx)(ec,{label:"Enter start date",type:"date",name:"startDate",register:s,error:o.startDate}),(0,a.jsx)(ec,{label:"Enter end date",type:"date",name:"endDate",register:s,error:o.endDate}),(0,a.jsx)("div",{className:"py-2 col-span-2",children:(0,a.jsx)("h6",{className:"font-medium text-gray-500",children:"Fund Details"})}),(0,a.jsx)(ec,{type:"taginput",name:"tagsField",label:"Marketing Officers",control:c,register:s,error:o.tagsField}),(0,a.jsx)(ec,{className:"flex-1",label:"Travel Date",type:"date",name:"travelDate",register:s,error:o.travelDate}),(0,a.jsx)(ec,{label:"Travelling",type:"text",name:"travelling",register:s,error:o.travelling}),(0,a.jsx)(ec,{label:"Fuel Fees",type:"number",name:"fuelFee",register:s,error:o.fuelFee}),(0,a.jsx)(ec,{label:"Repairs",type:"taginput",name:"repairs",control:c,register:s,error:o.repairs}),(0,a.jsx)(ec,{label:"Litigation Expenses",type:"number",name:"litigationExp",register:s,error:o.litigationExp}),(0,a.jsx)(ec,{label:"Total Fees",type:"number",name:"totalFunds",register:s,error:o.totalFunds,disabled:!0}),(0,a.jsx)(ec,{label:"Kilometers",type:"text",name:"travelKm",register:s,error:o.travelKm}),(0,a.jsx)("div",{className:"col-span-2",children:(0,a.jsx)(ec,{label:"Remarks",type:"textarea",name:"fundRemarks",register:s,error:o.fundRemarks})})]}),(0,a.jsx)("div",{className:"flex flex-row justify-end gap-2 ",children:(0,a.jsx)(x.A,{label:"Add Travel Funds",size:"sm",icon:(0,a.jsx)(eu.A,{}),type:"button",variant:"success",onClick:N})})]}),(0,a.jsxs)("section",{className:"addded-section",children:[(0,a.jsx)("div",{className:"header py-1",children:(0,a.jsx)("h4",{className:"font-semibold text-[#333333]",children:"Added Travel Fund"})}),(0,a.jsxs)("table",{className:"added-list w-full border border-gray-300",children:[(0,a.jsx)("thead",{className:"bg-green-800 text-white",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-2 font-semibold text-center",children:"Date"}),(0,a.jsx)("th",{className:"p-2 font-semibold text-center",children:"Travelling"}),(0,a.jsx)("th",{className:"p-2 font-semibold text-center",children:"Fuel"}),(0,a.jsx)("th",{className:"p-2 font-semibold text-center",children:"Repairs"}),(0,a.jsx)("th",{className:"p-2 font-semibold text-center",children:"Litigation"}),(0,a.jsx)("th",{className:"p-2 font-semibold text-center",children:"Total"}),(0,a.jsx)("th",{className:"p-2 font-semibold text-center",children:"Km"}),(0,a.jsx)("th",{className:"p-2 font-semibold text-center",children:"Remarks"})]})}),(0,a.jsx)("tbody",{children:0===b.length?(0,a.jsx)("tr",{className:"bg-gray-100",children:(0,a.jsx)("td",{colSpan:8,className:"text-center p-2",children:"No records added yet."})}):b.map((e,r)=>{var l,d,t,s;return(0,a.jsxs)("tr",{className:"bg-gray-100",children:[(0,a.jsx)("td",{className:"p-2 text-center",children:e.travelDate?new Date(e.travelDate).toLocaleDateString():"-"}),(0,a.jsx)("td",{className:"p-2 text-center",children:null!=(l=e.travelling)?l:"-"}),(0,a.jsx)("td",{className:"p-2 text-center",children:"number"==typeof e.fuelFee?_(e.fuelFee):"-"}),(0,a.jsx)("td",{className:"p-2 text-center",children:Array.isArray(e.repairs)?e.repairs.join(", "):null!=(d=e.repairs)?d:"-"}),(0,a.jsx)("td",{className:"p-2 text-center",children:"number"==typeof e.litigationExp?_(e.litigationExp):"-"}),(0,a.jsx)("td",{className:"p-2 text-center",children:"number"==typeof e.totalFunds?_(e.totalFunds):"-"}),(0,a.jsx)("td",{className:"p-2 text-center",children:null!=(t=e.travelKm)?t:"-"}),(0,a.jsx)("td",{className:"p-2 text-center",children:null!=(s=e.fundRemarks)?s:"-"})]},r)})}),(0,a.jsx)("tfoot",{children:(0,a.jsxs)("tr",{className:"bg-gray-50 font-semibold",children:[(0,a.jsx)("td",{className:"p-2 text-right",children:"Total"}),(0,a.jsx)("td",{className:"p-2"}),(0,a.jsx)("td",{className:"p-2",children:_(I.fuel)}),(0,a.jsx)("td",{className:"p-2"}),(0,a.jsx)("td",{className:"p-2"}),(0,a.jsx)("td",{className:"p-2",children:_(I.total)}),(0,a.jsx)("td",{className:"p-2"}),(0,a.jsx)("td",{className:"p-2"})]})})]})]})]})},em=e=>{let{onChange:r,onDataChange:l,resetSignal:t}=e,{register:s,handleSubmit:n,formState:{errors:o},reset:i,setValue:c,watch:h}=(0,u.mN)({resolver:(0,m.u)(p.JJ),defaultValues:{}}),[v,b]=d.useState([]),y=e=>{var r,l;return{startDate:e.startDate?new Date(e.startDate).toISOString().slice(0,10):null,endDate:e.endDate?new Date(e.endDate).toISOString().slice(0,10):null,funDate:e.funDate?new Date(e.funDate).toISOString().slice(0,10):null,payee:null!=(r=e.payee)?r:null,fundRemarks:null!=(l=e.fundRemarks)?l:null,fundAmount:"number"==typeof e.fundAmount?e.fundAmount:null,miscExp:"number"==typeof e.miscExp?e.miscExp:null,powerLight:"number"==typeof e.powerLight?e.powerLight:null,telephone:"number"==typeof e.telephone?e.telephone:null,dueToMh:"number"==typeof e.dueToMh?e.dueToMh:null}},g=d.useCallback(e=>{b(r=>[...r,e]),i({funDate:void 0,payee:"",fundAmount:void 0,miscExp:void 0,powerLight:void 0,telephone:void 0,dueToMh:void 0,fundRemarks:"",startDate:void 0,endDate:void 0})},[i]),j=e=>{console.log("Validation errors:",e)},f=d.useCallback(()=>{n(g,j)()},[n,g]),N=d.useMemo(()=>v.reduce((e,r)=>{var l,a,d,t,s;return e.fundTotal+=Number(null!=(l=r.fundAmount)?l:0),e.miscTotal+=Number(null!=(a=r.miscExp)?a:0),e.powerTotal+=Number(null!=(d=r.powerLight)?d:0),e.teleTotal+=Number(null!=(t=r.telephone)?t:0),e.dueTotal+=Number(null!=(s=r.dueToMh)?s:0),e},{fundTotal:0,miscTotal:0,powerTotal:0,teleTotal:0,dueTotal:0}),[v]),I=e=>e.toFixed(2),_=N.miscTotal+N.powerTotal+N.teleTotal+N.dueTotal;d.useEffect(()=>{r(_)},[_,r]),d.useEffect(()=>{l&&l(v.map(y))},[v,l]);let k=h("miscExp"),A=h("powerLight"),B=h("telephone"),T=h("dueToMh");return d.useEffect(()=>{c("fundAmount",Number(k||0)+Number(A||0)+Number(B||0)+Number(T||0))},[k,A,B,T,c]),d.useEffect(()=>{b([])},[t]),(0,a.jsxs)("div",{className:"main-body flex flex-col gap-6 bg-white px-8 py-6 rounded-md",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-y-3 gap-x-6",children:[(0,a.jsx)("div",{className:"py-2 col-span-2",children:(0,a.jsx)("h6",{className:"font-medium text-gray-500",children:"Period Covered"})}),(0,a.jsx)(ec,{label:"Enter start date",type:"date",name:"startDate",register:s,error:o.startDate}),(0,a.jsx)(ec,{label:"Enter end date",type:"date",name:"endDate",register:s,error:o.endDate}),(0,a.jsx)("div",{className:"py-2 col-span-2",children:(0,a.jsx)("h6",{className:"font-medium text-gray-500",children:"Fund Details"})}),(0,a.jsx)(ec,{className:"flex-1",label:"Cash Date",type:"date",name:"funDate",register:s,error:o.funDate}),(0,a.jsx)(ec,{label:"Payee",type:"text",name:"payee",register:s,error:o.payee}),(0,a.jsx)("div",{className:"col-span-2",children:(0,a.jsx)(ec,{label:"Remarks",type:"textarea",name:"fundRemarks",register:s,error:o.fundRemarks})}),(0,a.jsx)(ec,{label:"Fund Amount",type:"number",name:"fundAmount",register:s,error:o.fundAmount,disabled:!0}),(0,a.jsx)(ec,{label:"Misc Expenses",type:"number",name:"miscExp",register:s,error:o.miscExp}),(0,a.jsx)(ec,{label:"Power, Light, & Water",type:"number",name:"powerLight",register:s,error:o.powerLight}),(0,a.jsx)(ec,{label:"Telephone Post. & Tel.",type:"number",name:"telephone",register:s,error:o.telephone}),(0,a.jsx)(ec,{label:"Due to MH",type:"number",name:"dueToMh",register:s,error:o.dueToMh})]}),(0,a.jsx)("div",{className:"flex flex-row justify-end gap-2 ",children:(0,a.jsx)(x.A,{label:"Add Travel Funds",size:"sm",icon:(0,a.jsx)(eu.A,{}),type:"button",variant:"success",onClick:f})})]}),(0,a.jsxs)("section",{className:"addded-section",children:[(0,a.jsx)("div",{className:"header py-1",children:(0,a.jsx)("h4",{className:"font-semibold text-[#333333]",children:"Added Travel Fund"})}),(0,a.jsxs)("table",{className:"added-list w-full border border-gray-300",children:[(0,a.jsx)("thead",{className:"bg-green-800 text-white",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-2 font-semibold text-center",children:"Date"}),(0,a.jsx)("th",{className:"p-2 font-semibold text-center",children:"Payee"}),(0,a.jsx)("th",{className:"p-2 font-semibold text-center",children:"Remarks"}),(0,a.jsx)("th",{className:"p-2 font-semibold text-center",children:"Amount"}),(0,a.jsx)("th",{className:"p-2 font-semibold text-center",children:"Misc. Exp."}),(0,a.jsx)("th",{className:"p-2 font-semibold text-center",children:"Power, Light, & Water"}),(0,a.jsx)("th",{className:"p-2 font-semibold text-center",children:"Telephone POST. & TEL."}),(0,a.jsx)("th",{className:"p-2 font-semibold text-center",children:"Due to MH"})]})}),(0,a.jsx)("tbody",{children:0===v.length?(0,a.jsx)("tr",{className:"bg-gray-100",children:(0,a.jsx)("td",{colSpan:8,className:"text-center p-2",children:"No records added yet."})}):v.map((e,r)=>{var l,d;return(0,a.jsxs)("tr",{className:"bg-gray-100",children:[(0,a.jsx)("td",{className:"p-2 text-center",children:e.funDate?new Date(e.funDate).toLocaleDateString():"-"}),(0,a.jsx)("td",{className:"p-2 text-center",children:null!=(l=e.payee)?l:"-"}),(0,a.jsx)("td",{className:"p-2 text-center",children:null!=(d=e.fundRemarks)?d:"-"}),(0,a.jsx)("td",{className:"p-2 text-center",children:"number"==typeof e.fundAmount?I(e.fundAmount):"-"}),(0,a.jsx)("td",{className:"p-2 text-center",children:"number"==typeof e.miscExp?I(e.miscExp):"-"}),(0,a.jsx)("td",{className:"p-2 text-center",children:"number"==typeof e.powerLight?I(e.powerLight):"-"}),(0,a.jsx)("td",{className:"p-2 text-center",children:"number"==typeof e.telephone?I(e.telephone):"-"}),(0,a.jsx)("td",{className:"p-2 text-center",children:"number"==typeof e.dueToMh?I(e.dueToMh):"-"})]},r)})}),(0,a.jsx)("tfoot",{children:(0,a.jsxs)("tr",{className:"bg-gray-50 font-semibold",children:[(0,a.jsx)("td",{className:"p-2 text-right",children:"Total"}),(0,a.jsx)("td",{className:"p-2"}),(0,a.jsx)("td",{className:"p-2"}),(0,a.jsx)("td",{className:"p-2",children:I(N.fundTotal)}),(0,a.jsx)("td",{className:"p-2",children:I(N.miscTotal)}),(0,a.jsx)("td",{className:"p-2",children:I(N.powerTotal)}),(0,a.jsx)("td",{className:"p-2",children:I(N.teleTotal)}),(0,a.jsx)("td",{className:"p-2",children:I(N.dueTotal)})]})})]})]})]})};var ex=l(31886);async function eh(e){let{data:r}=await ex.A.post("/request/add-count-sheet",e,{withCredentials:!0});return r}var ev=l(50228),eb=l(74588);let ey=e=>e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),eg=e=>{let{onClose:r,data:l,items:d,checkedTotal:t,fundsAmount:s,grandTotal:n,approvers:o}=e,i=(Number(l.fundAmount)||0)-n;return(0,a.jsxs)("div",{className:"space-y-4 relative min-h-[320px] max-h-[70vh] overflow-auto",children:[(0,a.jsxs)("header",{className:"text-center",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"EMB CAPITAL LENDING CORPORATION"}),(0,a.jsx)("h6",{children:"Cash Count Sheet"})]}),(0,a.jsxs)("section",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Office:"})," ",l.office]}),(0,a.jsxs)("div",{children:["  ",(0,a.jsx)("span",{className:"font-medium",children:"Date Counted:"})," ",l.dateCounted?new Date(l.dateCounted).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"2-digit"}):""]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Reference:"})," ",l.reference]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Name of Fund:"})," ",l.nameFund]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Fund Amount:"})," ",ey(Number(l.fundAmount)||0)]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Cash-Short (Over):"})," ",ey(i)]})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h6",{className:"font-semibold mb-2",children:"Fund Counted as Follows"}),(0,a.jsxs)("table",{className:"w-full text-sm border border-gray-300",children:[(0,a.jsx)("thead",{className:"bg-gray-100",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left p-2",children:"Denomination"}),(0,a.jsx)("th",{className:"text-center p-2",children:"Pieces"}),(0,a.jsx)("th",{className:"text-right p-2",children:"Amount"}),(0,a.jsx)("th",{className:"text-center p-2",children:"Checked"})]})}),(0,a.jsx)("tbody",{children:d.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"p-2",children:ey(e.denom)}),(0,a.jsx)("td",{className:"p-2 text-center",children:e.pieces}),(0,a.jsx)("td",{className:"p-2 text-right",children:ey(e.amount)}),(0,a.jsx)("td",{className:"p-2 text-center",children:e.checked?"✓":""})]},e.denom))}),(0,a.jsx)("tfoot",{children:(0,a.jsxs)("tr",{className:"bg-gray-50 font-semibold",children:[(0,a.jsx)("td",{className:"p-2",children:"Totals"}),(0,a.jsx)("td",{className:"p-2"}),(0,a.jsx)("td",{className:"p-2 text-right",children:ey(t)}),(0,a.jsx)("td",{className:"p-2"})]})})]})]}),(0,a.jsxs)("section",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Replenishment Amount:"})," ",ey(s)]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Grand Total (Replenishment + Checked):"})," ",ey(n)]})]}),(0,a.jsx)(g.A,{approverList:o}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(x.A,{label:"Cancel",size:"sm",icon:(0,a.jsx)(eb.A,{}),type:"button",variant:"secondary",onClick:r})})]})},ej=[1e3,500,200,100,50,20,10,5,1,.25];function ef(e){var r,l;let{requestTypeId:t,requestType:s}=e,n=(0,u.mN)({resolver:(0,m.u)(p.jJ),defaultValues:{requestTypeId:t,approvers:{checkedById:void 0,checkedBy2Id:void 0,checkedBy3Id:void 0,checkedBy4Id:void 0,recomApprovalId:void 0,recomApproval2Id:void 0,approveById:void 0,approveBy2Id:void 0}}}),{control:o,register:c,handleSubmit:v,formState:{errors:b},setValue:y,getValues:g}=n,{data:j}=(0,i.XU)(),_=(null!=j?j:[]).filter(e=>e.approver).map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.name)?l:""}}),{data:A=[]}=(0,i.In)(),B=A.map(e=>({value:e.id,label:e.branchName||e.companyName})),[T,w]=(0,d.useState)(1e9),[C,D]=(0,d.useState)(ej.map(e=>({denom:e,pieces:0,checked:!1}))),[S,q]=(0,d.useState)(null),[E,R]=(0,d.useState)(null),[P,F]=(0,d.useState)(null),[Y,O]=(0,d.useState)(!1),[M,L]=d.useState([]),[V,z]=d.useState([]),[U,H]=(0,d.useState)(0),[X,G]=(0,d.useState)(null),{data:K}=(0,f.rA)(),Q=e=>e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});(0,d.useEffect)(()=>{C.forEach((e,r)=>{y("pieces.".concat(r),e.pieces,{shouldValidate:!1,shouldDirty:!0}),y("amounts.".concat(r),e.pieces*e.denom,{shouldValidate:!1,shouldDirty:!0}),y("denoms.".concat(r),e.denom,{shouldValidate:!1,shouldDirty:!0}),y("checked.".concat(r),e.checked,{shouldValidate:!1,shouldDirty:!0})})},[C,y]);let J=(0,d.useMemo)(()=>C.reduce((e,r)=>r.checked?e+(Number(r.pieces)||0)*(Number(r.denom)||0):e,0),[C]),W=(0,d.useMemo)(()=>(Number(T)||0)+(Number(J)||0),[T,J]);(0,d.useEffect)(()=>{y("fundPerCount",W,{shouldValidate:!1})},[W,y]);let{reset:$}=n;(0,d.useEffect)(()=>{if(s){var e,r,l,a,d,n,o,i;$({requestTypeId:t,approvers:{checkedById:null!=(e=s.checkedById)?e:void 0,checkedBy2Id:null!=(r=s.checkedBy2Id)?r:void 0,checkedBy3Id:null!=(l=s.checkedBy3Id)?l:void 0,checkedBy4Id:null!=(a=s.checkedBy4Id)?a:void 0,recomApprovalId:null!=(d=s.recomApprovalId)?d:void 0,recomApproval2Id:null!=(n=s.recomApproval2Id)?n:void 0,approveById:null!=(o=s.approveById)?o:void 0,approveBy2Id:null!=(i=s.approveBy2Id)?i:void 0}})}},[s,$,t]);let Z=()=>O(!1);return(0,a.jsx)(u.Op,{...n,children:(0,a.jsx)("form",{onSubmit:v(e=>{var r,l,a,d,n,o,i,c,u,p,m,x,h,v,b,y,g;let j=[],f=null==K||null==(r=K.branch)?void 0:r.coordinatorId;e.approvers&&(j=[{id:null!=(p=null==(l=e.approvers)?void 0:l.checkedById)?p:null,roleType:"checkedById"},{id:null!=(m=null==(a=e.approvers)?void 0:a.checkedBy2Id)?m:null,roleType:"checkedBy2Id"},{id:null!=(x=null==(d=e.approvers)?void 0:d.checkedBy3Id)?x:null,roleType:"checkedBy3Id"},{id:null!=(h=null==(n=e.approvers)?void 0:n.checkedBy4Id)?h:null,roleType:"checkedBy4Id"},{id:null!=(v=null==(o=e.approvers)?void 0:o.recomApprovalId)?v:null,roleType:"recomApprovalId"},{id:null!=(b=null==(i=e.approvers)?void 0:i.recomApproval2Id)?b:null,roleType:"recomApproval2Id"},{id:null!=(y=null==(c=e.approvers)?void 0:c.approveById)?y:null,roleType:"approveById"},{id:null!=(g=null==(u=e.approvers)?void 0:u.approveBy2Id)?g:null,roleType:"approveBy2Id"}].filter(e=>null!==e.id).map(e=>{if(["checkedById","checkedBy2Id","checkedBy3Id","checkedBy4Id"].includes(e.roleType)){if(2===e.id)return{...e,id:null!=f?f:null};else if(4===e.id&&(null==K?void 0:K.branchId))return{...e,id:I(A,null==K?void 0:K.branchId)}}if(["recomApprovalId","recomApproval2Id"].includes(e.roleType)&&3===e.id&&(null==K?void 0:K.branch)){var r;return{...e,id:N(null==K||null==(r=K.branch)?void 0:r.branchName)}}return e}));let _=e.denoms.map((r,l)=>{var a,d;return{denom:r,pieces:e.pieces[l],amount:e.amounts[l],checked:null!=(d=null==(a=e.checked)?void 0:a[l])&&d}}).filter(e=>e.checked),k=(null==s?void 0:s.requestName)==="FUND REPLENISHMENT"?"Cash":(null==s?void 0:s.requestName)==="TRAVEL REPLENISHMENT"?"Travel":"Cash",B=Number(e.fundAmount),C=Number(W),S=Number.isFinite(B)?B:0,q=Number.isFinite(C)?C:0,E=Math.round(100*(S-q))/100,R={fundType:k,repFund:T,totalFund:q,requestTypeId:t,branchId:Number(e.branch),office:e.office,dateCounted:e.dateCounted?new Date(e.dateCounted).toISOString().slice(0,19).replace("T"," "):void 0,nameFund:e.nameFund,fundAmount:S,reference:e.reference,cashDemo:_,..."Travel"===k?{travelRows:M}:{},..."Cash"===k?{cashRows:V}:{},fundPerCount:e.fundPerCount,cashShort:E};eh({...R,approvers:j}).then(()=>{$(),D(ej.map(e=>({denom:e,pieces:0,checked:!1}))),L([]),z([]),w(0),H(e=>e+1),G(X),ev.A.successAlert("Submit Fund","Fund Submitted Successfully")})},e=>{console.log("Validation errors:",e)}),className:"w-[min(90rem,100%)] mx-auto my-4 ",children:(0,a.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,a.jsxs)("div",{className:"bg-white px-8 py-6 rounded-md flex flex-col gap-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center text-center w-full py-2",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"EMB CAPITAL LENDING CORPORATION"}),(0,a.jsx)("h6",{children:"CASH COUNT SHEET"})]}),(0,a.jsxs)("div",{className:"flex flex-row w-full gap-6",children:[(0,a.jsx)(ec,{label:"Office",type:"text",name:"office",register:c,error:null==b?void 0:b.office,placeholder:"Please Enter Office"}),(0,a.jsx)(ec,{label:"Enter Company Branch",type:"select",register:c,name:"branch",error:null==b?void 0:b.branch,options:B})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-x-6",children:[(0,a.jsx)(ec,{label:"Name of Fund",type:"text",name:"nameFund",register:c,error:null==b?void 0:b.nameFund,placeholder:"Please Enter Fund Name"}),(0,a.jsx)(ec,{label:"Date Counted",type:"date",name:"dateCounted",register:c,error:null==b?void 0:b.dateCounted})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-x-6",children:[(0,a.jsx)(ec,{label:"Reference",type:"text",name:"reference",register:c,error:null==b?void 0:b.reference,placeholder:"Please Enter Reference"}),(0,a.jsx)(ec,{label:"Fund Amount",type:"number",name:"fundAmount",register:c,error:null==b?void 0:b.fundAmount,placeholder:"Please Enter Fund Amount"})]})]}),(0,a.jsx)("h6",{className:"font-semibold text-base px-2",children:"Fund Counted as Follows"}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsxs)("table",{className:"added-list w-full border border-gray-300",children:[(0,a.jsx)("thead",{className:"bg-green-800 text-white",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-2 font-semibold text-left",children:"Cash Denomination"}),(0,a.jsx)("th",{className:"p-2 font-semibold text-center",children:"No. of Pieces"}),(0,a.jsx)("th",{className:"p-2 font-semibold text-right",children:"Amount"}),(0,a.jsx)("th",{className:"p-2 font-semibold text-center",children:"Checked"})]})}),(0,a.jsx)("tbody",{children:C.map((e,r)=>(0,a.jsxs)("tr",{className:"bg-gray-100 font-medium text-[1rem]",children:[(0,a.jsx)("td",{className:"py-[0.5rem] px-2 text-left",children:Q(e.denom)}),(0,a.jsxs)("td",{className:"py-[0.5rem] px-2 text-center",onDoubleClick:()=>q(r),children:[S===r?(0,a.jsx)("input",{type:"number",autoFocus:!0,min:0,className:"w-24 border rounded px-2 py-1 text-center outline-none",value:e.pieces,onChange:e=>{var l;return l=Number(e.target.value),void D(e=>e.map((e,a)=>a===r?{...e,pieces:Math.max(0,Number(l)||0)}:e))},onBlur:()=>q(null),onKeyDown:e=>{("Enter"===e.key||"Escape"===e.key)&&q(null)}}):(0,a.jsx)("span",{className:"cursor-text select-none",children:e.pieces}),(0,a.jsx)("input",{type:"hidden",...c("pieces.".concat(r)),value:e.pieces,readOnly:!0}),(0,a.jsx)("input",{type:"hidden",...c("denoms.".concat(r)),value:e.denom,readOnly:!0})]}),(0,a.jsxs)("td",{className:"py-[0.5rem] px-2 text-right",children:[e.pieces?Q(e.pieces*e.denom):"-",(0,a.jsx)("input",{type:"hidden",...c("amounts.".concat(r)),value:e.pieces*e.denom,readOnly:!0})]}),(0,a.jsxs)("td",{className:"py-[0.5rem] px-2 text-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:e.checked,onChange:e=>{var l;return l=e.target.checked,void D(e=>e.map((e,a)=>a===r?{...e,checked:l}:e))}}),(0,a.jsx)("input",{type:"hidden",...c("checked.".concat(r)),value:e.checked?"true":"false",readOnly:!0})]})]},e.denom))}),(0,a.jsx)("tfoot",{children:(0,a.jsxs)("tr",{className:"bg-gray-50 font-semibold",children:[(0,a.jsx)("td",{className:"py-4 text-left px-6 font-normal",children:"Total"}),(0,a.jsx)("td",{className:"p-2"}),(0,a.jsx)("td",{className:"p-2 text-right",children:Q(J)}),(0,a.jsx)("td",{className:"p-2"})]})})]})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(null==s?void 0:s.requestName)=="TRAVEL REPLENISHMENT"&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h6",{className:"font-semibold text-base px-2",children:"Traveling Fund Replenishment"}),(0,a.jsx)(ep,{amount:T,onChange:w,onDataChange:L,office:n.getValues("office"),branch:(null==(r=B.find(e=>String(e.value)===String(n.getValues("branch"))))?void 0:r.label)||"",resetSignal:U})]}),(null==s?void 0:s.requestName)=="FUND REPLENISHMENT"&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h6",{className:"font-semibold text-base px-2",children:"Cash Fund Replenishment"}),(0,a.jsx)(em,{amount:T,onChange:w,onDataChange:z,office:n.getValues("office"),branch:(null==(l=B.find(e=>String(e.value)===String(n.getValues("branch"))))?void 0:l.label)||"",resetSignal:U})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 ",children:[(0,a.jsx)("h6",{className:"font-semibold text-base px-2",children:"Total Computation"}),(0,a.jsxs)("div",{className:"flex gap-x-2 justify-between bg-white px-8 py-6 rounded-md",children:[(0,a.jsx)(ec,{label:"Total Fund Per Account",type:"number",name:"fundPerCount",register:c,error:null==b?void 0:b.fundPerCount,placeholder:"0.00"}),(0,a.jsx)(ec,{label:"Cash-Short (Over)",type:"number",name:"cashShort",register:c,error:null==b?void 0:b.cashShort,placeholder:"0.00"})]})]}),(0,a.jsx)("div",{className:"flex w-full gap-6 mt-2 w-ful bg-white p-6",children:(0,a.jsx)(k,{setValue:y,getValues:g,control:o,approverData:_})}),(0,a.jsxs)("div",{className:"flex justify-end gap-6 mt-2 w-ful bg-white p-6",children:[(0,a.jsx)(x.A,{label:"Preview Cash Funding Sheets",size:"sm",icon:(0,a.jsx)(en,{}),type:"button",onClick:()=>{let e=n.getValues(),r=e.denoms.map((r,l)=>{var a,d;return{denom:r,pieces:e.pieces[l],amount:e.amounts[l],checked:null!=(d=null==(a=e.checked)?void 0:a[l])&&d}}).filter(e=>e.checked);G(e.approvers),R(e),F(r),O(!0)},variant:"secondary"}),(0,a.jsx)(x.A,{label:"Submit Cash Count Sheet",size:"sm",icon:(0,a.jsx)(eo.A,{}),type:"submit"})]}),Y&&E&&P&&(0,a.jsx)(h.A,{size:"lg",nested:!0,title:"Cash Count Sheet",onClose:Z,children:(0,a.jsx)(eg,{onClose:Z,data:E,items:P,checkedTotal:J,fundsAmount:T,grandTotal:W,requestType:s,approvers:X})})]})})})}let eN=(0,s.A)((0,a.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Create"),eI=(0,s.A)((0,a.jsx)("path",{d:"M19 13H5v-2h14z"}),"Remove"),e_=(0,s.A)((0,a.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.89-2-2-2m0 16H5V7h14zm-7-8.5c1.84 0 3.48.96 4.34 2.5-.86 1.54-2.5 2.5-4.34 2.5s-3.48-.96-4.34-2.5c.86-1.54 2.5-2.5 4.34-2.5M12 9c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 5.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"PreviewOutlined"),ek=(0,s.A)((0,a.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),eA=[{value:"Indexing",label:"Indexing for ID"},{value:"Date",label:"Date"},{value:"Text",label:"Text Input"},{value:"Number",label:"Number / Digits"},{value:"Qty",label:"Qty Per Unit"},{value:"Cost",label:"Total Cost for Qty"},{value:"Sum",label:"Sum"}],eB=e=>{let{onClose:r,onConfirm:l,initialHeaders:t=[]}=e,{register:s,handleSubmit:n,formState:{errors:o},reset:i}=(0,u.mN)({resolver:(0,m.u)(p.Pt),defaultValues:{}}),[c,h]=(0,d.useState)(t);return(0,a.jsxs)("form",{onSubmit:n(e=>{h(r=>[...r,e]),i()}),className:"flex flex-col gap-3",children:[(0,a.jsx)("ul",{className:"flex flex-col gap-3 px-4",children:(0,a.jsxs)("li",{className:"flex justify-between gap-4",children:[(0,a.jsx)(ec,{label:"Table Header",type:"text",name:"tableHeader",register:s,error:null==o?void 0:o.tableHeader,placeholder:"Enter table header..."}),(0,a.jsx)(ec,{label:"Table Column Action",type:"select",name:"tableColAction",register:s,error:null==o?void 0:o.tableColAction,options:eA}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsx)(x.A,{label:"Add Header",variant:"info",size:"md",icon:(0,a.jsx)(eu.A,{}),type:"submit"})})]})}),(0,a.jsx)("div",{className:"px-4",children:c.length>0&&(0,a.jsx)("ul",{className:"list-disc pl-6 space-y-1",children:c.map((e,r)=>(0,a.jsxs)("li",{className:"flex items-center justify-between gap-2",children:[(0,a.jsxs)("span",{children:[e.tableHeader," (",e.tableColAction,")"]}),(0,a.jsx)("button",{type:"button",onClick:()=>h(e=>e.filter((e,l)=>l!==r)),className:"text-red-500 hover:text-red-700 text-sm",children:"✕"})]},r))})}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 p-4",children:[(0,a.jsx)(x.A,{label:"Cancel",onClick:r,size:"md",icon:(0,a.jsx)(eb.A,{}),variant:"secondary"}),(0,a.jsx)(x.A,{label:"Confirm Config",onClick:()=>{l&&l(c)},size:"md",icon:(0,a.jsx)(ek,{})})]})]})},eT=(0,s.A)((0,a.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");var ew=l(26715),eC=l(5041);async function eD(e){let r=e instanceof FormData,{data:l}=await ex.A.post("/request/add-as-stated",e,{withCredentials:!0,headers:r?{"Content-Type":"multipart/form-data"}:{"Content-Type":"application/json"}});return l}var eS=l(66766);let eq=e=>{var r,l;let{onClose:t,table:s,images:n,requestTypeId:o,resetForm:c,approversArray:p,approvers:m}=e,{watch:h}=(0,u.xW)(),{statedTo:v,statedFrom:b,statedDate:y,statedSubject:j,statedDetails:N}=h(),I=(0,d.useMemo)(()=>{var e,r;return(null==s||null==(e=s.headers)?void 0:e.length)&&(null==s||null==(r=s.rows)?void 0:r.length)?s.headers.map(e=>{switch(e.tableColAction){case"Sum":return s.rows.map(r=>{var l;return Number(null!=(l=r[e.tableHeader])?l:0)}).reduce((e,r)=>e+(Number.isFinite(r)?r:0),0).toFixed(2);case"Average":return(s.rows.map(r=>{var l;return Number(null!=(l=r[e.tableHeader])?l:0)}).reduce((e,r)=>e+(Number.isFinite(r)?r:0),0)/s.rows.length).toFixed(2);case"Cost":{var r;let l=null==(r=s.headers.find(e=>"Qty"===e.tableColAction))?void 0:r.tableHeader;if(!l)return"—";return s.rows.reduce((r,a)=>{var d,t;return r+Number(null!=(d=a[l])?d:0)*Number(null!=(t=a[e.tableHeader])?t:0)},0).toFixed(2)}default:return""}}):[]},[s]),{data:_}=(0,f.rA)(),{data:k}=(0,i.XU)(),A=null!=(l=(null!=k?k:[]).filter(e=>e.approver).map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.name)?l:""}}))?l:[],{data:B=[]}=(0,i.In)(),T=B.map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.branchName)?l:""}}),w=(e,r)=>{if(!e)return"";let l=r.find(r=>r.id===e);return l?l.name:""},C=e=>{if(!e)return"—";let r=e instanceof Date?e:new Date(String(e));return Number.isNaN(r.getTime())?"—":r.toLocaleDateString()},D=function(){let e=(0,ew.jE)();return(0,eC.n)({mutationFn:e=>eD(e),onSuccess:r=>{console.log("Fund created successfully:",r),e.invalidateQueries({queryKey:["approvals"]})},onError:e=>{console.error("Error creating fund:",e)}})}();return(0,a.jsxs)("div",{className:"flex flex-col gap-6 relative min-h-[320px] max-h-[70vh] overflow-auto",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1 w-full justify-center items-center text-center",children:[(0,a.jsx)("h1",{className:"text-xl font-bold",children:"EMB CAPITAL LENDING CORPORATION"}),(0,a.jsx)("h3",{className:"text-lg font-semibold",children:null==_?void 0:_.branchName}),(0,a.jsx)("p",{className:"text-lg",children:"454-1192"})]}),(0,a.jsxs)("div",{className:"border-t border-b border-gray-300 py-4 grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 px-4",children:[(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("h3",{className:"text-md font-semibold w-24",children:"TO :"}),(0,a.jsx)("p",{className:"text-sm",children:w(v,A)||(0,a.jsx)("span",{className:"text-gray-400",children:"—"})})]}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("h3",{className:"text-md font-semibold w-24",children:"FROM :"}),(0,a.jsx)("p",{className:"text-sm",children:w(b,T)||(0,a.jsx)("span",{className:"text-gray-400",children:"—"})})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 px-4",children:[(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("h3",{className:"text-md font-semibold w-24",children:"DATE :"}),(0,a.jsx)("p",{className:"text-sm",children:C(y)})]}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("h3",{className:"text-md font-semibold w-24",children:"SUBJECT :"}),(0,a.jsx)("p",{className:"text-sm",children:j||(0,a.jsx)("span",{className:"text-gray-400",children:"—"})})]})]})]}),(0,a.jsxs)("div",{className:"px-4",children:[(0,a.jsx)("h1",{className:"text-md font-semibold text-gray-600 mb-2",children:"Good Day!"}),(0,a.jsx)("p",{className:"whitespace-pre-wrap",children:N||(0,a.jsx)("span",{className:"text-gray-400",children:"No details provided."})})]}),!!(null==s||null==(r=s.headers)?void 0:r.length)&&(0,a.jsx)("div",{className:"px-4",children:(0,a.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:s.headers.map((e,r)=>(0,a.jsx)("th",{className:"border border-gray-300 px-2 py-1",children:e.tableHeader},r))})}),(0,a.jsx)("tbody",{children:s.rows.map((e,r)=>(0,a.jsx)("tr",{children:s.headers.map((l,d)=>{let t="Indexing"===l.tableColAction,s="Date"===l.tableColAction,n=e[l.tableHeader],o=null;return t?o=r+1:s&&n?o=C(n):null!=n&&(o=String(n)),(0,a.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:null!=o?o:""},d)})},r))}),(0,a.jsx)("tfoot",{children:(0,a.jsx)("tr",{children:I.map((e,r)=>(0,a.jsx)("td",{className:"border border-gray-300 px-2 py-1 font-semibold text-right",children:e},r))})})]})}),(0,a.jsxs)("div",{className:"px-4",children:[(0,a.jsx)("h1",{className:"text-md font-semibold text-gray-600",children:"Your prompt approval with regards to this request will be appreciated."}),(0,a.jsx)("h1",{className:"text-md font-semibold text-gray-600",children:"Thank you and God Bless."})]}),!!(null==n?void 0:n.length)&&(0,a.jsxs)("div",{className:"px-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Attached image(s):"}),(0,a.jsx)("div",{className:"flex flex-wrap -mx-2",children:n.map((e,r)=>(0,a.jsx)("div",{className:"w-1/3 px-2 mb-4",children:(0,a.jsx)(eS.default,{src:"string"==typeof e?e:URL.createObjectURL(e),alt:"preview-".concat(r),width:300,height:160,className:"w-full h-40 object-cover rounded border"})},r))})]}),(0,a.jsx)(g.A,{approverList:m}),(0,a.jsxs)("div",{className:"flex justify-end",children:[(0,a.jsx)(x.A,{label:"Submit",onClick:()=>{var e;let r=(null==s?void 0:s.headers)&&["denom","amount","pieces","checked"].every(e=>s.headers.some(r=>r.tableHeader.toLowerCase()===e)),l=s?r?s.rows.map(e=>{var r,l,a,d;return{denom:Number(null!=(r=e.denom)?r:0),amount:Number(null!=(l=e.amount)?l:0),pieces:Number(null!=(a=e.pieces)?a:0),checked:!!(null!=(d=e.checked)&&d)}}):s.rows:null,a=new FormData;if(null==p?void 0:p.length){let e=p.map(e=>{var r;return{id:e.id?Number(e.id):null,roleType:null!=(r=e.roleType)?r:null}});a.append("approvers",JSON.stringify(e))}if(a.append("statedTo",String(null!=v?v:"")),a.append("statedFrom",String(null!=b?b:"")),y&&a.append("statedDate",new Date(y).toISOString()),a.append("statedSub",null!=j?j:""),a.append("statedDetails",null!=N?N:""),a.append("requestTypeId",String(o)),l&&(null==s||null==(e=s.headers)?void 0:e.length)){let e=s.headers.map(e=>e.tableHeader),r=l.map(r=>e.map(e=>{var l;return null!=(l=r[e])?l:""}));(null==I?void 0:I.length)&&r.push(e.map((e,r)=>{var l;return null!=(l=I[r])?l:""})),a.append("statedTable",JSON.stringify({headers:e,rows:r}))}(null==n?void 0:n.length)&&n.forEach(e=>{e instanceof File&&a.append("images",e)}),D.mutate(a,{onSuccess:()=>{ev.A.successAlert("Submit Fund","Fund Submitted Successfully"),null==c||c(),null==t||t()}})},size:"sm",icon:(0,a.jsx)(eT,{})}),(0,a.jsx)(x.A,{label:"Close",onClick:t,size:"sm",icon:(0,a.jsx)(eb.A,{}),variant:"secondary"})]})]})};function eE(e){var r,l,t,s,n,c;let{requestTypeId:v,requestType:b}=e,[y,g]=(0,d.useState)(!1),[j,_]=(0,d.useState)(!1),[A,B]=(0,d.useState)([]),[T,w]=(0,d.useState)([]),[C,D]=(0,d.useState)([]),[S,q]=(0,d.useState)([]),[E,R]=(0,d.useState)([]),[P,F]=(0,d.useState)(null),{data:Y}=(0,i.XU)(),{data:O=[]}=(0,i.In)(),{data:M}=(0,f.rA)(),L=(null!=Y?Y:[]).filter(e=>e.approver).map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.name)?l:""}}),V=O.map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.branchName)?l:""}}),z=(0,u.mN)({resolver:(0,m.u)(p.Zq),defaultValues:{statedDate:new Date,statedSubject:"",statedDetails:"",requestTypeId:v,approvers:{checkedById:void 0,checkedBy2Id:void 0,checkedBy3Id:void 0,checkedBy4Id:void 0,recomApprovalId:void 0,recomApproval2Id:void 0,approveById:void 0,approveBy2Id:void 0}}}),{control:U,register:H,formState:{errors:X},reset:G,getValues:K,setValue:Q}=z;(0,d.useEffect)(()=>{if(b){var e,r,l,a,d,t,s,n;G({requestTypeId:v,statedDate:void 0,statedDetails:"",statedSubject:"",approvers:{checkedById:null!=(e=b.checkedById)?e:void 0,checkedBy2Id:null!=(r=b.checkedBy2Id)?r:void 0,checkedBy3Id:null!=(l=b.checkedBy3Id)?l:void 0,checkedBy4Id:null!=(a=b.checkedBy4Id)?a:void 0,recomApprovalId:null!=(d=b.recomApprovalId)?d:void 0,recomApproval2Id:null!=(t=b.recomApproval2Id)?t:void 0,approveById:null!=(s=b.approveById)?s:void 0,approveBy2Id:null!=(n=b.approveBy2Id)?n:void 0}})}},[b,G,v]),(0,d.useEffect)(()=>{if(null==M?void 0:M.branch){var e;Q("statedFrom",null==M||null==(e=M.branch)?void 0:e.id)}},[null==M?void 0:M.branch,Q]);let J=async()=>{var e,r,l,a,d,t,s,n,o,i,c,u,p,m,x,h,v;if(!await z.trigger())return;let b=K(),y=null==M||null==(e=M.branch)?void 0:e.coordinatorId;F(b.approvers),b.approvers&&B([{id:null!=(i=null==(r=b.approvers)?void 0:r.checkedById)?i:null,roleType:"checkedById"},{id:null!=(c=null==(l=b.approvers)?void 0:l.checkedBy2Id)?c:null,roleType:"checkedBy2Id"},{id:null!=(u=null==(a=b.approvers)?void 0:a.checkedBy3Id)?u:null,roleType:"checkedBy3Id"},{id:null!=(p=null==(d=b.approvers)?void 0:d.checkedBy4Id)?p:null,roleType:"checkedBy4Id"},{id:null!=(m=null==(t=b.approvers)?void 0:t.recomApprovalId)?m:null,roleType:"recomApprovalId"},{id:null!=(x=null==(s=b.approvers)?void 0:s.recomApproval2Id)?x:null,roleType:"recomApproval2Id"},{id:null!=(h=null==(n=b.approvers)?void 0:n.approveById)?h:null,roleType:"approveById"},{id:null!=(v=null==(o=b.approvers)?void 0:o.approveBy2Id)?v:null,roleType:"approveBy2Id"}].filter(e=>null!==e.id).map(e=>{if(["checkedById","checkedBy2Id","checkedBy3Id","checkedBy4Id"].includes(e.roleType)){if(2===e.id)return{...e,id:null!=y?y:null};else if(4===e.id&&(null==M?void 0:M.branchId))return{...e,id:I(O,null==M?void 0:M.branchId)}}if(["recomApprovalId","recomApproval2Id"].includes(e.roleType)&&3===e.id&&(null==M?void 0:M.branch)){var r;return{...e,id:N(null==M||null==(r=M.branch)?void 0:r.branchName)}}return e})),_(!0)},W=()=>_(!1),$=()=>g(!1);return(0,d.useEffect)(()=>{T.length>0&&0===C.length&&D([Object.fromEntries(T.map(e=>[e.tableHeader,"Indexing"===e.tableColAction?1:""]))])},[T,C.length]),(0,d.useEffect)(()=>{let e=S.map(e=>URL.createObjectURL(e));return R(e),()=>e.forEach(e=>URL.revokeObjectURL(e))},[S]),(0,a.jsx)(u.Op,{...z,children:(0,a.jsxs)("div",{className:"flex flex-col gap-4 w-[min(90rem,100%)] mx-auto my-4 p-6 rounded-lg bg-white",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1 w-full justify-center items-center text-center",children:[(0,a.jsx)("h1",{className:"text-xl font-bold",children:null!=(s=null==M||null==(r=M.branch)?void 0:r.companyName)?s:"EMB CAPITAL LENDING CORPORATION"}),(0,a.jsx)("h3",{className:"text-lg font-semibold",children:null!=(n=null==M||null==(l=M.branch)?void 0:l.branchName)?n:"EMB BRANCH"}),(0,a.jsx)("p",{className:"text-lg",children:null!=(c=null==M||null==(t=M.branch)?void 0:t.telephone)?c:""})]}),(0,a.jsxs)("div",{className:"border-t border-b border-gray-400 py-4 flex w-full gap-2",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 px-4 w-full",children:[(0,a.jsxs)("div",{className:"flex gap-2 items-center py-1.5",children:[(0,a.jsx)("h3",{className:"text-md font-semibold w-24",children:"TO:"}),(0,a.jsx)(u.xI,{name:"statedTo",control:U,render:e=>{let{field:r,fieldState:l}=e;return(0,a.jsx)(o.A,{data:L,placeholder:"Select request to...",name:r.name,value:r.value,onChange:r.onChange,inputRef:r.ref,error:l.error})}})]}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("h3",{className:"text-md font-semibold w-24",children:"FROM:"}),(0,a.jsx)(u.xI,{name:"statedFrom",control:U,render:e=>{let{field:r,fieldState:l}=e;return(0,a.jsx)(o.A,{data:V,placeholder:"Select branch...",name:r.name,value:r.value,onChange:r.onChange,inputRef:r.ref,error:l.error})}})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 px-4 w-full",children:[(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("h3",{className:"text-md font-semibold w-24",children:"DATE:"}),(0,a.jsx)(ec,{type:"date",name:"statedDate",register:H,error:null==X?void 0:X.statedDate})]}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("h3",{className:"text-md font-semibold w-24",children:"SUBJECT:"}),(0,a.jsx)(ec,{type:"text",name:"statedSubject",register:H,error:null==X?void 0:X.statedSubject,placeholder:"Enter Stated Subject"})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 px-4",children:[(0,a.jsx)("h1",{className:"text-lg font-semibold text-gray-600",children:"Good Day!"}),(0,a.jsx)(ec,{type:"textarea",name:"statedDetails",register:H,error:null==X?void 0:X.statedDetails,placeholder:"Enter Request details or content..."})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 px-4",children:[(0,a.jsx)("div",{className:"flex justify-start gap-6 mt-2 w-full",children:(0,a.jsx)(x.A,{label:T.length>0?"Edit Table":"Create Table",onClick:()=>g(!0),size:"md",icon:(0,a.jsx)(eN,{})})}),(0,a.jsx)("div",{className:"border-t border-b border-gray-400 py-4 flex w-full gap-2 p-4",children:0===T.length?(0,a.jsx)("h5",{className:"text-md font-normal text-gray-400",children:"No data available yet."}):(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[T.map((e,r)=>(0,a.jsx)("th",{className:"border border-gray-300 px-2 py-1",children:e.tableHeader},r)),(0,a.jsx)("th",{className:"border border-gray-300 px-2 py-1",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:C.map((e,r)=>(0,a.jsxs)("tr",{children:[T.map((l,d)=>{var t;let s=["Sum","Average","Number","Qty"].includes(l.tableColAction),n="Indexing"===l.tableColAction,o="Date"===l.tableColAction;return(0,a.jsx)("td",{className:"border border-gray-300 px-2 py-1",children:n?(0,a.jsx)("span",{children:r+1}):(0,a.jsx)("input",{type:o?"date":s?"number":"text",step:s?"0.01":void 0,className:"w-full px-1 py-0.5 border rounded",value:null!=(t=e[l.tableHeader])?t:"",onChange:e=>{let a=s?parseFloat(e.target.value)||0:e.target.value;D(e=>e.map((e,d)=>d===r?{...e,[l.tableHeader]:a}:e)),r===C.length-1&&""!==a&&D(e=>[...e,Object.fromEntries(T.map(r=>[r.tableHeader,"Indexing"===r.tableColAction?e.length+1:""]))])}})},d)}),(0,a.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-center",children:(0,a.jsx)(x.A,{label:"Delete",onClick:()=>D(e=>e.filter((e,l)=>l!==r)),size:"sm",icon:(0,a.jsx)(eI,{}),variant:"danger"})})]},r))})]})})})]}),(0,a.jsx)("div",{className:"border-t border-b border-gray-400 py-4 flex w-full gap-2 mt-8",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4 px-4 w-full",children:[(0,a.jsx)("p",{className:"text-sm font-normal text-gray-600",children:"If it requires proof of purchase or images, upload file here:"}),(0,a.jsxs)("label",{className:"w-fit inline-flex items-center gap-2 px-3 py-2 border border-gray-500 rounded-md cursor-pointer hover:bg-gray-100",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:e=>{var r;let l=Array.from(null!=(r=e.target.files)?r:[]);if(0===l.length)return;let a=new Set(S.map(e=>"".concat(e.name,"-").concat(e.size))),d=l.filter(e=>!a.has("".concat(e.name,"-").concat(e.size)));q(e=>[...e,...d])}}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Upload images"})]}),E.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap -mx-2",children:E.map((e,r)=>(0,a.jsx)("div",{className:"w-1/3 px-2 mb-4",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:e,alt:"upload-".concat(r),className:"w-full h-40 object-cover rounded border"}),(0,a.jsx)("button",{type:"button",onClick:()=>{q(e=>e.filter((e,l)=>l!==r))},className:"absolute top-2 right-2 bg-white/90 border rounded px-2 py-1 text-xs hover:bg-white","aria-label":"Remove image",children:"Remove"})]})},r))})]})}),(0,a.jsx)("div",{className:"py-4 flex w-full gap-2 mt-8",children:(0,a.jsx)(k,{control:U,approverData:L,setValue:Q,getValues:K})}),(0,a.jsx)("div",{className:"flex justify-end gap-6 mt-2 w-full",children:(0,a.jsx)(x.A,{label:"Preview Form",onClick:J,size:"md",icon:(0,a.jsx)(e_,{})})}),y&&(0,a.jsx)(h.A,{size:"lg",nested:!0,title:"Configure Table Requirements",onClose:$,children:(0,a.jsx)(eB,{onClose:$,onConfirm:e=>{w(e),$()},initialHeaders:T})}),j&&(0,a.jsx)(h.A,{size:"lg",nested:!0,title:"Preview As Stated Form",onClose:W,children:(0,a.jsx)(eq,{onClose:W,table:{headers:T,rows:C},images:S,requestTypeId:v,requestType:b,approversArray:A,approvers:P,resetForm:()=>{var e,r,l,a,d,t,s,n;z.reset({requestTypeId:v,statedDate:new Date,statedDetails:"",statedSubject:"",approvers:{checkedById:null!=(e=null==b?void 0:b.checkedById)?e:void 0,checkedBy2Id:null!=(r=null==b?void 0:b.checkedBy2Id)?r:void 0,recomApprovalId:null!=(l=null==b?void 0:b.recomApprovalId)?l:void 0,recomApproval2Id:null!=(a=null==b?void 0:b.recomApproval2Id)?a:void 0,approveById:null!=(d=null==b?void 0:b.approveById)?d:void 0,approveBy2Id:null!=(t=null==b?void 0:b.approveBy2Id)?t:void 0,checkedBy3Id:null!=(s=null==b?void 0:b.checkedBy3Id)?s:void 0,checkedBy4Id:null!=(n=null==b?void 0:b.checkedBy4Id)?n:void 0}}),w([]),D([]),q([]),R([])}})})]})})}let eR=[{inventory_description:"Bond Paper",unit:"Ream",beginning:"10",ending:"5",utilized:"5",remarks:"Low stock",checkbox:!1},{inventory_description:"Ballpen",unit:"Box",beginning:"20",ending:"15",utilized:"5",remarks:"Available",checkbox:!1},{inventory_description:"Stapler",unit:"Piece",beginning:"5",ending:"4",utilized:"1",remarks:"Good condition",checkbox:!1},{inventory_description:"Calculator",unit:"Piece",beginning:"5",ending:"4",utilized:"1",remarks:"Good condition",checkbox:!1},{inventory_description:"Bond Paper Long",unit:"Piece",beginning:"5",ending:"4",utilized:"1",remarks:"Good condition",checkbox:!1}];var eP=l(54384);function eF(e){let{requestTypeId:r,requestType:l}=e,{data:s}=(0,f.rA)(),{data:n=[]}=(0,i.In)(),{data:p}=(0,i.XU)(),[v,b]=(0,d.useState)(null),[y,g]=(0,d.useState)(!1),[j,_]=(0,d.useState)(null),A=(null!=p?p:[]).filter(e=>e.approver).map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.name)?l:""}}),B=n.map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.branchName)?l:""}}),{control:T,register:w,handleSubmit:C,reset:S,setValue:q,getValues:E,formState:{errors:R}}=(0,u.mN)({resolver:(0,m.u)(D),defaultValues:{requestTypeId:r,approvers:{checkedById:void 0,checkedBy2Id:void 0,checkedBy3Id:void 0,checkedBy4Id:void 0,recomApprovalId:void 0,recomApproval2Id:void 0,approveById:void 0,approveBy2Id:void 0}}});(0,d.useEffect)(()=>{if(l){var e,a,d,t,s,n,o,i;S({requestTypeId:r,requestToId:void 0,requestFromId:void 0,date:void 0,request_description:"",from_name:"",items:[{item_description:"",quantity:"",date_of_last_request:"",allocation:"",remarks:""}],inventory_data:eR,approvers:{checkedById:null!=(e=l.checkedById)?e:void 0,checkedBy2Id:null!=(a=l.checkedBy2Id)?a:void 0,checkedBy3Id:null!=(d=l.checkedBy3Id)?d:void 0,checkedBy4Id:null!=(t=l.checkedBy4Id)?t:void 0,recomApprovalId:null!=(s=l.recomApprovalId)?s:void 0,recomApproval2Id:null!=(n=l.recomApproval2Id)?n:void 0,approveById:null!=(o=l.approveById)?o:void 0,approveBy2Id:null!=(i=l.approveBy2Id)?i:void 0}})}},[l,S,r]);let{fields:P,append:F,remove:Y}=(0,u.jz)({control:T,name:"items"}),{fields:O,append:M,remove:L}=(0,u.jz)({control:T,name:"inventory_data"});return(0,a.jsxs)("div",{className:"bg-white border border-[#ECECEC] min-h-70 px-3 py-10 rounded-md",children:[(0,a.jsx)("div",{children:(0,a.jsx)("h2",{className:"p-4 font-extrabold text-2xl text-center text-gray-700",children:"OFFICE SUPPLIES REQUISITION FORM"})}),(0,a.jsx)("form",{onSubmit:C(e=>{var r,l,a,d,t,o,i,c,u,p,m,x,h,v,y,j,f;_(e.approvers);let k=null==s||null==(r=s.branch)?void 0:r.coordinatorId,A=[{id:null!=(p=null==(l=e.approvers)?void 0:l.checkedById)?p:null,roleType:"checkedById"},{id:null!=(m=null==(a=e.approvers)?void 0:a.checkedBy2Id)?m:null,roleType:"checkedBy2Id"},{id:null!=(x=null==(d=e.approvers)?void 0:d.checkedBy3Id)?x:null,roleType:"checkedBy3Id"},{id:null!=(h=null==(t=e.approvers)?void 0:t.checkedBy4Id)?h:null,roleType:"checkedBy4Id"},{id:null!=(v=null==(o=e.approvers)?void 0:o.recomApprovalId)?v:null,roleType:"recomApprovalId"},{id:null!=(y=null==(i=e.approvers)?void 0:i.recomApproval2Id)?y:null,roleType:"recomApproval2Id"},{id:null!=(j=null==(c=e.approvers)?void 0:c.approveById)?j:null,roleType:"approveById"},{id:null!=(f=null==(u=e.approvers)?void 0:u.approveBy2Id)?f:null,roleType:"approveBy2Id"}].filter(e=>e.id).map(e=>{if(["checkedById","checkedBy2Id","checkedBy3Id","checkedBy4Id"].includes(e.roleType)){if(2===e.id)return{...e,id:k};else if(4===e.id&&(null==s?void 0:s.branchId))return{...e,id:I(n,null==s?void 0:s.branchId)}}if(["recomApprovalId","recomApproval2Id"].includes(e.roleType)&&3===e.id&&(null==s?void 0:s.branch)){var r;return{...e,id:N(null==s||null==(r=s.branch)?void 0:r.branchName)}}return e});b({...e,approvers:A}),g(!0)}),children:(0,a.jsxs)("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(20rem,1fr))] gap-4 p-4 mt-8",children:[(0,a.jsx)("div",{className:"flex flex-row",children:(0,a.jsx)(u.xI,{name:"requestToId",control:T,render:e=>{let{field:r,fieldState:l}=e;return(0,a.jsx)(o.A,{data:A,label:"Request To",placeholder:"Select request to...",name:r.name,value:r.value,onChange:r.onChange,inputRef:r.ref,error:l.error})}})}),(0,a.jsx)("div",{className:"flex flex-row",children:(0,a.jsx)(u.xI,{name:"requestFromId",control:T,render:e=>{let{field:r,fieldState:l}=e;return(0,a.jsx)(o.A,{data:B,label:"Branch",placeholder:"Select branch...",name:r.name,value:r.value,onChange:r.onChange,inputRef:r.ref,error:l.error})}})}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)(c.Pd,{label:"Date",placeholder:"Enter Date...",register:w("date"),error:R.date,type:"date"})}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)(c.Pd,{label:"From",placeholder:"Enter Date...",register:w("from_name"),error:R.from_name,type:"text"})}),(0,a.jsx)("div",{className:"flex col-span-2",children:(0,a.jsx)(c.sO,{label:"Request Description",placeholder:"description...",register:w("request_description"),error:R.request_description})}),(0,a.jsxs)("div",{className:"col-span-full overflow-x-auto",children:[(0,a.jsxs)("table",{className:"min-w-full border border-gray-200 text-sm",children:[(0,a.jsx)("thead",{className:"bg-gray-100",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-3 py-2 border border-gray-300",children:"Description"}),(0,a.jsx)("th",{className:"px-3 py-2 border border-gray-300",children:"Quantity"}),(0,a.jsx)("th",{className:"px-3 py-2 border border-gray-300",children:"Last Request Date"}),(0,a.jsx)("th",{className:"px-3 py-2 border border-gray-300",children:"Allocation"}),(0,a.jsx)("th",{className:"px-3 py-2 border border-gray-300",children:"Remarks"}),(0,a.jsx)("th",{className:"px-3 py-2 border border-gray-300 w-16",children:"Action"})]})}),(0,a.jsx)("tbody",{children:P.map((e,r)=>{var l,d,t,s,n,o,i,u,p,m;return(0,a.jsxs)("tr",{className:"odd:bg-white even:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-3 py-2 border border-gray-300",children:(0,a.jsx)(c.Pd,{type:"text",placeholder:"Description",register:w("items.".concat(r,".item_description")),error:null==(d=R.items)||null==(l=d[r])?void 0:l.item_description})}),(0,a.jsx)("td",{className:"px-3 py-2 border border-gray-300",children:(0,a.jsx)(c.Pd,{type:"text",placeholder:"Quantity",register:w("items.".concat(r,".quantity")),error:null==(s=R.items)||null==(t=s[r])?void 0:t.quantity})}),(0,a.jsx)("td",{className:"px-3 py-2 border border-gray-300",children:(0,a.jsx)(c.Pd,{type:"date",placeholder:"Last Request Date",register:w("items.".concat(r,".date_of_last_request")),error:null==(o=R.items)||null==(n=o[r])?void 0:n.date_of_last_request})}),(0,a.jsx)("td",{className:"px-3 py-2 border border-gray-300",children:(0,a.jsx)(c.Pd,{type:"text",placeholder:"Allocation",register:w("items.".concat(r,".allocation")),error:null==(u=R.items)||null==(i=u[r])?void 0:i.allocation})}),(0,a.jsx)("td",{className:"px-3 py-2 border border-gray-300",children:(0,a.jsx)(c.Pd,{type:"text",placeholder:"Remarks",register:w("items.".concat(r,".remarks")),error:null==(m=R.items)||null==(p=m[r])?void 0:p.remarks})}),(0,a.jsx)("td",{className:"px-3 py-2 border border-gray-300 text-center",children:(0,a.jsx)("button",{type:"button",disabled:1===P.length,onClick:()=>Y(r),className:"px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600 disabled:bg-red-300 disabled:cursor-not-allowed",children:"\uD83D\uDDD1"})})]},e.id)})})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("button",{type:"button",onClick:()=>F({item_description:"",quantity:"",date_of_last_request:"",allocation:"",remarks:""}),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"✚ Add Item"})})]}),(0,a.jsxs)("div",{className:"col-span-full mt-8",children:[(0,a.jsx)("div",{className:"",children:(0,a.jsx)("h2",{className:"font-extrabold text-xl text-center text-gray-700",children:"OFFICE SUPPLIES INVENTORY"})}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)("table",{className:"w-full border border-gray-300",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-2 border border-gray-300",children:"Description"}),(0,a.jsx)("th",{className:"p-2 border border-gray-300",children:"Unit"}),(0,a.jsx)("th",{className:"p-2 border border-gray-300",children:"Beginning"}),(0,a.jsx)("th",{className:"p-2 border border-gray-300",children:"Ending"}),(0,a.jsx)("th",{className:"p-2 border border-gray-300",children:"Utilized"}),(0,a.jsx)("th",{className:"p-2 border border-gray-300",children:"Remarks"}),(0,a.jsx)("th",{className:"p-2 border border-gray-300",children:"Checkbox"}),(0,a.jsx)("th",{className:"p-2 border border-gray-300",children:"Action"})]})}),(0,a.jsx)("tbody",{children:O.map((e,r)=>{var l,d,t,s,n,o,i,u,p,m,x,h,v,b;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"p-2 border border-gray-300",children:(0,a.jsx)(c.Pd,{type:"text",placeholder:"Description..",register:w("inventory_data.".concat(r,".inventory_description")),error:null==(d=R.inventory_data)||null==(l=d[r])?void 0:l.inventory_description})}),(0,a.jsx)("td",{className:"p-2 border border-gray-300",children:(0,a.jsx)(c.Pd,{type:"text",placeholder:"Unit..",register:w("inventory_data.".concat(r,".unit")),error:null==(s=R.inventory_data)||null==(t=s[r])?void 0:t.unit})}),(0,a.jsx)("td",{className:"p-2 border border-gray-300",children:(0,a.jsx)(c.Pd,{type:"text",placeholder:"Beginning..",register:w("inventory_data.".concat(r,".beginning")),error:null==(o=R.inventory_data)||null==(n=o[r])?void 0:n.beginning})}),(0,a.jsx)("td",{className:"p-2 border border-gray-300",children:(0,a.jsx)(c.Pd,{type:"text",placeholder:"Ending..",register:w("inventory_data.".concat(r,".ending")),error:null==(u=R.inventory_data)||null==(i=u[r])?void 0:i.ending})}),(0,a.jsx)("td",{className:"p-2 border border-gray-300",children:(0,a.jsx)(c.Pd,{type:"text",placeholder:"Utilized..",register:w("inventory_data.".concat(r,".utilized")),error:null==(m=R.inventory_data)||null==(p=m[r])?void 0:p.utilized})}),(0,a.jsx)("td",{className:"p-2 border border-gray-300",children:(0,a.jsx)(c.Pd,{type:"text",placeholder:"Remarks..",register:w("inventory_data.".concat(r,".remarks")),error:null==(h=R.inventory_data)||null==(x=h[r])?void 0:x.remarks})}),(0,a.jsx)("td",{className:"p-2 border border-gray-300",children:(0,a.jsx)(c.Pd,{type:"checkbox",placeholder:"Checkbox..",register:w("inventory_data.".concat(r,".checkbox")),error:null==(b=R.inventory_data)||null==(v=b[r])?void 0:v.checkbox})}),(0,a.jsx)("td",{className:"px-3 py-2 border border-gray-300 text-center",children:(0,a.jsx)("button",{type:"button",onClick:()=>L(r),disabled:1===O.length,className:"px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600 disabled:bg-red-300 disabled:cursor-not-allowed",children:"\uD83D\uDDD1"})})]},r)})})]})}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("button",{type:"button",onClick:()=>M({inventory_description:"",unit:"",beginning:"",ending:"",utilized:"",remarks:"",checkbox:!1}),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"✚ Add Inventory"})})]}),(0,a.jsx)("div",{className:"col-span-full mt-10",children:(0,a.jsx)(k,{control:T,approverData:A,setValue:q,getValues:E})}),(0,a.jsx)("div",{className:"col-span-full flex justify-end mt-3",children:(0,a.jsx)(x.A,{label:"Submit",size:"md",type:"submit",icon:(0,a.jsx)(t.A,{})})})]})}),y&&(0,a.jsx)(h.A,{size:"xl",children:(0,a.jsx)(eP.A,{onClose:()=>{g(!1)},onReset:()=>{S()},formData:v,requestType:l,approvers:j})})]})}var eY=l(76844);function eO(e){let{requestTypeId:r,requestType:l}=e,{data:s}=(0,f.rA)(),{data:n=[]}=(0,i.In)(),{data:p}=(0,i.XU)(),[v,b]=(0,d.useState)(null),[y,g]=(0,d.useState)(!1),[j,_]=(0,d.useState)(null),[A,B]=(0,d.useState)(0),[T,w]=(0,d.useState)([]),[C,D]=(0,d.useState)([]),S=(null!=p?p:[]).filter(e=>e.approver).map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.name)?l:""}}),q=n.map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.branchName)?l:""}}),{control:R,register:P,handleSubmit:F,reset:Y,getValues:O,setValue:M,formState:{errors:L}}=(0,u.mN)({resolver:(0,m.u)(E),defaultValues:{requestTypeId:r,approvers:{checkedById:void 0,checkedBy2Id:void 0,checkedBy3Id:void 0,checkedBy4Id:void 0,recomApprovalId:void 0,recomApproval2Id:void 0,approveById:void 0,approveBy2Id:void 0}}});return(0,d.useEffect)(()=>{if(l){var e,a,d,t,s,n,o,i;Y({requestTypeId:r,requestToId:void 0,requestFromId:void 0,date:void 0,request_description:"",request_note:"",numCols:0,headers:[],rows:[],approvers:{checkedById:null!=(e=l.checkedById)?e:void 0,checkedBy2Id:null!=(a=l.checkedBy2Id)?a:void 0,checkedBy3Id:null!=(d=l.checkedBy3Id)?d:void 0,checkedBy4Id:null!=(t=l.checkedBy4Id)?t:void 0,recomApprovalId:null!=(s=l.recomApprovalId)?s:void 0,recomApproval2Id:null!=(n=l.recomApproval2Id)?n:void 0,approveById:null!=(o=l.approveById)?o:void 0,approveBy2Id:null!=(i=l.approveBy2Id)?i:void 0}})}},[l,Y,r]),(0,a.jsxs)("div",{className:"bg-white border border-[#ECECEC] min-h-70 px-3 py-10 rounded-md",children:[(0,a.jsx)("div",{children:(0,a.jsx)("h2",{className:"p-4 font-extrabold text-2xl text-center text-gray-700",children:"PRE-SIGNING"})}),(0,a.jsx)("form",{onSubmit:F(e=>{var r,l,a,d,t,o,i,c,u,p,m,x,h,v,y,j,f;_(e.approvers);let k=null==s||null==(r=s.branch)?void 0:r.coordinatorId,A=[{id:null!=(p=null==(l=e.approvers)?void 0:l.checkedById)?p:null,roleType:"checkedById"},{id:null!=(m=null==(a=e.approvers)?void 0:a.checkedBy2Id)?m:null,roleType:"checkedBy2Id"},{id:null!=(x=null==(d=e.approvers)?void 0:d.checkedBy3Id)?x:null,roleType:"checkedBy3Id"},{id:null!=(h=null==(t=e.approvers)?void 0:t.checkedBy4Id)?h:null,roleType:"checkedBy4Id"},{id:null!=(v=null==(o=e.approvers)?void 0:o.recomApprovalId)?v:null,roleType:"recomApprovalId"},{id:null!=(y=null==(i=e.approvers)?void 0:i.recomApproval2Id)?y:null,roleType:"recomApproval2Id"},{id:null!=(j=null==(c=e.approvers)?void 0:c.approveById)?j:null,roleType:"approveById"},{id:null!=(f=null==(u=e.approvers)?void 0:u.approveBy2Id)?f:null,roleType:"approveBy2Id"}].filter(e=>e.id).map(e=>{if(["checkedById","checkedBy2Id","checkedBy3Id","checkedBy4Id"].includes(e.roleType)){if(2===e.id)return{...e,id:k};else if(4===e.id&&(null==s?void 0:s.branchId))return{...e,id:I(n,null==s?void 0:s.branchId)}}if(["recomApprovalId","recomApproval2Id"].includes(e.roleType)&&3===e.id&&(null==s?void 0:s.branch)){var r;return{...e,id:N(null==s||null==(r=s.branch)?void 0:r.branchName)}}return e});b({...e,table_data:{headers:T,rows:C},approvers:A}),g(!0)}),children:(0,a.jsxs)("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(25rem,1fr))] gap-4 p-4 mt-8",children:[(0,a.jsx)("div",{className:"flex flex-row",children:(0,a.jsx)(u.xI,{name:"requestToId",control:R,render:e=>{let{field:r,fieldState:l}=e;return(0,a.jsx)(o.A,{data:S,label:"Request To",placeholder:"Select request to...",name:r.name,value:r.value,onChange:r.onChange,inputRef:r.ref,error:l.error})}})}),(0,a.jsx)("div",{className:"flex flex-row",children:(0,a.jsx)(u.xI,{name:"requestFromId",control:R,render:e=>{let{field:r,fieldState:l}=e;return(0,a.jsx)(o.A,{data:q,label:"Branch",placeholder:"Select branch...",name:r.name,value:r.value,onChange:r.onChange,inputRef:r.ref,error:l.error})}})}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)(c.Pd,{label:"Date",register:P("date"),error:L.date,type:"date"})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 col-span-full gap-x-4",children:[(0,a.jsx)("div",{className:"flex flex-row",children:(0,a.jsx)(c.sO,{label:"Description",register:P("request_description"),error:L.request_description})}),(0,a.jsx)("div",{className:"flex flex-row",children:(0,a.jsx)(c.sO,{label:"Note",register:P("request_note"),error:L.request_note})})]}),(0,a.jsx)("div",{className:"flex flex-col col-span-full w-4/12",children:(0,a.jsx)(c.Pd,{label:"Number of columns",register:P("numCols",{valueAsNumber:!0,onChange:e=>{let r=Number(e.target.value);r>0?(B(r),w(Array(r).fill("")),D([Array(r).fill("")])):(B(0),w([]),D([]))}}),placeholder:"Enter a number...",type:"number"})}),A>0&&(0,a.jsxs)("div",{className:"p-4 col-span-full",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"DEFINE COLUMN HEADERS"}),(0,a.jsx)("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(10rem,1fr))] gap-2",children:T.map((e,r)=>(0,a.jsx)("input",{type:"text",placeholder:"Column ".concat(r+1),value:e,onChange:e=>{var l;return l=e.target.value,void w(e=>{let a=e.map((e,a)=>a===r?l:e);return M("headers",a),a})},className:"border border-gray-300 bg-gray-50 rounded-lg p-2"},r))})]}),(0,a.jsx)("div",{className:"col-span-full",children:C.length>0&&(0,a.jsx)("div",{className:"overflow-x-auto p-4",children:(0,a.jsxs)("table",{className:"w-full border border-gray-300",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:T.map((e,r)=>(0,a.jsx)("th",{className:"border border-gray-300 p-2 bg-gray-100 text-sm",children:e||"Column ".concat(r+1)},r))})}),(0,a.jsx)("tbody",{children:C.map((e,r)=>(0,a.jsxs)("tr",{children:[e.map((e,l)=>(0,a.jsx)("td",{className:"border border-gray-300 p-2",children:(0,a.jsx)("input",{type:"text",value:e,onChange:e=>{var a;return a=e.target.value,void D(e=>{let d=e.map((e,d)=>d===r?e.map((e,r)=>r===l?a:e):e);if(0===l&&r===e.length-1&&""!==a.trim()){let e=[...d,Array(A).fill("")];return M("rows",e),e}return M("rows",d),d})},className:"w-full border border-gray-300 rounded p-1"})},l)),(0,a.jsx)("td",{className:"border border-gray-300 p-2 text-center",children:C.length>1&&(0,a.jsx)("button",{type:"button",onClick:()=>{D(e=>e.filter((e,l)=>l!==r))},className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-md",children:"\uD83D\uDDD1"})})]},r))})]})})}),(0,a.jsx)("div",{className:"col-span-full mt-10",children:(0,a.jsx)(k,{control:R,approverData:S,setValue:M,getValues:O})}),(0,a.jsx)("div",{className:"col-span-full flex justify-end mt-3",children:(0,a.jsx)(x.A,{label:"Submit",size:"md",type:"submit",icon:(0,a.jsx)(t.A,{})})})]})}),y&&(0,a.jsx)(h.A,{size:"xl",children:(0,a.jsx)(eY.A,{onClose:()=>{g(!1)},onReset:()=>{Y(),w([]),D([]),B(0)},formData:{...v,headers:T,rows:C},requestType:l,approvers:j})})]})}var eM=l(72022);function eL(e){let{requestTypeId:r,requestType:l}=e,{data:s}=(0,f.rA)(),{data:n=[]}=(0,i.In)(),{data:p}=(0,i.XU)(),[v,b]=(0,d.useState)(null),[y,g]=(0,d.useState)(!1),[j,_]=(0,d.useState)(null),A=(null!=p?p:[]).filter(e=>e.approver).map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.name)?l:""}}),B=n.map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.branchName)?l:""}}),{control:T,register:w,handleSubmit:C,reset:D,setValue:S,getValues:q,formState:{errors:E}}=(0,u.mN)({resolver:(0,m.u)(R),defaultValues:{requestTypeId:r,approvers:{checkedById:void 0,checkedBy2Id:void 0,checkedBy3Id:void 0,checkedBy4Id:void 0,recomApprovalId:void 0,recomApproval2Id:void 0,approveById:void 0,approveBy2Id:void 0}}});return(0,d.useEffect)(()=>{if(l){var e,a,d,t,s,n,o,i;D({requestTypeId:r,requestFromId:void 0,date_endorsed:"",id_no:"",name_of_pensioner:"",bank:"",type_of_pension:"",age:"",date_in:"",first_coll_effect:"",last_transaction:"",transaction_type:"",no_of_months_overdue:"",with_insurance_icod:"",reason_for_no_insurance:"",loan_balance_as_of:"",total_lr:0,total_ap:0,total_udi:0,total_ide:0,approvers:{checkedById:null!=(e=l.checkedById)?e:void 0,checkedBy2Id:null!=(a=l.checkedBy2Id)?a:void 0,checkedBy3Id:null!=(d=l.checkedBy3Id)?d:void 0,checkedBy4Id:null!=(t=l.checkedBy4Id)?t:void 0,recomApprovalId:null!=(s=l.recomApprovalId)?s:void 0,recomApproval2Id:null!=(n=l.recomApproval2Id)?n:void 0,approveById:null!=(o=l.approveById)?o:void 0,approveBy2Id:null!=(i=l.approveBy2Id)?i:void 0}})}},[l,D,r]),(0,a.jsxs)("div",{className:"bg-white border border-[#ECECEC] min-h-70 px-3 py-10 rounded-md",children:[(0,a.jsx)("div",{children:(0,a.jsx)("h2",{className:"p-4 font-extrabold text-2xl text-center text-gray-700",children:"PAST DUE ENDORSEMENT"})}),(0,a.jsx)("form",{onSubmit:C(e=>{var r,l,a,d,t,o,i,c,u,p,m,x,h,v,y,j,f;_(e.approvers);let k=null==s||null==(r=s.branch)?void 0:r.coordinatorId,A=[{id:null!=(p=null==(l=e.approvers)?void 0:l.checkedById)?p:null,roleType:"checkedById"},{id:null!=(m=null==(a=e.approvers)?void 0:a.checkedBy2Id)?m:null,roleType:"checkedBy2Id"},{id:null!=(x=null==(d=e.approvers)?void 0:d.checkedBy3Id)?x:null,roleType:"checkedBy3Id"},{id:null!=(h=null==(t=e.approvers)?void 0:t.checkedBy4Id)?h:null,roleType:"checkedBy4Id"},{id:null!=(v=null==(o=e.approvers)?void 0:o.recomApprovalId)?v:null,roleType:"recomApprovalId"},{id:null!=(y=null==(i=e.approvers)?void 0:i.recomApproval2Id)?y:null,roleType:"recomApproval2Id"},{id:null!=(j=null==(c=e.approvers)?void 0:c.approveById)?j:null,roleType:"approveById"},{id:null!=(f=null==(u=e.approvers)?void 0:u.approveBy2Id)?f:null,roleType:"approveBy2Id"}].filter(e=>e.id).map(e=>{if(["checkedById","checkedBy2Id","checkedBy3Id","checkedBy4Id"].includes(e.roleType)){if(2===e.id)return{...e,id:k};else if(4===e.id&&(null==s?void 0:s.branchId))return{...e,id:I(n,null==s?void 0:s.branchId)}}if(["recomApprovalId","recomApproval2Id"].includes(e.roleType)&&3===e.id&&(null==s?void 0:s.branch)){var r;return{...e,id:N(null==s||null==(r=s.branch)?void 0:r.branchName)}}return e});b({...e,approvers:A}),g(!0)}),children:(0,a.jsxs)("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(18rem,1fr))] gap-4 p-4 mt-8",children:[(0,a.jsx)("div",{className:"flex flex-row",children:(0,a.jsx)(u.xI,{name:"requestFromId",control:T,render:e=>{let{field:r,fieldState:l}=e;return(0,a.jsx)(o.A,{data:B,label:"Branch",placeholder:"Select branch...",name:r.name,value:r.value,onChange:r.onChange,inputRef:r.ref,error:l.error})}})}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)(c.Pd,{label:"Date Endorsed",register:w("date_endorsed"),error:E.date_endorsed,type:"date"})}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)(c.Pd,{label:"ID No",register:w("id_no"),error:E.id_no,type:"text"})}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)(c.Pd,{label:"Pensioner Name",register:w("name_of_pensioner"),error:E.name_of_pensioner,type:"text"})}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)(c.Pd,{label:"Bank",register:w("bank"),error:E.bank,type:"text"})}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)(c.Pd,{label:"Type of Pension",register:w("type_of_pension"),error:E.type_of_pension,type:"text"})}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)(c.Pd,{label:"Age",register:w("age"),error:E.age,type:"text"})}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)(c.Pd,{label:"Date In",register:w("date_in"),error:E.date_in,type:"date"})}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)(c.Pd,{label:"First Collection Effectivity",register:w("first_coll_effect"),error:E.first_coll_effect,type:"date"})}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)(c.Pd,{label:"Last Transaction",register:w("last_transaction"),error:E.last_transaction,type:"date"})}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)(c.Pd,{label:"Transaction Type",register:w("transaction_type"),error:E.transaction_type,type:"text"})}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)(c.Pd,{label:"No of Months Overdue",register:w("no_of_months_overdue"),error:E.no_of_months_overdue,type:"text"})}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)(c.Pd,{label:"With Insurance/ICOD",register:w("with_insurance_icod"),error:E.with_insurance_icod,type:"text"})}),(0,a.jsx)("div",{className:"col-span-3",children:(0,a.jsx)(c.sO,{label:"Reason for no Insurance",register:w("reason_for_no_insurance"),error:E.reason_for_no_insurance})}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(c.Pd,{label:"Loan balance as of",register:w("loan_balance_as_of"),error:E.loan_balance_as_of,type:"date"})}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(c.Pd,{label:"Total LR",register:w("total_lr",{valueAsNumber:!0}),error:E.total_lr,type:"number",step:"any"})}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(c.Pd,{label:"Total AP",register:w("total_ap",{valueAsNumber:!0}),error:E.total_ap,type:"number",step:"any"})}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(c.Pd,{label:"Total UDI",register:w("total_udi",{valueAsNumber:!0}),error:E.total_udi,type:"number",step:"any"})}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(c.Pd,{label:"Total IDE",register:w("total_ide",{valueAsNumber:!0}),error:E.total_ide,type:"number",step:"any"})}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(c.Pd,{label:"Reason for non-collection of account",register:w("reason_for_non_coll_acc"),error:E.reason_for_non_coll_acc,type:"text"})}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(c.Pd,{label:"Co-Maker",register:w("co_maker"),error:E.co_maker,type:"text"})}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(c.Pd,{label:"Relation to SSP",register:w("relation_to_ssp"),error:E.relation_to_ssp,type:"text"})}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(c.Pd,{label:"Contact Number",register:w("contact_number"),error:E.contact_number,type:"text"})}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(c.Pd,{label:"Compromise Payment",register:w("compromise_payment"),error:E.compromise_payment,type:"text"})}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(c.Pd,{label:"Payment Start",register:w("payment_start"),error:E.payment_start,type:"text"})}),(0,a.jsx)("div",{className:"col-span-2",children:(0,a.jsx)(c.sO,{label:"Action Taken",register:w("action_taken"),error:E.action_taken})}),(0,a.jsx)("div",{className:"col-span-full mt-15 border-t border-gray-300 pt-4",children:(0,a.jsx)(k,{control:T,approverData:A,setValue:S,getValues:q})}),(0,a.jsx)("div",{className:"col-span-full flex justify-end mt-3",children:(0,a.jsx)(x.A,{label:"Preview",size:"md",type:"submit",icon:(0,a.jsx)(t.A,{})})})]})}),y&&(0,a.jsx)(h.A,{size:"xl",children:(0,a.jsx)(eM.A,{onClose:()=>{g(!1)},onReset:()=>{D()},formData:v,requestType:l,approvers:j})})]})}var eV=l(38849);function ez(e,r,l,a){let t=()=>r.reduce((e,r)=>{let l=a&&r in a?a[r]:"number"==typeof({})[r]?0:"";return e[r]=l,e},{}),[s,n]=(0,d.useState)([t()]),o=r=>{n(r),l(e,r,{shouldValidate:!0})};return{list:s,handleChange:(e,r,l)=>{let a=[...s];a[e]={...a[e],[r]:null!=l?l:""};let d=e===s.length-1,n=Object.values(a[e]).some(e=>"number"==typeof e?0!==e:""!==String(e).trim());d&&n&&a.push(t()),o(a)},handleMultiChange:(e,r)=>{let l=[...s];l[e]={...l[e],...r};let a=e===s.length-1,d=Object.values(l[e]).some(e=>""!==String(e).trim());a&&d&&l.push(t()),o(l)},handleDelete:e=>{let r=s.filter((r,l)=>l!==e);0===r.length&&r.push(t()),o(r)},setList:n,resetList:()=>{o([t()])}}}function eU(e){let{requestTypeId:r,requestType:l}=e,{data:s}=(0,f.rA)(),{data:n=[]}=(0,i.In)(),{data:p}=(0,i.XU)(),[v,b]=(0,d.useState)(null),[y,g]=(0,d.useState)(!1),[j,_]=(0,d.useState)(null),A=(null!=p?p:[]).filter(e=>e.approver).map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.name)?l:""}}),B=n.map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.branchName)?l:""}}),{control:T,register:w,handleSubmit:C,reset:D,getValues:S,setValue:q,formState:{errors:E}}=(0,u.mN)({resolver:(0,m.u)(V),defaultValues:{requestTypeId:r,approvers:{checkedById:void 0,checkedBy2Id:void 0,checkedBy3Id:void 0,checkedBy4Id:void 0,recomApprovalId:void 0,recomApproval2Id:void 0,approveById:void 0,approveBy2Id:void 0}}});(0,d.useEffect)(()=>{if(l){var e,a,d,t,s,n,o,i;D({requestTypeId:r,requestFromId:void 0,name:void 0,trip_ticket_number:"",approved_budget:0,computation_date_from:"",computation_date_to:"",destination_list:[{destination_name:""}],travel_details_list:[{date:"",day:"",from:"",to:"",transportation_services:"",or_number:"",amount:0}],computation_list:[{computation_date:"",branch_name:"",beg:0,ending:0,kilometers_consume:0,consumption_km:0,gas_liter_consume:0,gas_price_per_liter:0}],breakdown_expenses_list:[{branch_name:"",transpo:0,fuel:0,meals:0,accomodation:0}],approvers:{checkedById:null!=(e=l.checkedById)?e:void 0,checkedBy2Id:null!=(a=l.checkedBy2Id)?a:void 0,checkedBy3Id:null!=(d=l.checkedBy3Id)?d:void 0,checkedBy4Id:null!=(t=l.checkedBy4Id)?t:void 0,recomApprovalId:null!=(s=l.recomApprovalId)?s:void 0,recomApproval2Id:null!=(n=l.recomApproval2Id)?n:void 0,approveById:null!=(o=l.approveById)?o:void 0,approveBy2Id:null!=(i=l.approveBy2Id)?i:void 0}})}},[l,D,r]);let{list:R,handleChange:P,handleDelete:F,resetList:Y}=ez("destination_list",["destination_name"],q),{list:O,handleChange:M,handleDelete:L,resetList:z,handleMultiChange:U}=ez("travel_details_list",["date","day","from","to","transportation_services","or_number","amount"],q,{amount:0}),{list:H,handleChange:X,handleDelete:G,handleMultiChange:K,resetList:Q}=ez("computation_list",["computation_date","branch_name","beg","ending","kilometers_consume","consumption_km","gas_liter_consume","gas_price_per_liter"],q,{beg:0,ending:0,kilometers_consume:0,consumption_km:0,gas_liter_consume:0,gas_price_per_liter:0}),{list:J,handleChange:W,handleDelete:$,resetList:Z}=ez("breakdown_expenses_list",["branch_name","transpo","fuel","meals","accomodation"],q,{transpo:0,fuel:0,meals:0,accomodation:0});return(0,a.jsxs)("div",{className:"bg-white border border-[#ECECEC] min-h-70 px-3 py-10 rounded-md",children:[(0,a.jsx)("div",{children:(0,a.jsx)("h2",{className:"p-2 font-extrabold text-2xl text-center text-gray-700",children:"FSM TRAVEL LIQUIDATION"})}),(0,a.jsx)("form",{onSubmit:C(e=>{var r,l,a,d,t,o,i,c,u,p,m,x,h,v,y,j,f;_(e.approvers);let k=null==s||null==(r=s.branch)?void 0:r.coordinatorId,A=[{id:null!=(p=null==(l=e.approvers)?void 0:l.checkedById)?p:null,roleType:"checkedById"},{id:null!=(m=null==(a=e.approvers)?void 0:a.checkedBy2Id)?m:null,roleType:"checkedBy2Id"},{id:null!=(x=null==(d=e.approvers)?void 0:d.checkedBy3Id)?x:null,roleType:"checkedBy3Id"},{id:null!=(h=null==(t=e.approvers)?void 0:t.checkedBy4Id)?h:null,roleType:"checkedBy4Id"},{id:null!=(v=null==(o=e.approvers)?void 0:o.recomApprovalId)?v:null,roleType:"recomApprovalId"},{id:null!=(y=null==(i=e.approvers)?void 0:i.recomApproval2Id)?y:null,roleType:"recomApproval2Id"},{id:null!=(j=null==(c=e.approvers)?void 0:c.approveById)?j:null,roleType:"approveById"},{id:null!=(f=null==(u=e.approvers)?void 0:u.approveBy2Id)?f:null,roleType:"approveBy2Id"}].filter(e=>e.id).map(e=>{if(["checkedById","checkedBy2Id","checkedBy3Id","checkedBy4Id"].includes(e.roleType)){if(2===e.id)return{...e,id:k};else if(4===e.id&&(null==s?void 0:s.branchId))return{...e,id:I(n,null==s?void 0:s.branchId)}}if(["recomApprovalId","recomApproval2Id"].includes(e.roleType)&&3===e.id&&(null==s?void 0:s.branch)){var r;return{...e,id:N(null==s||null==(r=s.branch)?void 0:r.branchName)}}return e});b({...e,approvers:A}),g(!0)}),children:(0,a.jsxs)("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(25rem,1fr))] gap-4 p-4 mt-8",children:[(0,a.jsx)("div",{className:"flex flex-row",children:(0,a.jsx)(u.xI,{name:"requestFromId",control:T,render:e=>{let{field:r,fieldState:l}=e;return(0,a.jsx)(o.A,{data:B,label:"Branch",placeholder:"Select branch...",name:r.name,value:r.value,onChange:r.onChange,inputRef:r.ref,error:l.error})}})}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(c.Pd,{label:"Name",register:w("name"),error:E.name,type:"text"})}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(c.Pd,{label:"Trip Ticket #",register:w("trip_ticket_number"),error:E.trip_ticket_number,type:"text"})}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(c.Pd,{label:"Approved Budget",register:w("approved_budget",{valueAsNumber:!0}),error:E.approved_budget,type:"number"})}),(0,a.jsxs)("div",{className:"col-span-full mt-4",children:[(0,a.jsx)("h2",{className:"font-bold text-slate-800 mb-2",children:"DESTINATION:"}),(0,a.jsxs)("table",{className:"w-full border border-gray-600 text-center",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"DESTINATION"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"ACTION"})]})}),(0,a.jsx)("tbody",{children:R.map((e,r)=>{var l,d,t,s;return(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300",children:[(0,a.jsx)("input",{type:"text",value:e.destination_name,onChange:e=>P(r,"destination_name",e.target.value),className:"w-full border border-gray-300 rounded p-2"}),(null==(d=E.destination_list)||null==(l=d[r])?void 0:l.destination_name)&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null==(s=E.destination_list[r])||null==(t=s.destination_name)?void 0:t.message})]}),(0,a.jsx)("td",{className:"border border-gray-300",children:(0,a.jsx)("button",{disabled:1===R.length,type:"button",onClick:()=>F(r),className:"px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600  disabled:bg-red-300 disabled:cursor-not-allowed",children:"\uD83D\uDDD1"})})]},r)})})]})]}),(0,a.jsxs)("div",{className:"col-span-full mt-4",children:[(0,a.jsx)("h2",{className:"font-bold text-slate-800 mb-2",children:"TRAVEL DETAILS:"}),(0,a.jsxs)("table",{className:"w-full border border-gray-600 text-center",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"DATE"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"DAY"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"FROM"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"TO"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"TRANSPORTATION & SERVICES"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"OR NUMBER"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"AMOUNT"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"ACTION"})]})}),(0,a.jsx)("tbody",{children:O.map((e,r)=>{var l,d,t,s,n,o,i,c,u,p,m,x,h,v,b,y,g,j,f,N,I,_,k,A,B,T,w,C;return(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300",children:[(0,a.jsx)("input",{type:"date",value:e.date,onChange:e=>{let l=e.target.value;if(l){let e=new Date(l).toLocaleDateString("en-US",{weekday:"short"}).toUpperCase();M(r,"date",l),U(r,{date:l,day:e})}else U(r,{date:"",day:""})},className:"w-full border border-gray-300 rounded p-2"}),(null==(d=E.travel_details_list)||null==(l=d[r])?void 0:l.date)&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null==(s=E.travel_details_list[r])||null==(t=s.date)?void 0:t.message})]}),(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300",children:[(0,a.jsx)("input",{type:"text",value:e.day,onChange:e=>M(r,"day",e.target.value),className:"w-full border border-gray-300 rounded p-2"}),(null==(o=E.travel_details_list)||null==(n=o[r])?void 0:n.day)&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null==(c=E.travel_details_list[r])||null==(i=c.day)?void 0:i.message})]}),(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300",children:[(0,a.jsx)("input",{type:"text",value:e.from,onChange:e=>M(r,"from",e.target.value),className:"w-full border border-gray-300 rounded p-2"}),(null==(p=E.travel_details_list)||null==(u=p[r])?void 0:u.from)&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null==(x=E.travel_details_list[r])||null==(m=x.from)?void 0:m.message})]}),(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300",children:[(0,a.jsx)("input",{type:"text",value:e.to,onChange:e=>M(r,"to",e.target.value),className:"w-full border border-gray-300 rounded p-2"}),(null==(v=E.travel_details_list)||null==(h=v[r])?void 0:h.to)&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null==(y=E.travel_details_list[r])||null==(b=y.to)?void 0:b.message})]}),(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300",children:[(0,a.jsx)("input",{type:"text",value:e.transportation_services,onChange:e=>M(r,"transportation_services",e.target.value),className:"w-full border border-gray-300 rounded p-2"}),(null==(j=E.travel_details_list)||null==(g=j[r])?void 0:g.transportation_services)&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null==(N=E.travel_details_list[r])||null==(f=N.transportation_services)?void 0:f.message})]}),(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300",children:[(0,a.jsx)("input",{type:"text",value:e.or_number,onChange:e=>M(r,"or_number",e.target.value),className:"w-full border border-gray-300 rounded p-2"}),(null==(_=E.travel_details_list)||null==(I=_[r])?void 0:I.or_number)&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null==(A=E.travel_details_list[r])||null==(k=A.or_number)?void 0:k.message})]}),(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300",children:[(0,a.jsx)("input",{type:"number",value:0===e.amount?"":e.amount,onChange:e=>{let l=e.target.value;M(r,"amount",""===l?0:Number(l))},className:"w-full border border-gray-300 rounded p-2"}),(null==(T=E.travel_details_list)||null==(B=T[r])?void 0:B.amount)&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null==(C=E.travel_details_list[r])||null==(w=C.amount)?void 0:w.message})]}),(0,a.jsx)("td",{className:"border border-gray-300",children:(0,a.jsx)("button",{type:"button",disabled:1===O.length,onClick:()=>L(r),className:"px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600 disabled:bg-red-300 disabled:cursor-not-allowed",children:"\uD83D\uDDD1"})})]},r)})})]})]}),(0,a.jsxs)("div",{className:"col-span-full mt-4",children:[(0,a.jsx)("h2",{className:"font-bold text-slate-800 mb-2",children:"COMPUTATION:"}),(0,a.jsxs)("div",{className:"flex flex-row gap-x-4 py-4",children:[(0,a.jsx)(c.Pd,{label:"DATE FROM",register:w("computation_date_from"),error:E.computation_date_from,type:"date"}),(0,a.jsx)(c.Pd,{label:"DATE TO",register:w("computation_date_to"),error:E.computation_date_to,type:"date"})]}),(0,a.jsxs)("table",{className:"w-full border border-gray-600 text-center",children:[(0,a.jsxs)("thead",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-2 border border-gray-400",rowSpan:2,children:"BRANCH"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"DATE"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",colSpan:2,children:"ODOMETER READING"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"KILOMETERS"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"CONSUMPTION"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"GAS-LITER"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"GAS PRICE"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",rowSpan:2,children:"ACTION"})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-2 border border-gray-400"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"BEG"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"ENDING"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"CONSUME"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"KM/PER LITER"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"CONSUME"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"PER LITER"})]})]}),(0,a.jsx)("tbody",{children:H.map((e,r)=>{var l,d,t,s,n,o,i,c,u,p,m,x,h,v,b,y,g,j,f,N;return(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300",children:[(0,a.jsx)("input",{type:"text",value:e.branch_name,className:"w-full border border-gray-300 rounded p-2",onChange:e=>X(r,"branch_name",e.target.value)}),(null==(d=E.computation_list)||null==(l=d[r])?void 0:l.branch_name)&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null==(s=E.computation_list[r])||null==(t=s.branch_name)?void 0:t.message})]}),(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300",children:[(0,a.jsx)("input",{type:"date",value:e.computation_date,onChange:e=>X(r,"computation_date",e.target.value),className:"w-full border border-gray-300 rounded p-2"}),(null==(o=E.computation_list)||null==(n=o[r])?void 0:n.computation_date)&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null==(c=E.computation_list[r])||null==(i=c.computation_date)?void 0:i.message})]}),(0,a.jsx)("td",{className:"bg-white p-2 border border-gray-300",children:(0,a.jsx)("input",{type:"number",value:0===e.beg?"":e.beg,onChange:l=>{let a=""===l.target.value?0:Number(l.target.value),d=(Number(e.ending)||0)-a,t=Number(e.consumption_km)||0;K(r,{beg:a,kilometers_consume:d,gas_liter_consume:0===t?0:d/t})},className:"w-full border border-gray-300 rounded p-2",placeholder:"0"})}),(0,a.jsx)("td",{className:"bg-white p-2 border border-gray-300",children:(0,a.jsx)("input",{type:"number",value:0===e.ending?"":e.ending,onChange:l=>{let a=""===l.target.value?0:Number(l.target.value),d=a-(Number(e.beg)||0),t=Number(e.consumption_km)||0;K(r,{ending:a,kilometers_consume:d,gas_liter_consume:0===t?0:d/t})},className:"w-full border border-gray-300 rounded p-2",placeholder:"0"})}),(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300",children:[(0,a.jsx)("input",{type:"number",value:0===e.kilometers_consume?"":e.kilometers_consume,readOnly:!0,className:"w-full border border-gray-300 rounded p-2"}),(null==(p=E.computation_list)||null==(u=p[r])?void 0:u.kilometers_consume)&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null==(x=E.computation_list[r])||null==(m=x.kilometers_consume)?void 0:m.message})]}),(0,a.jsx)("td",{className:"bg-white p-2 border border-gray-300",children:(0,a.jsx)("input",{type:"number",value:0===e.consumption_km?"":e.consumption_km,onChange:l=>{let a=""===l.target.value?0:Number(l.target.value),d=Number(e.kilometers_consume)||0;K(r,{consumption_km:a,gas_liter_consume:0===a?0:d/a})},className:"w-full border border-gray-300 rounded p-2",placeholder:"0"})}),(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300",children:[(0,a.jsx)("input",{type:"number",value:0===e.gas_liter_consume?"":e.gas_liter_consume,readOnly:!0,className:"w-full border border-gray-300 rounded p-2"}),(null==(v=E.computation_list)||null==(h=v[r])?void 0:h.gas_liter_consume)&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null==(y=E.computation_list[r])||null==(b=y.gas_liter_consume)?void 0:b.message})]}),(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300",children:[(0,a.jsx)("input",{type:"number",value:0===e.gas_price_per_liter?"":e.gas_price_per_liter,onChange:e=>{let l=e.target.value;X(r,"gas_price_per_liter",""===l?0:Number(l))},className:"w-full border border-gray-300 rounded p-2"}),(null==(j=E.computation_list)||null==(g=j[r])?void 0:g.gas_price_per_liter)&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null==(N=E.computation_list[r])||null==(f=N.gas_price_per_liter)?void 0:f.message})]}),(0,a.jsx)("td",{className:"border border-gray-300",children:(0,a.jsx)("button",{disabled:1===H.length,type:"button",onClick:()=>G(r),className:"px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600  disabled:bg-red-300 disabled:cursor-not-allowed",children:"\uD83D\uDDD1"})})]},r)})})]})]}),(0,a.jsxs)("div",{className:"col-span-full mt-4",children:[(0,a.jsx)("h2",{className:"font-bold text-slate-800 mb-2",children:"BREAKDOWN OF EXPENSES FOR BRANCHES:"}),(0,a.jsxs)("table",{className:"w-full border border-gray-600 text-center",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"BRANCH"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"TRANSPO"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"FUEL"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"MEALS"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"ACCOMODATION"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"ACTION"})]})}),(0,a.jsx)("tbody",{children:J.map((e,r)=>{var l,d,t,s,n,o,i,c,u,p,m,x,h,v,b,y,g,j,f,N;return(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300",children:[(0,a.jsx)("input",{type:"text",value:e.branch_name,onChange:e=>W(r,"branch_name",e.target.value),className:"w-full border border-gray-300 rounded p-2"}),(null==(d=E.breakdown_expenses_list)||null==(l=d[r])?void 0:l.branch_name)&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null==(s=E.breakdown_expenses_list[r])||null==(t=s.branch_name)?void 0:t.message})]}),(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300",children:[(0,a.jsx)("input",{type:"number",value:0===e.transpo?"":e.transpo,onChange:e=>{let l=e.target.value;W(r,"transpo",""===l?0:Number(l))},className:"w-full border border-gray-300 rounded p-2"}),(null==(o=E.breakdown_expenses_list)||null==(n=o[r])?void 0:n.transpo)&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null==(c=E.breakdown_expenses_list[r])||null==(i=c.transpo)?void 0:i.message})]}),(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300",children:[(0,a.jsx)("input",{type:"number",value:0===e.fuel?"":e.fuel,onChange:e=>{let l=e.target.value;W(r,"fuel",""===l?0:Number(l))},className:"w-full border border-gray-300 rounded p-2"}),(null==(p=E.breakdown_expenses_list)||null==(u=p[r])?void 0:u.fuel)&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null==(x=E.breakdown_expenses_list[r])||null==(m=x.fuel)?void 0:m.message})]}),(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300",children:[(0,a.jsx)("input",{type:"number",value:0===e.meals?"":e.meals,onChange:e=>{let l=e.target.value;W(r,"meals",""===l?0:Number(l))},className:"w-full border border-gray-300 rounded p-2"}),(null==(v=E.breakdown_expenses_list)||null==(h=v[r])?void 0:h.meals)&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null==(y=E.breakdown_expenses_list[r])||null==(b=y.meals)?void 0:b.message})]}),(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300",children:[(0,a.jsx)("input",{type:"number",value:0===e.accomodation?"":e.accomodation,onChange:e=>{let l=e.target.value;W(r,"accomodation",""===l?0:Number(l))},className:"w-full border border-gray-300 rounded p-2"}),(null==(j=E.breakdown_expenses_list)||null==(g=j[r])?void 0:g.accomodation)&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null==(N=E.breakdown_expenses_list[r])||null==(f=N.accomodation)?void 0:f.message})]}),(0,a.jsx)("td",{className:"border border-gray-300",children:(0,a.jsx)("button",{disabled:1===J.length,type:"button",onClick:()=>$(r),className:"px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600  disabled:bg-red-300 disabled:cursor-not-allowed",children:"\uD83D\uDDD1"})})]},r)})})]})]}),(0,a.jsx)("div",{className:"col-span-full mt-10",children:(0,a.jsx)(k,{control:T,approverData:A,setValue:q,getValues:S})}),(0,a.jsx)("div",{className:"col-span-full flex justify-end mt-3",children:(0,a.jsx)(x.A,{label:"Submit",size:"md",type:"submit",icon:(0,a.jsx)(t.A,{})})})]})}),y&&(0,a.jsx)(h.A,{size:"xl",children:(0,a.jsx)(eV.A,{onClose:()=>{g(!1)},onReset:()=>{Y(),z(),Q(),Z(),D()},formData:v,requestType:l,approvers:j})})]})}var eH=l(581);function eX(e){let{requestTypeId:r,requestType:l}=e,{data:s}=(0,f.rA)(),{data:n=[]}=(0,i.In)(),{data:p}=(0,i.XU)(),[v,b]=(0,d.useState)(null),[y,g]=(0,d.useState)(!1),[j,_]=(0,d.useState)(null),A=(null!=p?p:[]).filter(e=>e.approver).map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.name)?l:""}}),B=n.map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.branchName)?l:""}}),{control:T,register:w,handleSubmit:C,reset:D,setValue:S,getValues:q,formState:{errors:E}}=(0,u.mN)({resolver:(0,m.u)(U),defaultValues:{requestTypeId:r,approvers:{checkedById:void 0,checkedBy2Id:void 0,checkedBy3Id:void 0,checkedBy4Id:void 0,recomApprovalId:void 0,recomApproval2Id:void 0,approveById:void 0,approveBy2Id:void 0}}});(0,d.useEffect)(()=>{if(l){var e,a,d,t,s,n,o,i;D({requestTypeId:r,requestFromId:void 0,cur_date:"",table_data:[{date:"",approved_weekly_itinerary:"",purpose:"",deviation:""}],approvers:{checkedById:null!=(e=l.checkedById)?e:void 0,checkedBy2Id:null!=(a=l.checkedBy2Id)?a:void 0,checkedBy3Id:null!=(d=l.checkedBy3Id)?d:void 0,checkedBy4Id:null!=(t=l.checkedBy4Id)?t:void 0,recomApprovalId:null!=(s=l.recomApprovalId)?s:void 0,recomApproval2Id:null!=(n=l.recomApproval2Id)?n:void 0,approveById:null!=(o=l.approveById)?o:void 0,approveBy2Id:null!=(i=l.approveBy2Id)?i:void 0}})}},[l,D,r]);let{list:R,handleChange:P,handleDelete:F,resetList:Y}=ez("table_data",["date","approved_weekly_itinerary","purpose","deviation"],S);return(0,a.jsxs)("div",{className:"bg-white border border-[#ECECEC] min-h-70 px-3 py-8 rounded-md",children:[(0,a.jsx)("div",{className:"p-1.5",children:(0,a.jsx)("h3",{className:"text-2xl font-extrabold text-gray-600 text-center",children:"WEEKLY ITINERARY DEVIATION"})}),(0,a.jsx)("form",{onSubmit:C(e=>{var r,l,a,d,t,o,i,c,u,p,m,x,h,v,y,j,f;_(e.approvers);let k=null==s||null==(r=s.branch)?void 0:r.coordinatorId,A=[{id:null!=(p=null==(l=e.approvers)?void 0:l.checkedById)?p:null,roleType:"checkedById"},{id:null!=(m=null==(a=e.approvers)?void 0:a.checkedBy2Id)?m:null,roleType:"checkedBy2Id"},{id:null!=(x=null==(d=e.approvers)?void 0:d.checkedBy3Id)?x:null,roleType:"checkedBy3Id"},{id:null!=(h=null==(t=e.approvers)?void 0:t.checkedBy4Id)?h:null,roleType:"checkedBy4Id"},{id:null!=(v=null==(o=e.approvers)?void 0:o.recomApprovalId)?v:null,roleType:"recomApprovalId"},{id:null!=(y=null==(i=e.approvers)?void 0:i.recomApproval2Id)?y:null,roleType:"recomApproval2Id"},{id:null!=(j=null==(c=e.approvers)?void 0:c.approveById)?j:null,roleType:"approveById"},{id:null!=(f=null==(u=e.approvers)?void 0:u.approveBy2Id)?f:null,roleType:"approveBy2Id"}].filter(e=>e.id).map(e=>{if(["checkedById","checkedBy2Id","checkedBy3Id","checkedBy4Id"].includes(e.roleType)){if(2===e.id)return{...e,id:k};else if(4===e.id&&(null==s?void 0:s.branchId))return{...e,id:I(n,null==s?void 0:s.branchId)}}if(["recomApprovalId","recomApproval2Id"].includes(e.roleType)&&3===e.id&&(null==s?void 0:s.branch)){var r;return{...e,id:N(null==s||null==(r=s.branch)?void 0:r.branchName)}}return e});b({...e,approvers:A}),g(!0)}),children:(0,a.jsxs)("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(25rem,1fr))] gap-4 p-4 mt-8",children:[(0,a.jsx)("div",{className:"flex flex-row",children:(0,a.jsx)(u.xI,{name:"requestFromId",control:T,render:e=>{let{field:r,fieldState:l}=e;return(0,a.jsx)(o.A,{data:B,label:"Branch",placeholder:"Select branch...",name:r.name,value:r.value,onChange:r.onChange,inputRef:r.ref,error:l.error})}})}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(c.Pd,{label:"Date",register:w("cur_date"),error:E.cur_date,type:"date"})}),(0,a.jsxs)("div",{className:"col-span-full mt-4",children:[(0,a.jsx)("h2",{className:"font-bold text-slate-800 mb-2",children:"ITINERARY APPROVAL FORM:"}),(0,a.jsxs)("table",{className:"w-full border border-gray-600 text-center",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-2 border border-gray-300 bg-gray-200",children:"DATE"}),(0,a.jsx)("th",{className:"p-2 border border-gray-300 bg-gray-200",children:"APPROVE WEEKLY ITINERARY"}),(0,a.jsx)("th",{className:"p-2 border border-gray-300 bg-gray-200",children:"PURPOSE"}),(0,a.jsx)("th",{className:"p-2 border border-gray-300 bg-gray-200",children:"DEVIATION"}),(0,a.jsx)("th",{className:"p-2 border border-gray-300 bg-gray-200",children:"ACTION"})]})}),(0,a.jsx)("tbody",{children:R.map((e,r)=>{var l,d,t,s,n,o,i,c,u,p,m,x,h,v,b,y;return(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300",children:[(0,a.jsx)("input",{type:"date",value:e.date,onChange:e=>P(r,"date",e.target.value),className:"w-full border border-gray-300 rounded p-2"}),(null==(d=E.table_data)||null==(l=d[r])?void 0:l.date)&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null==(s=E.table_data[r])||null==(t=s.date)?void 0:t.message})]}),(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300",children:[(0,a.jsx)("input",{type:"text",value:e.approved_weekly_itinerary,onChange:e=>P(r,"approved_weekly_itinerary",e.target.value),className:"w-full border border-gray-300 rounded p-2"}),(null==(o=E.table_data)||null==(n=o[r])?void 0:n.approved_weekly_itinerary)&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null==(c=E.table_data[r])||null==(i=c.approved_weekly_itinerary)?void 0:i.message})]}),(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300",children:[(0,a.jsx)("input",{type:"text",value:e.purpose,onChange:e=>P(r,"purpose",e.target.value),className:"w-full border border-gray-300 rounded p-2"}),(null==(p=E.table_data)||null==(u=p[r])?void 0:u.purpose)&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null==(x=E.table_data[r])||null==(m=x.purpose)?void 0:m.message})]}),(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300",children:[(0,a.jsx)("input",{type:"text",value:e.deviation,onChange:e=>P(r,"deviation",e.target.value),className:"w-full border border-gray-300 rounded p-2"}),(null==(v=E.table_data)||null==(h=v[r])?void 0:h.deviation)&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null==(y=E.table_data[r])||null==(b=y.deviation)?void 0:b.message})]}),(0,a.jsx)("td",{className:"border border-gray-300",children:(0,a.jsx)("button",{disabled:1===R.length,type:"button",onClick:()=>F(r),className:"px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600  disabled:bg-red-300 disabled:cursor-not-allowed",children:"\uD83D\uDDD1"})})]},r)})})]})]}),(0,a.jsx)("div",{className:"col-span-full mt-10",children:(0,a.jsx)(k,{control:T,approverData:A,setValue:S,getValues:q})}),(0,a.jsx)("div",{className:"col-span-full flex justify-end mt-3",children:(0,a.jsx)(x.A,{label:"Submit",size:"md",type:"submit",icon:(0,a.jsx)(t.A,{})})})]})}),y&&(0,a.jsx)(h.A,{size:"xl",children:(0,a.jsx)(eH.A,{onClose:()=>{g(!1)},onReset:()=>{D(),Y()},formData:v,requestType:l,approvers:j})})]})}var eG=l(5573);function eK(e){let{requestTypeId:r,requestType:l}=e,{data:s}=(0,f.rA)(),{data:n=[]}=(0,i.In)(),{data:p}=(0,i.XU)(),[v,b]=(0,d.useState)(null),[y,g]=(0,d.useState)(!1),[j,_]=(0,d.useState)(null),A=(null!=p?p:[]).filter(e=>e.approver).map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.name)?l:""}}),B=n.map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.branchName)?l:""}}),{control:T,register:w,handleSubmit:C,reset:D,setValue:S,getValues:q,formState:{errors:E}}=(0,u.mN)({resolver:(0,m.u)(X),defaultValues:{requestTypeId:r,approvers:{checkedById:void 0,checkedBy2Id:void 0,checkedBy3Id:void 0,checkedBy4Id:void 0,recomApprovalId:void 0,recomApproval2Id:void 0,approveById:void 0,approveBy2Id:void 0}}});(0,d.useEffect)(()=>{if(l){var e,a,d,t,s,n,o,i;D({requestTypeId:r,requestFromId:void 0,to_date:"",from_date:"",table_data:[{date:"",days:"",branch:"",remarks:""}],approvers:{checkedById:null!=(e=l.checkedById)?e:void 0,checkedBy2Id:null!=(a=l.checkedBy2Id)?a:void 0,checkedBy3Id:null!=(d=l.checkedBy3Id)?d:void 0,checkedBy4Id:null!=(t=l.checkedBy4Id)?t:void 0,recomApprovalId:null!=(s=l.recomApprovalId)?s:void 0,recomApproval2Id:null!=(n=l.recomApproval2Id)?n:void 0,approveById:null!=(o=l.approveById)?o:void 0,approveBy2Id:null!=(i=l.approveBy2Id)?i:void 0}})}},[l,D,r]);let{list:R,handleChange:P,handleDelete:F,handleMultiChange:Y,resetList:O}=ez("table_data",["date","days","branch","remarks"],S);return(0,a.jsxs)("div",{className:"bg-white border border-[#ECECEC] min-h-70 px-3 py-8 rounded-md",children:[(0,a.jsx)("div",{className:"p-1.5",children:(0,a.jsx)("h3",{className:"text-2xl font-extrabold text-gray-600 text-center",children:"FSM ITINERARY"})}),(0,a.jsx)("form",{onSubmit:C(e=>{var r,l,a,d,t,o,i,c,u,p,m,x,h,v,y,j,f;_(e.approvers);let k=null==s||null==(r=s.branch)?void 0:r.coordinatorId,A=[{id:null!=(p=null==(l=e.approvers)?void 0:l.checkedById)?p:null,roleType:"checkedById"},{id:null!=(m=null==(a=e.approvers)?void 0:a.checkedBy2Id)?m:null,roleType:"checkedBy2Id"},{id:null!=(x=null==(d=e.approvers)?void 0:d.checkedBy3Id)?x:null,roleType:"checkedBy3Id"},{id:null!=(h=null==(t=e.approvers)?void 0:t.checkedBy4Id)?h:null,roleType:"checkedBy4Id"},{id:null!=(v=null==(o=e.approvers)?void 0:o.recomApprovalId)?v:null,roleType:"recomApprovalId"},{id:null!=(y=null==(i=e.approvers)?void 0:i.recomApproval2Id)?y:null,roleType:"recomApproval2Id"},{id:null!=(j=null==(c=e.approvers)?void 0:c.approveById)?j:null,roleType:"approveById"},{id:null!=(f=null==(u=e.approvers)?void 0:u.approveBy2Id)?f:null,roleType:"approveBy2Id"}].filter(e=>e.id).map(e=>{if(["checkedById","checkedBy2Id","checkedBy3Id","checkedBy4Id"].includes(e.roleType)){if(2===e.id)return{...e,id:k};else if(4===e.id&&(null==s?void 0:s.branchId))return{...e,id:I(n,null==s?void 0:s.branchId)}}if(["recomApprovalId","recomApproval2Id"].includes(e.roleType)&&3===e.id&&(null==s?void 0:s.branch)){var r;return{...e,id:N(null==s||null==(r=s.branch)?void 0:r.branchName)}}return e});b({...e,approvers:A}),g(!0)}),children:(0,a.jsxs)("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(18rem,1fr))] gap-4 p-4 mt-8",children:[(0,a.jsx)("div",{className:"flex flex-row",children:(0,a.jsx)(u.xI,{name:"requestFromId",control:T,render:e=>{let{field:r,fieldState:l}=e;return(0,a.jsx)(o.A,{data:B,label:"Branch",placeholder:"Select branch...",name:r.name,value:r.value,onChange:r.onChange,inputRef:r.ref,error:l.error})}})}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(c.Pd,{label:"From Date",register:w("from_date"),error:E.from_date,type:"date"})}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(c.Pd,{label:"To Date",register:w("to_date"),error:E.to_date,type:"date"})}),(0,a.jsxs)("div",{className:"col-span-full mt-4",children:[(0,a.jsx)("h2",{className:"font-bold text-slate-800 mb-2",children:"FIELD ITINERARY:"}),(0,a.jsxs)("table",{className:"w-full border border-gray-600 text-center",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-2 border border-gray-300 bg-gray-200",children:"DATE"}),(0,a.jsx)("th",{className:"p-2 border border-gray-300 bg-gray-200",children:"DAYS"}),(0,a.jsx)("th",{className:"p-2 border border-gray-300 bg-gray-200",children:"BRANCH"}),(0,a.jsx)("th",{className:"p-2 border border-gray-300 bg-gray-200",children:"REMARKS"}),(0,a.jsx)("th",{className:"p-2 border border-gray-300 bg-gray-200",children:"ACTION"})]})}),(0,a.jsx)("tbody",{children:R.map((e,r)=>{var l,d,t,s,n,o,i,c,u,p,m,x,h,v,b,y;return(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300",children:[(0,a.jsx)("input",{type:"date",value:e.date,onChange:e=>{let l=e.target.value;if(l){let e=new Date(l).toLocaleDateString("en-US",{weekday:"short"}).toUpperCase();P(r,"date",l),Y(r,{date:l,days:e})}else Y(r,{date:"",days:""})},className:"w-full border border-gray-300 rounded p-2"}),(null==(d=E.table_data)||null==(l=d[r])?void 0:l.date)&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null==(s=E.table_data[r])||null==(t=s.date)?void 0:t.message})]}),(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300",children:[(0,a.jsx)("input",{type:"text",value:e.days,onChange:e=>P(r,"days",e.target.value),className:"w-full border border-gray-300 rounded p-2"}),(null==(o=E.table_data)||null==(n=o[r])?void 0:n.days)&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null==(c=E.table_data[r])||null==(i=c.days)?void 0:i.message})]}),(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300",children:[(0,a.jsx)("input",{type:"text",value:e.branch,onChange:e=>P(r,"branch",e.target.value),className:"w-full border border-gray-300 rounded p-2"}),(null==(p=E.table_data)||null==(u=p[r])?void 0:u.branch)&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null==(x=E.table_data[r])||null==(m=x.branch)?void 0:m.message})]}),(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300",children:[(0,a.jsx)("input",{type:"text",value:e.remarks,onChange:e=>P(r,"remarks",e.target.value),className:"w-full border border-gray-300 rounded p-2"}),(null==(v=E.table_data)||null==(h=v[r])?void 0:h.remarks)&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null==(y=E.table_data[r])||null==(b=y.remarks)?void 0:b.message})]}),(0,a.jsx)("td",{className:"border border-gray-300",children:(0,a.jsx)("button",{disabled:1===R.length,type:"button",onClick:()=>F(r),className:"px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600  disabled:bg-red-300 disabled:cursor-not-allowed",children:"\uD83D\uDDD1"})})]},r)})})]})]}),(0,a.jsx)("div",{className:"col-span-full mt-10",children:(0,a.jsx)(k,{control:T,approverData:A,setValue:S,getValues:q})}),(0,a.jsx)("div",{className:"col-span-full flex justify-end mt-3",children:(0,a.jsx)(x.A,{label:"Submit",size:"md",type:"submit",icon:(0,a.jsx)(t.A,{})})})]})}),y&&(0,a.jsx)(h.A,{size:"xl",children:(0,a.jsx)(eG.A,{onClose:()=>{g(!1)},onReset:()=>{D(),O()},formData:v,requestType:l,approvers:j})})]})}var eQ=l(8011);function eJ(e){let{requestTypeId:r,requestType:l}=e,{data:s}=(0,f.rA)(),{data:n=[]}=(0,i.In)(),{data:p}=(0,i.XU)(),[v,b]=(0,d.useState)(null),[y,g]=(0,d.useState)(!1),[j,_]=(0,d.useState)(null),A=(null!=p?p:[]).filter(e=>e.approver).map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.name)?l:""}}),B=n.map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.branchName)?l:""}}),{control:T,register:w,handleSubmit:C,reset:D,getValues:S,setValue:q,formState:{errors:E}}=(0,u.mN)({resolver:(0,m.u)(K),defaultValues:{requestTypeId:r,approvers:{checkedById:void 0,checkedBy2Id:void 0,checkedBy3Id:void 0,checkedBy4Id:void 0,recomApprovalId:void 0,recomApproval2Id:void 0,approveById:void 0,approveBy2Id:void 0}}});(0,d.useEffect)(()=>{if(l){var e,a,d,t,s,n,o,i;D({requestTypeId:r,requestFromId:void 0,name:void 0,date_covered:"",purpose:"",table_data:[{date:"",particulars:"",amount:0}],approvers:{checkedById:null!=(e=l.checkedById)?e:void 0,checkedBy2Id:null!=(a=l.checkedBy2Id)?a:void 0,checkedBy3Id:null!=(d=l.checkedBy3Id)?d:void 0,checkedBy4Id:null!=(t=l.checkedBy4Id)?t:void 0,recomApprovalId:null!=(s=l.recomApprovalId)?s:void 0,recomApproval2Id:null!=(n=l.recomApproval2Id)?n:void 0,approveById:null!=(o=l.approveById)?o:void 0,approveBy2Id:null!=(i=l.approveBy2Id)?i:void 0}})}},[l,D,r]);let{list:R,handleChange:P,handleDelete:F,resetList:Y}=ez("table_data",["date","particulars","amount"],q,{amount:0});return(0,a.jsxs)("div",{className:"bg-white border border-[#ECECEC] min-h-70 px-3 py-10 rounded-md",children:[(0,a.jsx)("div",{children:(0,a.jsx)("h2",{className:"p-2 font-extrabold text-2xl text-center text-gray-700",children:"TRAVEL ORDER LIQUIDATION"})}),(0,a.jsx)("form",{onSubmit:C(e=>{var r,l,a,d,t,o,i,c,u,p,m,x,h,v,y,j,f;_(e.approvers);let k=null==s||null==(r=s.branch)?void 0:r.coordinatorId,A=[{id:null!=(p=null==(l=e.approvers)?void 0:l.checkedById)?p:null,roleType:"checkedById"},{id:null!=(m=null==(a=e.approvers)?void 0:a.checkedBy2Id)?m:null,roleType:"checkedBy2Id"},{id:null!=(x=null==(d=e.approvers)?void 0:d.checkedBy3Id)?x:null,roleType:"checkedBy3Id"},{id:null!=(h=null==(t=e.approvers)?void 0:t.checkedBy4Id)?h:null,roleType:"checkedBy4Id"},{id:null!=(v=null==(o=e.approvers)?void 0:o.recomApprovalId)?v:null,roleType:"recomApprovalId"},{id:null!=(y=null==(i=e.approvers)?void 0:i.recomApproval2Id)?y:null,roleType:"recomApproval2Id"},{id:null!=(j=null==(c=e.approvers)?void 0:c.approveById)?j:null,roleType:"approveById"},{id:null!=(f=null==(u=e.approvers)?void 0:u.approveBy2Id)?f:null,roleType:"approveBy2Id"}].filter(e=>e.id).map(e=>{if(["checkedById","checkedBy2Id","checkedBy3Id","checkedBy4Id"].includes(e.roleType)){if(2===e.id)return{...e,id:k};else if(4===e.id&&(null==s?void 0:s.branchId))return{...e,id:I(n,null==s?void 0:s.branchId)}}if(["recomApprovalId","recomApproval2Id"].includes(e.roleType)&&3===e.id&&(null==s?void 0:s.branch)){var r;return{...e,id:N(null==s||null==(r=s.branch)?void 0:r.branchName)}}return e});b({...e,approvers:A}),g(!0)}),children:(0,a.jsxs)("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(18rem,1fr))] gap-4 p-4 mt-8",children:[(0,a.jsx)("div",{className:"flex flex-row",children:(0,a.jsx)(u.xI,{name:"requestFromId",control:T,render:e=>{let{field:r,fieldState:l}=e;return(0,a.jsx)(o.A,{data:B,label:"Branch",placeholder:"Select branch...",name:r.name,value:r.value,onChange:r.onChange,inputRef:r.ref,error:l.error})}})}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(c.Pd,{label:"Name",register:w("name"),error:E.name,type:"text"})}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(c.Pd,{label:"Date Covered",register:w("date_covered"),error:E.date_covered,type:"date"})}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(c.Pd,{label:"Purpose",register:w("purpose"),error:E.purpose,type:"text"})}),(0,a.jsxs)("div",{className:"col-span-full mt-4",children:[(0,a.jsx)("h2",{className:"font-bold text-slate-800 mb-2",children:"FIELD WEEKLY ITINERARY AND TRAVEL EXPENSE REPORT:"}),(0,a.jsxs)("table",{className:"w-full border border-gray-600 text-center",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-2 border border-gray-300 bg-gray-200",children:"DATE"}),(0,a.jsx)("th",{className:"p-2 border border-gray-300 bg-gray-200",children:"PARTICULARS"}),(0,a.jsx)("th",{className:"p-2 border border-gray-300 bg-gray-200",children:"AMOUNT"}),(0,a.jsx)("th",{className:"p-2 border border-gray-300 bg-gray-200",children:"ACTION"})]})}),(0,a.jsx)("tbody",{children:R.map((e,r)=>{var l,d,t,s,n,o,i,c,u,p,m,x;return(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300",children:[(0,a.jsx)("input",{type:"date",value:e.date,onChange:e=>P(r,"date",e.target.value),className:"w-full border border-gray-300 rounded p-2"}),(null==(d=E.table_data)||null==(l=d[r])?void 0:l.date)&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null==(s=E.table_data[r])||null==(t=s.date)?void 0:t.message})]}),(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300",children:[(0,a.jsx)("input",{type:"text",value:e.particulars,onChange:e=>P(r,"particulars",e.target.value),className:"w-full border border-gray-300 rounded p-2"}),(null==(o=E.table_data)||null==(n=o[r])?void 0:n.particulars)&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null==(c=E.table_data[r])||null==(i=c.particulars)?void 0:i.message})]}),(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300",children:[(0,a.jsx)("input",{type:"number",value:0===e.amount?"":e.amount,onChange:e=>{let l=e.target.value;P(r,"amount",""===l?0:Number(l))},className:"w-full border border-gray-300 rounded p-2"}),(null==(p=E.table_data)||null==(u=p[r])?void 0:u.amount)&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:null==(x=E.table_data[r])||null==(m=x.amount)?void 0:m.message})]}),(0,a.jsx)("td",{className:"border border-gray-300",children:(0,a.jsx)("button",{disabled:1===R.length,type:"button",onClick:()=>F(r),className:"px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600  disabled:bg-red-300 disabled:cursor-not-allowed",children:"\uD83D\uDDD1"})})]},r)})})]})]}),(0,a.jsx)("div",{className:"col-span-full mt-10",children:(0,a.jsx)(k,{control:T,approverData:A,setValue:q,getValues:S})}),(0,a.jsx)("div",{className:"col-span-full flex justify-end mt-3",children:(0,a.jsx)(x.A,{label:"Submit",size:"md",type:"submit",icon:(0,a.jsx)(t.A,{})})})]})}),y&&(0,a.jsx)(h.A,{size:"xl",children:(0,a.jsx)(eQ.A,{onClose:()=>{g(!1)},onReset:()=>{D(),Y()},formData:v,requestType:l,approvers:j})})]})}var eW=l(14271),e$=l(44128);function eZ(e){let{requestTypeId:r,requestType:l}=e,{data:s}=(0,f.rA)(),{data:n=[]}=(0,i.In)(),{data:p}=(0,i.XU)(),[v,b]=(0,d.useState)(null),[y,g]=(0,d.useState)(!1),[j,_]=(0,d.useState)(null),[A,B]=(0,d.useState)(null),T=(null!=p?p:[]).filter(e=>e.approver).map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.name)?l:""}}),w=n.map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.branchName)?l:""}}),{control:C,register:D,handleSubmit:S,reset:q,setValue:E,getValues:R,watch:P,formState:{errors:F}}=(0,u.mN)({resolver:(0,m.u)(W),defaultValues:{requestTypeId:r,approvers:{checkedById:void 0,checkedBy2Id:void 0,checkedBy3Id:void 0,checkedBy4Id:void 0,recomApprovalId:void 0,recomApproval2Id:void 0,approveById:void 0,approveBy2Id:void 0},supplier_list:[{name:"",address:"",prices:[]},{name:"",address:"",prices:[]},{name:"",address:"",prices:[]}],items_list:[{item_name:"",qty:0,unit_of_quantity:"",po_unit_cost:void 0}]}}),{fields:Y,append:O,remove:M}=(0,u.jz)({control:C,name:"items_list"}),L=P("items_list"),V=P("supplier_list");(0,d.useEffect)(()=>{let e=(null==L?void 0:L.length)||0;if(V.forEach((r,l)=>{let a=r.prices||[];if(a.length<e)for(let r=a.length;r<e;r++)E("supplier_list.".concat(l,".prices.").concat(r),void 0)}),null!==A){var r;let e=(null==(r=V[A])?void 0:r.prices)||[];L.forEach((r,l)=>{let a=e[l];"number"!=typeof a||isNaN(a)?E("items_list.".concat(l,".po_unit_cost"),void 0):E("items_list.".concat(l,".po_unit_cost"),a)})}},[L,V,A,E]),(0,d.useEffect)(()=>{if(l){var e,a,d,t,s,n,o,i;q({requestTypeId:r,requestFromId:void 0,date:void 0,document_number:"",supplier_list:[{name:"",address:"",prices:[]},{name:"",address:"",prices:[]},{name:"",address:"",prices:[]}],items_list:[{item_name:"",qty:0,unit_of_quantity:"",po_unit_cost:void 0}],approvers:{checkedById:null!=(e=l.checkedById)?e:void 0,checkedBy2Id:null!=(a=l.checkedBy2Id)?a:void 0,checkedBy3Id:null!=(d=l.checkedBy3Id)?d:void 0,checkedBy4Id:null!=(t=l.checkedBy4Id)?t:void 0,recomApprovalId:null!=(s=l.recomApprovalId)?s:void 0,recomApproval2Id:null!=(n=l.recomApproval2Id)?n:void 0,approveById:null!=(o=l.approveById)?o:void 0,approveBy2Id:null!=(i=l.approveBy2Id)?i:void 0}})}},[l,q,r]);let z=P("requestFromId"),{data:U}=(0,e$.kr)(z?Number(z):void 0);return(0,d.useEffect)(()=>{if(!U)return;let e=U.document_number;e&&!isNaN(e)?E("document_number",String(Number(e)+1)):E("document_number","")},[U,E]),(0,a.jsxs)("div",{className:"bg-white border border-[#ECECEC] min-h-70 px-3 py-8 rounded-md",children:[(0,a.jsx)("div",{className:"p-1.5",children:(0,a.jsx)("h3",{className:"text-2xl font-extrabold text-gray-600 text-center",children:"FFE PURCHASING FORM"})}),(0,a.jsx)("form",{onSubmit:S(e=>{var r,l,a,d,t,o,i,c,u,p,m,x,h,v,y,j,f;_(e.approvers);let k=null==s||null==(r=s.branch)?void 0:r.coordinatorId,A=[{id:null!=(p=null==(l=e.approvers)?void 0:l.checkedById)?p:null,roleType:"checkedById"},{id:null!=(m=null==(a=e.approvers)?void 0:a.checkedBy2Id)?m:null,roleType:"checkedBy2Id"},{id:null!=(x=null==(d=e.approvers)?void 0:d.checkedBy3Id)?x:null,roleType:"checkedBy3Id"},{id:null!=(h=null==(t=e.approvers)?void 0:t.checkedBy4Id)?h:null,roleType:"checkedBy4Id"},{id:null!=(v=null==(o=e.approvers)?void 0:o.recomApprovalId)?v:null,roleType:"recomApprovalId"},{id:null!=(y=null==(i=e.approvers)?void 0:i.recomApproval2Id)?y:null,roleType:"recomApproval2Id"},{id:null!=(j=null==(c=e.approvers)?void 0:c.approveById)?j:null,roleType:"approveById"},{id:null!=(f=null==(u=e.approvers)?void 0:u.approveBy2Id)?f:null,roleType:"approveBy2Id"}].filter(e=>e.id).map(e=>{if(["checkedById","checkedBy2Id","checkedBy3Id","checkedBy4Id"].includes(e.roleType)){if(2===e.id)return{...e,id:k};else if(4===e.id&&(null==s?void 0:s.branchId))return{...e,id:I(n,null==s?void 0:s.branchId)}}if(["recomApprovalId","recomApproval2Id"].includes(e.roleType)&&3===e.id&&(null==s?void 0:s.branch)){var r;return{...e,id:N(null==s||null==(r=s.branch)?void 0:r.branchName)}}return e});b({...e,approvers:A}),g(!0)}),children:(0,a.jsxs)("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(18rem,1fr))] gap-4 p-4 mt-8",children:[(0,a.jsx)("div",{className:"flex flex-row",children:(0,a.jsx)(u.xI,{name:"requestFromId",control:C,render:e=>{let{field:r,fieldState:l}=e;return(0,a.jsx)(o.A,{data:w,label:"Branch",placeholder:"Select branch...",name:r.name,value:r.value,onChange:r.onChange,inputRef:r.ref,error:l.error})}})}),(0,a.jsx)("div",{children:(0,a.jsx)(c.Pd,{label:"Document Number",register:D("document_number"),error:F.document_number,type:"text"})}),(0,a.jsx)("div",{children:(0,a.jsx)(c.Pd,{label:"Date",register:D("date"),error:F.date,type:"date"})}),(0,a.jsxs)("div",{className:"col-span-full mt-8",children:[(0,a.jsx)("div",{className:"text-center font-bold text-gray-700",children:(0,a.jsx)("h2",{children:"I. PURCHASE REQUISITION"})}),(0,a.jsxs)("div",{className:"col-span-full mt-4",children:[(0,a.jsxs)("table",{className:"w-full border border-gray-600 text-center",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-2 border border-gray-300",children:"Item Name"}),(0,a.jsx)("th",{className:"p-2 border border-gray-300",children:"Quantity"}),(0,a.jsx)("th",{className:"p-2 border border-gray-300",children:"Unit of Quantity"}),(0,a.jsx)("th",{className:"p-2 border border-gray-300 w-1/12",children:"Action"})]})}),(0,a.jsx)("tbody",{children:Y.map((e,r)=>{var l,d,t,s,n,o;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"bg-white p-2 border border-gray-300",children:(0,a.jsx)(c.Pd,{type:"text",placeholder:"item name",register:D("items_list.".concat(r,".item_name")),error:null==(d=F.items_list)||null==(l=d[r])?void 0:l.item_name})}),(0,a.jsx)("td",{className:"bg-white p-2 border border-gray-300",children:(0,a.jsx)(c.Pd,{type:"number",placeholder:"Quantity",register:D("items_list.".concat(r,".qty"),{valueAsNumber:!0}),error:null==(s=F.items_list)||null==(t=s[r])?void 0:t.qty})}),(0,a.jsx)("td",{className:"bg-white p-2 border border-gray-300",children:(0,a.jsx)(c.Pd,{type:"text",placeholder:"Unit of quantity",register:D("items_list.".concat(r,".unit_of_quantity")),error:null==(o=F.items_list)||null==(n=o[r])?void 0:n.unit_of_quantity})}),(0,a.jsx)("td",{className:"border border-gray-300 w-1/12",children:(0,a.jsx)("button",{disabled:1===Y.length,type:"button",onClick:()=>M(r),className:"px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600 disabled:bg-red-300 disabled:cursor-not-allowed",children:"\uD83D\uDDD1"})})]},e.id)})})]}),(0,a.jsx)("button",{type:"button",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 mt-4",onClick:()=>{O({item_name:"",qty:0,unit_of_quantity:"",po_unit_cost:void 0}),V.forEach((e,r)=>{E("supplier_list.".concat(r,".prices.").concat(L.length),void 0)})},children:"✚ ADD ITEM"})]}),(0,a.jsx)("div",{className:"text-center font-bold text-gray-700",children:(0,a.jsx)("h2",{children:"II. CANVASS SHEET"})}),(0,a.jsx)("div",{className:"overflow-x-auto mt-4",children:(0,a.jsxs)("table",{className:"w-full border border-gray-300",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-100 text-sm text-gray-700",children:[(0,a.jsx)("th",{className:"border border-gray-300 p-2 text-center",children:"ITEM"}),[1,2,3].map(e=>(0,a.jsxs)("th",{className:"border border-gray-300 p-2 text-center align-top",children:[(0,a.jsxs)("div",{className:"flex justify-center items-center gap-2",children:[(0,a.jsxs)("span",{children:["SUPPLIER ",e]}),(0,a.jsx)("input",{type:"checkbox",checked:A===e-1,onChange:()=>(e=>{var r;B(e);let l=(null==(r=V[e])?void 0:r.prices)||[];L.forEach((e,r)=>{let a=l[r];"number"!=typeof a||isNaN(a)?E("items_list.".concat(r,".po_unit_cost"),void 0):E("items_list.".concat(r,".po_unit_cost"),a)})})(e-1)})]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("input",{type:"text",placeholder:"Name",...D("supplier_list.".concat(e-1,".name")),className:"w-full border border-gray-300 bg-gray-50 rounded-lg p-1 mb-1 text-sm"}),(0,a.jsx)("input",{type:"text",placeholder:"Address",...D("supplier_list.".concat(e-1,".address")),className:"w-full border border-gray-300 bg-gray-50 rounded-lg p-1 text-sm"})]})]},e))]})}),(0,a.jsx)("tbody",{children:null==L?void 0:L.map((e,r)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"text-center p-1 border border-gray-300 text-sm",children:e.item_name||"Item ".concat(r+1)}),[0,1,2].map(e=>{var l,d,t,s,n;return(0,a.jsxs)("td",{className:"p-2 bg-gray-50 border border-gray-300",children:[(0,a.jsx)("input",{type:"number",step:"0.01",placeholder:"Unit price",...D("supplier_list.".concat(e,".prices.").concat(r),{valueAsNumber:!0}),className:"w-full border border-gray-300 bg-white rounded-lg p-1 text-sm",onChange:l=>{if(D("supplier_list.".concat(e,".prices.").concat(r)).onChange(l),A===e){let e=parseFloat(l.target.value);E("items_list.".concat(r,".po_unit_cost"),isNaN(e)?void 0:e)}}}),(null==(t=F.supplier_list)||null==(d=t[e])||null==(l=d.prices)?void 0:l[r])&&(0,a.jsx)("p",{className:"text-xs text-red-500 mt-1",children:String(null==(n=F.supplier_list[e].prices)||null==(s=n[r])?void 0:s.message)})]},e)})]},r))})]})}),(0,a.jsx)("div",{className:"text-center font-bold text-gray-700 mt-8",children:(0,a.jsx)("h2",{children:"III. PURCHASE ORDER"})}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)("table",{className:"w-full border border-gray-600 text-center",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-2 border border-gray-300",children:"Item Name"}),(0,a.jsx)("th",{className:"p-2 border border-gray-300",children:"QTY"}),(0,a.jsx)("th",{className:"p-2 border border-gray-300",children:"Unit Cost"}),(0,a.jsx)("th",{className:"p-2 border border-gray-300",children:"Remarks"})]})}),(0,a.jsx)("tbody",{children:L&&L.length>0?L.map((e,r)=>{var l,d,t,s;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"border border-gray-300 p-2",children:e.item_name||"Item ".concat(r+1)}),(0,a.jsx)("td",{className:"border border-gray-300 p-2",children:e.qty}),(0,a.jsx)("td",{className:"border border-gray-300 p-2",children:(0,a.jsx)(c.Pd,{register:D("items_list.".concat(r,".po_unit_cost"),{valueAsNumber:!0}),error:null==(d=F.items_list)||null==(l=d[r])?void 0:l.po_unit_cost,type:"number",step:"0.01",readonly:!0})}),(0,a.jsx)("td",{className:"border border-gray-300 p-2",children:(0,a.jsx)(c.Pd,{register:D("items_list.".concat(r,".remarks")),error:null==(s=F.items_list)||null==(t=s[r])?void 0:t.remarks,type:"text"})})]},r)}):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:4,className:"text-gray-400 p-3",children:"No items added yet."})})})]})}),(0,a.jsx)("div",{className:"col-span-full mt-15 border-t border-gray-300 pt-4",children:(0,a.jsx)(k,{control:C,approverData:T,setValue:E,getValues:R})}),(0,a.jsx)("div",{className:"col-span-full flex justify-end mt-3",children:(0,a.jsx)(x.A,{label:"Submit",size:"md",type:"submit",icon:(0,a.jsx)(t.A,{})})})]})]})}),y&&(0,a.jsx)(h.A,{size:"xl",children:(0,a.jsx)(eW.A,{onClose:()=>{g(!1)},onReset:()=>{q(),B(null)},formData:v,requestType:l,approvers:j})})]})}var e0=l(74420);let e2=(0,s.A)((0,a.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"AddCircleOutline");function e1(e){let{onClose:r,branchId:l}=e,{register:d,handleSubmit:s,formState:{errors:n}}=(0,u.mN)({resolver:(0,m.u)($)}),{mutate:o,isPending:i}=(0,e$.vJ)();return(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("form",{onSubmit:s(e=>{if(!l)return void ev.A.errorAlert("Please select a branch before adding suppliers.");o({branchId:l,...e},{onSuccess:()=>{ev.A.successAlert("Saved","New Supplier Saved Succesfully"),r()},onError:()=>{alert("Failed to add supplier. Please try again.")}})}),className:"grid grid-cols-[repeat(auto-fit,minmax(18rem,1fr))] gap-4 mt-6",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{className:"mb-1 font-semibold text-base",children:"Supplier Name"}),(0,a.jsx)("input",{type:"text",...d("supplier_name"),className:"bg-gray-100 rounded border border-gray-300 px-4 py-2",placeholder:"Supplier name..."}),n.supplier_name&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:n.supplier_name.message})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{className:"mb-1 font-semibold text-base",children:"Supplier Address"}),(0,a.jsx)("input",{type:"text",...d("supplier_address"),className:"bg-gray-100 rounded border border-gray-300 px-4 py-2",placeholder:"Supplier address..."}),n.supplier_address&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:n.supplier_address.message})]}),(0,a.jsxs)("div",{className:"col-span-full flex justify-end gap-x-4 mt-10",children:[(0,a.jsx)(x.A,{label:"Save",type:"submit",variant:"success",icon:(0,a.jsx)(t.A,{}),disabled:i}),(0,a.jsx)(x.A,{label:"Close",variant:"danger",onClick:r,icon:(0,a.jsx)(v.A,{})})]})]})})}function e3(e){let{requestTypeId:r,requestType:l}=e,{data:s}=(0,f.rA)(),{data:n=[]}=(0,i.In)(),{data:p}=(0,i.XU)(),[v,b]=(0,d.useState)(null),[y,g]=(0,d.useState)(!1),[j,_]=(0,d.useState)(!1),[A,B]=(0,d.useState)(null),T=(null!=p?p:[]).filter(e=>e.approver).map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.name)?l:""}}),w=n.map(e=>{var r,l;return{id:null!=(r=e.id)?r:"",name:null!=(l=e.branchName)?l:""}}),{control:C,register:D,handleSubmit:S,reset:q,watch:E,setValue:R,getValues:P,formState:{errors:F}}=(0,u.mN)({resolver:(0,m.u)(ee),defaultValues:{requestTypeId:r,approvers:{checkedById:void 0,checkedBy2Id:void 0,checkedBy3Id:void 0,checkedBy4Id:void 0,recomApprovalId:void 0,recomApproval2Id:void 0,approveById:void 0,approveBy2Id:void 0}}});(0,d.useEffect)(()=>{if(l){var e,a,d,t,s,n,o,i;q({requestTypeId:r,requestFromId:void 0,date:"",document_number:"",items_list:[{unit_of_qty:"",qty:0,item_name:"",unit_price:0,supplier_name:"",supplier_address:"",remarks:""}],approvers:{checkedById:null!=(e=l.checkedById)?e:void 0,checkedBy2Id:null!=(a=l.checkedBy2Id)?a:void 0,checkedBy3Id:null!=(d=l.checkedBy3Id)?d:void 0,checkedBy4Id:null!=(t=l.checkedBy4Id)?t:void 0,recomApprovalId:null!=(s=l.recomApprovalId)?s:void 0,recomApproval2Id:null!=(n=l.recomApproval2Id)?n:void 0,approveById:null!=(o=l.approveById)?o:void 0,approveBy2Id:null!=(i=l.approveBy2Id)?i:void 0}})}},[l,q,r]),(0,d.useEffect)(()=>{if(null==s?void 0:s.branch){var e;R("requestFromId",null==s||null==(e=s.branch)?void 0:e.id)}},[null==s?void 0:s.branch,R]);let{fields:Y,append:O,remove:M}=(0,u.jz)({control:C,name:"items_list"}),L=E("requestFromId"),{data:V=[],isLoading:z}=(0,e$.bv)(L),{refetch:U}=(0,e$.bv)(E("requestFromId")),{data:H}=(0,e$.kr)(L?Number(L):void 0),X=V.map((e,r)=>({id:r,name:e.supplier_name}));(0,d.useEffect)(()=>{if(!H)return;let e=H.document_number;e&&!isNaN(e)?R("document_number",String(Number(e)+1)):R("document_number","")},[H,R]);let G=()=>{_(!0)};return(0,a.jsxs)("div",{className:"bg-white border border-[#ECECEC] min-h-70 px-3 py-10 rounded-md",children:[(0,a.jsx)("div",{children:(0,a.jsx)("h2",{className:"p-4 font-extrabold text-2xl text-center text-gray-700",children:"OFFICE SUPPLIES PURCHASING FORM"})}),(0,a.jsx)("form",{onSubmit:S(e=>{var r,l,a,d,t,o,i,c,u,p,m,x,h,v,y,j,f;B(e.approvers);let _=null==s||null==(r=s.branch)?void 0:r.coordinatorId,k=[{id:null!=(p=null==(l=e.approvers)?void 0:l.checkedById)?p:null,roleType:"checkedById"},{id:null!=(m=null==(a=e.approvers)?void 0:a.checkedBy2Id)?m:null,roleType:"checkedBy2Id"},{id:null!=(x=null==(d=e.approvers)?void 0:d.checkedBy3Id)?x:null,roleType:"checkedBy3Id"},{id:null!=(h=null==(t=e.approvers)?void 0:t.checkedBy4Id)?h:null,roleType:"checkedBy4Id"},{id:null!=(v=null==(o=e.approvers)?void 0:o.recomApprovalId)?v:null,roleType:"recomApprovalId"},{id:null!=(y=null==(i=e.approvers)?void 0:i.recomApproval2Id)?y:null,roleType:"recomApproval2Id"},{id:null!=(j=null==(c=e.approvers)?void 0:c.approveById)?j:null,roleType:"approveById"},{id:null!=(f=null==(u=e.approvers)?void 0:u.approveBy2Id)?f:null,roleType:"approveBy2Id"}].filter(e=>e.id).map(e=>{if(["checkedById","checkedBy2Id","checkedBy3Id","checkedBy4Id"].includes(e.roleType)){if(2===e.id)return{...e,id:_};else if(4===e.id&&(null==s?void 0:s.branchId))return{...e,id:I(n,null==s?void 0:s.branchId)}}if(["recomApprovalId","recomApproval2Id"].includes(e.roleType)&&3===e.id&&(null==s?void 0:s.branch)){var r;return{...e,id:N(null==s||null==(r=s.branch)?void 0:r.branchName)}}return e});b({...e,approvers:k}),g(!0)}),children:(0,a.jsxs)("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(18rem,1fr))] gap-4 p-4 mt-8",children:[(0,a.jsx)("div",{className:"flex flex-row",children:(0,a.jsx)(u.xI,{name:"requestFromId",control:C,render:e=>{let{field:r,fieldState:l}=e;return(0,a.jsx)(o.A,{data:w,label:"Branch",placeholder:"Select branch...",name:r.name,value:r.value,onChange:r.onChange,inputRef:r.ref,error:l.error})}})}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(c.Pd,{label:"Document Number",register:D("document_number"),error:F.document_number,type:"text"})}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)(c.Pd,{label:"Date",register:D("date"),error:F.date,type:"date"})}),(0,a.jsxs)("div",{className:"col-span-full mt-4",children:[(0,a.jsx)("h2",{className:"font-bold text-gray-700 mb-2",children:"ITEM LIST:"}),(0,a.jsxs)("table",{className:"w-full border border-gray-600 text-center",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"Item Name"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"Qty"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"Unit of Quantity"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"Unit Price"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"Supplier Name"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400",children:"Remarks"}),(0,a.jsx)("th",{className:"p-2 border border-gray-400 w-1/12",children:"Action"})]})}),(0,a.jsx)("tbody",{children:Y.map((e,r)=>{var l,d,t,s,n,i,p,m,h,v;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"bg-white p-2 border border-gray-300",children:(0,a.jsx)(c.Pd,{type:"text",placeholder:"Item name..",register:D("items_list.".concat(r,".item_name")),error:null==(d=F.items_list)||null==(l=d[r])?void 0:l.item_name})}),(0,a.jsx)("td",{className:"bg-white p-2 border border-gray-300",children:(0,a.jsx)(c.Pd,{type:"number",placeholder:"quantity..",register:D("items_list.".concat(r,".qty"),{valueAsNumber:!0}),error:null==(s=F.items_list)||null==(t=s[r])?void 0:t.qty})}),(0,a.jsx)("td",{className:"bg-white p-2 border border-gray-300",children:(0,a.jsx)(c.Pd,{type:"text",placeholder:"unit of quantity..",register:D("items_list.".concat(r,".unit_of_qty")),error:null==(i=F.items_list)||null==(n=i[r])?void 0:n.unit_of_qty})}),(0,a.jsx)("td",{className:"bg-white p-2 border border-gray-300",children:(0,a.jsx)(c.Pd,{type:"number",placeholder:"unit price..",register:D("items_list.".concat(r,".unit_price"),{valueAsNumber:!0}),error:null==(m=F.items_list)||null==(p=m[r])?void 0:p.unit_price})}),(0,a.jsxs)("td",{className:"bg-white p-2 border border-gray-300 flex gap-x-2",children:[(0,a.jsx)(u.xI,{name:"items_list.".concat(r,".supplier_name"),control:C,render:e=>{let{field:l,fieldState:d}=e;return(0,a.jsx)(o.A,{data:X,label:"",placeholder:z?"Loading suppliers...":"Select supplier...",name:"items_list.".concat(r,".supplier_name"),value:l.value,onChange:e=>{var a;"string"==typeof e?l.onChange(e):e&&"object"==typeof e&&"name"in e?l.onChange(e.name):l.onChange("");let d="string"==typeof e?e:null!=(a=null==e?void 0:e.name)?a:"",t=V.find(e=>e.supplier_name===d);t?R("items_list.".concat(r,".supplier_address"),t.supplier_address):(l.onChange(""),R("items_list.".concat(r,".supplier_address"),""))},inputRef:l.ref,error:d.error,disabled:!L,returnField:"name"})}}),(0,a.jsx)(x.A,{size:"md",onClick:G,icon:(0,a.jsx)(e2,{}),type:"button"})]}),(0,a.jsx)("td",{className:"bg-white p-2 border border-gray-300",children:(0,a.jsx)(c.Pd,{type:"text",placeholder:"unit of remarks..",register:D("items_list.".concat(r,".remarks")),error:null==(v=F.items_list)||null==(h=v[r])?void 0:h.remarks})}),(0,a.jsx)("td",{className:"border border-gray-300 w-1/12",children:(0,a.jsx)("button",{disabled:1===Y.length,type:"button",onClick:()=>M(r),className:"px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600 disabled:bg-red-300 disabled:cursor-not-allowed",children:"\uD83D\uDDD1"})})]},e.id)})})]}),(0,a.jsx)("button",{type:"button",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 mt-4",onClick:()=>O({unit_of_qty:"",qty:0,item_name:"",unit_price:0,supplier_name:"",supplier_address:"",remarks:""}),children:"✚ Add Item"})]}),(0,a.jsx)("div",{className:"col-span-full mt-15 border-t border-gray-300 pt-4",children:(0,a.jsx)(k,{control:C,approverData:T,setValue:R,getValues:P})}),(0,a.jsx)("div",{className:"col-span-full flex justify-end mt-3",children:(0,a.jsx)(x.A,{label:"Preview",size:"md",type:"submit",icon:(0,a.jsx)(t.A,{})})})]})}),j&&(0,a.jsx)(h.A,{size:"xl",title:"Add New Supplier",children:(0,a.jsx)(e1,{onClose:()=>{_(!1),_(!1),U()},branchId:E("requestFromId")})}),y&&(0,a.jsx)(h.A,{size:"xl",children:(0,a.jsx)(e0.A,{onClose:()=>{g(!1)},onReset:()=>{q()},formData:v,requestType:l,approvers:A})})]})}function e4(){let[e,r]=(0,d.useState)(null),[l,t]=(0,d.useState)(null),{data:s,isLoading:n}=(0,i.B6)();(0,d.useEffect)(()=>{if(!e&&s&&s.length>0){let e=s[0];r(e.id),t(e)}},[s,e]);let o=(0,d.useMemo)(()=>{let e=new Map;return(null!=s?s:[]).forEach(r=>e.set(r.id,r)),e},[s]);return n?(0,a.jsx)("div",{className:"p-2 text-sm text-gray-600",children:"Loading request types…"}):(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("div",{className:"py-4 px-2",children:(0,a.jsx)("h1",{className:"text-xl font-bold text-black",children:"Request Management Templates"})}),(0,a.jsx)("div",{className:"my-1",children:(0,a.jsxs)("select",{value:null!=e?e:"",className:"bg-white border border-[#ECECEC] rounded-sm text-xs p-2",onChange:e=>{var l;let a=e.currentTarget.value;if(""===a){r(null),t(null);return}let d=Number(a);r(d),t(null!=(l=o.get(d))?l:null)},children:[(0,a.jsx)("option",{value:"",children:"Select type…"}),null==s?void 0:s.map(e=>(0,a.jsx)("option",{value:e.id,children:e.requestName},e.id))]})}),1===e&&(0,a.jsx)(A,{requestTypeId:e,requestType:l}),(2===e||38===e||39===e)&&(0,a.jsx)(el,{requestTypeId:e,requestType:l}),3===e&&(0,a.jsx)(ed,{requestTypeId:e,requestType:l}),4===e&&(0,a.jsx)(es,{requestTypeId:e,requestType:l}),(5===e||6===e)&&(0,a.jsx)(ef,{requestTypeId:e,requestType:l}),7===e&&(0,a.jsx)(eF,{requestTypeId:e,requestType:l}),8===e&&(0,a.jsx)(eZ,{requestTypeId:e,requestType:l}),9===e&&(0,a.jsx)(eO,{requestTypeId:e,requestType:l}),10===e&&(0,a.jsx)(eL,{requestTypeId:e,requestType:l}),null!==e&&[11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33].includes(e)&&(0,a.jsx)(eE,{requestTypeId:e,requestType:l}),34===e&&(0,a.jsx)(eU,{requestTypeId:e,requestType:l}),35===e&&(0,a.jsx)(eX,{requestTypeId:e,requestType:l}),36===e&&(0,a.jsx)(eK,{requestTypeId:e,requestType:l}),37===e&&(0,a.jsx)(eJ,{requestTypeId:e,requestType:l}),40===e&&(0,a.jsx)(e3,{requestTypeId:e,requestType:l})]})}},60502:(e,r,l)=>{"use strict";l.d(r,{$B:()=>o,Au:()=>i,EW:()=>p,JJ:()=>m,Pt:()=>v,Vm:()=>u,XC:()=>c,Zq:()=>h,a3:()=>s,hT:()=>n,jJ:()=>x});var a=l(22531),d=l(37610);a.Ik({id:a.ai().optional(),userId:a.ai().optional(),position:a.Yj().min(3),initial:a.Yj().min(3)});let t=a.Ik({id:a.ai().optional(),branchCode:a.Yj().min(1,{message:"Branch code is required"}).max(10,{message:"Branch code must be at most 10 characters"}),branchName:a.Yj().min(1,{message:"Branch name is required"}).max(100,{message:"Branch name must be at most 100 characters"}),coordinatorId:a.ai().optional(),bfomId:a.ai().optional(),telephone:a.Yj().min(1,{message:"Telephone number is required"}).max(20,{message:"Telephone number must be at most 20 characters"}),address:a.Yj().min(1,{message:"Address is required"}).max(150,{message:"Address must be at most 100 characters"}),companyName:a.Yj().min(1,{message:"Company name is required"}).max(150,{message:"Company name must be at most 150 characters"}),createdAt:a.p6().optional(),updatedAt:a.p6().optional()}),s=t.omit({id:!0,createdAt:!0,updatedAt:!0}),n=t.partial().refine(e=>Object.keys(e).length>0,{message:"At least one field must be provided for update"}),o=a.re({id:a.ai().optional(),requestName:a.Yj().min(1),checkedById:a.ai().nullable(),checkedBy2Id:a.ai().nullable(),checkedBy3Id:a.ai().nullable(),checkedBy4Id:a.ai().nullable(),recomApprovalId:a.ai().nullable(),recomApproval2Id:a.ai().nullable(),approveById:a.ai().nullable(),approveBy2Id:a.ai().nullable(),createdAt:a.Yj().optional(),updateAt:a.Yj().optional()}),i=o.partial().extend({id:a.ai().int().positive()});o.omit({id:!0,createdAt:!0,updatedAt:!0}),o.partial().refine(e=>Object.keys(e).length>0,{message:"At least one field must be provided for update"}),a.Ik({id:a.ai().optional(),requestTypeId:a.ai(),requestById:a.ai(),status:a.Yj(),requestDate:a.p6(),createdAt:a.p6().optional(),updatedAt:a.p6().optional()});let c=a.Ik({checkedById:a.ai().nullable().optional(),checkedBy2Id:a.ai().nullable().optional(),checkedBy3Id:a.ai().nullable().optional(),checkedBy4Id:a.ai().nullable().optional(),recomApprovalId:a.ai().nullable().optional(),recomApproval2Id:a.ai().nullable().optional(),approveById:a.ai().nullable().optional(),approveBy2Id:a.ai().nullable().optional()}),u=a.Ik({id:a.ai().optional(),mainRequestID:a.ai().optional(),requestToId:a.ai({message:"Select only in the provided data"}).min(1,{message:"Requested to is required"}),requestFromId:a.ai({message:"Select only in the provided data"}).min(1),requestContent:a.Yj().min(1),createdAt:a.p6().optional(),updatedAt:a.p6().optional(),requestDate:d.p6().refine(e=>e instanceof Date&&!isNaN(e.getTime()),{message:"Invalid date format"}).or(a.bz().refine(e=>!!e,{message:"Date is required"})),requestTypeId:a.ai().optional(),requestById:a.ai().optional()}).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({approvers:c}),p=a.Ik({tagsField:a.YO(a.Yj().min(1)).min(1,"At least one tag is required"),travelDate:d.p6(),travelling:a.Yj().max(100,"Your text is too long."),fuelFee:d.ai().min(0,"fee must be 0 or greater").max(1e5,"fee must not exceed limit.").refine(e=>/^\d+(\.\d{1,2})?$/.test(e.toString()),{message:"Maximum of 2 decimal places allowed"}),repairs:a.YO(a.Yj().min(1)).optional(),litigationExp:d.ai().min(0,"fee must be 0 or greater").max(1e5,"fee must not exceed limit.").refine(e=>/^\d+(\.\d{1,2})?$/.test(e.toString()),{message:"Maximum of 2 decimal places allowed"}),totalFunds:d.ai().min(0,"fee must be 0 or greater").max(1e5,"fee must not exceed limit.").refine(e=>/^\d+(\.\d{1,2})?$/.test(e.toString()),{message:"Maximum of 2 decimal places allowed"}),travelKm:a.Yj().max(10,"You exceeded the text limit."),fundRemarks:a.Yj().max(200,"Make your remark shorter"),startDate:d.p6(),endDate:d.p6()}),m=a.Ik({funDate:d.p6(),payee:a.Yj().max(100,"Your text is too long."),fundRemarks:a.Yj().max(200,"Make your remark shorter"),fundAmount:d.ai().min(0,"amount must be 0 or greater").max(1e5,"amount must not exceed limit.").refine(e=>/^\d+(\.\d{1,2})?$/.test(e.toString()),{message:"Maximum of 2 decimal places allowed"}),miscExp:d.ai().min(0,"fee must be 0 or greater").max(1e5,"fee must not exceed limit.").refine(e=>/^\d+(\.\d{1,2})?$/.test(e.toString()),{message:"Maximum of 2 decimal places allowed"}),powerLight:d.ai().min(0,"fee must be 0 or greater").max(1e5,"fee must not exceed limit.").refine(e=>/^\d+(\.\d{1,2})?$/.test(e.toString()),{message:"Maximum of 2 decimal places allowed"}),telephone:d.ai().min(0,"fee must be 0 or greater").max(1e5,"fee must not exceed limit.").refine(e=>/^\d+(\.\d{1,2})?$/.test(e.toString()),{message:"Maximum of 2 decimal places allowed"}),dueToMh:d.ai().min(0,"fee must be 0 or greater").max(1e5,"fee must not exceed limit.").refine(e=>/^\d+(\.\d{1,2})?$/.test(e.toString()),{message:"Maximum of 2 decimal places allowed"}),startDate:d.p6(),endDate:d.p6()}),x=a.Ik({office:a.Yj().min(1,"Required").max(50),branch:a.Yj().min(1,"Required").max(100),dateCounted:d.p6(),nameFund:a.Yj().min(1,"Required").max(100),fundAmount:d.ai().min(0,"Must be 0 or greater"),reference:a.Yj().max(100).optional(),denoms:a.YO(d.ai()),pieces:a.YO(d.ai().min(0,"Must be 0 or greater")),amounts:a.YO(d.ai().min(0,"Must be 0 or greater")),fundPerCount:d.ai().min(0,"Must be 0 or greater"),cashShort:d.ai().min(0,"Must be 0 or greater"),checked:a.YO(d.zM()).optional()}).passthrough().extend({approvers:c});a.Ik({company:a.Yj().min(1,"Required").max(100),branch:a.Yj().min(1,"Required").max(100)}),a.Ik({company:a.Yj().min(1,"Required").max(100),branch:a.Yj().min(1,"Required").max(100)});let h=a.Ik({statedTo:a.ai().min(1,"Required"),statedFrom:a.ai().min(1,"Required"),statedDate:d.p6().refine(e=>!isNaN(e.getTime()),{message:"Date is required."}),statedSubject:a.Yj().min(1,"This field is required.").max(100,"Your text is too long."),statedDetails:a.Yj().min(1,"This field is required.").max(1e3,"Your text is more than required.")}).passthrough().extend({approvers:c}),v=a.Ik({tableHeader:a.Yj().max(200,"Your header is too long"),tableColAction:a.Yj().max(100,"Your text is too long")})},87175:(e,r,l)=>{"use strict";l.d(r,{A:()=>t});var a=l(28322),d=l(95155);let t=(0,a.A)((0,d.jsx)("path",{d:"M21 12.4V7l-4-4H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h7.4zM15 15c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3M6 6h9v4H6zm13.99 10.25 1.77 1.77L16.77 23H15v-1.77zm3.26.26-.85.85-1.77-1.77.85-.85c.2-.2.51-.2.71 0l1.06 1.06c.2.2.2.52 0 .71"}),"SaveAs")}},e=>{e.O(0,[320,466,960,322,280,568,807,626,441,964,358],()=>e(e.s=13930)),_N_E=e.O()}]);