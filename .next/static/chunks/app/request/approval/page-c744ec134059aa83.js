(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[242],{13459:(e,s,t)=>{Promise.resolve().then(t.bind(t,89965))},89965:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>I});var l=t(95155),i=t(12115),n=t(24771),r=t(99472),a=t(16304),o=t(45084),d=t(48725),x=t(50807),c=t(92523),u=t(60152),m=t(50228),p=t(96775),j=t(59284),h=t(88933),f=t(28661),g=t(18486),v=t(80724),q=t(54384),N=t(76844),y=t(72022),b=t(38849),C=t(581),A=t(5573),T=t(8011),R=t(14271),D=t(74420);function E(e){let{requests:s,status:t="PENDING"}=e,[E,I]=(0,i.useState)(!1),[z,P]=(0,i.useState)(null),w=(0,n.M)(),[k,S]=(0,i.useState)(""),[B,F]=(0,i.useState)(!1),[L,G]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=()=>{G(window.innerWidth<640)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let O=()=>{I(!1)};return(0,l.jsxs)("div",{className:"grid gap-4 grid-cols-[repeat(auto-fit,minmax(250px,1fr))]",children:[0===s.length?(0,l.jsx)("p",{className:"text-sm text-gray-500 col-span-full text-center",children:"No requests found"}):s.map(e=>{var s,i;return(0,l.jsxs)("div",{className:"flex flex-col bg-white justify-center gap-[1rem] min-h-50 max-h-70 py-2 rounded-xl shadow-md max-w-[380px] w-full",children:[(0,l.jsxs)("div",{className:"flex flex-col px-[1rem]",children:[(0,l.jsxs)("div",{className:"border-b-3 pb-2 border-[#f2f7f4] flex justify-between ",children:[(0,l.jsx)("h3",{className:"text-start text-[clamp(0.6rem,0.8rem,1rem)] font-bold ",children:e.requestType.requestName||"Request Title"}),(0,l.jsx)("h3",{className:"text-end text-[clamp(0.6rem,0.8rem,1rem)] font-bold",children:e.referenceCode||"Temporary"})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-3 px-2 my-3",children:[(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,l.jsx)("p",{className:"text-[.8rem] text-gray-500",children:"Requested By:"}),(0,l.jsx)("p",{className:"text-xs font-semibold",children:e.requestBy.name})]}),(0,l.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,l.jsx)("p",{className:"text-[.8rem] text-gray-500",children:"Branch:"}),(0,l.jsx)("p",{className:"text-xs font-semibold",children:null!=(i=null==(s=e.requestFrom)?void 0:s.branchName)?i:""})]})]}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,l.jsx)("p",{className:"text-[.8rem] text-gray-500",children:"Date:"}),(0,l.jsx)("p",{className:"text-xs font-semibold",children:(0,l.jsx)(r.XU,{value:e.requestDate})})]}),(0,l.jsxs)("div",{className:"flex flex-col flex-1 ",children:[(0,l.jsx)("p",{className:"text-[.8rem] text-gray-500",children:"Status:"}),(0,l.jsx)("p",{className:"text-xs font-semibold",children:e.status})]})]})]})]}),(0,l.jsxs)("div",{className:"flex justify-center gap-[1rem]",children:[(0,l.jsx)(a.A,{label:"View",variant:"info",size:"xs",icon:(0,l.jsx)(o.A,{fontSize:"small"}),onClick:()=>{P(e),I(!0)}}),(0,l.jsx)(a.A,{label:"Approve",variant:"success",size:"xs",icon:(0,l.jsx)(d.A,{fontSize:"small"}),disabled:"PENDING"!==t,onClick:()=>{m.A.confirmationAlert("Are you sure?","You want to approve this <b><u>"+e.requestType.requestName+"</u></b> request submitted by <b>"+e.requestBy.name+"</b>",()=>{w.mutate({id:e.id,action:"APPROVED",remarks:k},{onSuccess:()=>{(0,u.Te)({message:"Request approved!",position:"top-center"})},onError:e=>{console.error("Error approving:",e),(0,u.Qg)({message:"Failed to approve request",position:"top-center"})}})})}}),(0,l.jsx)(a.A,{label:"Reject",variant:"danger",size:"xs",disabled:"PENDING"!==t,icon:(0,l.jsx)(x.A,{fontSize:"small"}),onClick:()=>{F(!0),P(e)}})]})]},e.id)}),E&&(null==z?void 0:z.requestTypeId)===1&&(0,l.jsx)(c.A,{size:"lg",title:"Fund Transfer Details",onClose:O,children:(0,l.jsx)(p.A,{mainRequest:z,onClose:O})}),(E&&(null==z?void 0:z.requestTypeId)===2||E&&(null==z?void 0:z.requestTypeId)===38||E&&(null==z?void 0:z.requestTypeId)===39)&&(0,l.jsx)(c.A,{size:L?"xs":"lg",title:"Travel Order Details",onClose:O,children:(0,l.jsx)(j.j,{mainRequest:z,onClose:O})}),E&&(null==z?void 0:z.requestTypeId)===3&&(0,l.jsx)(c.A,{size:L?"xs":"xl",title:"Proposed Budget Details",onClose:O,children:(0,l.jsx)(h.k,{mainRequest:z,onClose:O})}),E&&(null==z?void 0:z.requestTypeId)===4&&(0,l.jsx)(c.A,{size:L?"xs":"lg",title:"Transmittal Details",onClose:O,children:(0,l.jsx)(f.g,{mainRequest:z,onClose:O})}),E&&((null==z?void 0:z.requestTypeId)===5||(null==z?void 0:z.requestTypeId)===6)&&(0,l.jsx)(c.A,{size:"lg",nested:!0,title:"Cash Count Sheet",onClose:O,children:(0,l.jsx)(g.A,{onClose:O,mainRequest:z})}),E&&(null==z?void 0:z.requestTypeId)===7&&(0,l.jsx)(c.A,{size:L?"xs":"xl",title:"Requisition Details",onClose:O,children:(0,l.jsx)(q.r,{mainRequest:z,onClose:O})}),E&&(null==z?void 0:z.requestTypeId)===8&&(0,l.jsx)(c.A,{size:L?"xs":"xl",title:"Purchasing Details",onClose:O,children:(0,l.jsx)(R.Q,{mainRequest:z,onClose:O})}),E&&(null==z?void 0:z.requestTypeId)===9&&(0,l.jsx)(c.A,{size:L?"xs":"lg",title:"Pre-Sign Details",onClose:O,children:(0,l.jsx)(N.$,{mainRequest:z,onClose:O})}),E&&(null==z?void 0:z.requestTypeId)===10&&(0,l.jsx)(c.A,{size:L?"xs":"lg",title:"Past Due Endorsement Details",onClose:O,children:(0,l.jsx)(y.h,{mainRequest:z,onClose:O})}),E&&(null==z?void 0:z.requestTypeId)===34&&(0,l.jsx)(c.A,{size:L?"xs":"xl",title:"FSM Travel Liquidations Details",onClose:O,children:(0,l.jsx)(b.I,{mainRequest:z,onClose:O})}),E&&(null==z?void 0:z.requestTypeId)===35&&(0,l.jsx)(c.A,{size:L?"xs":"xl",title:"Weekly Itinerary Deviation Details",onClose:O,children:(0,l.jsx)(C.y,{mainRequest:z,onClose:O})}),E&&(null==z?void 0:z.requestTypeId)===36&&(0,l.jsx)(c.A,{size:L?"xs":"xl",title:" Itinerary Details",onClose:O,children:(0,l.jsx)(A.e,{mainRequest:z,onClose:O})}),E&&(null==z?void 0:z.requestTypeId)===37&&(0,l.jsx)(c.A,{size:L?"xs":"xl",title:" Travel Order Liquidation Details",onClose:O,children:(0,l.jsx)(T.q,{mainRequest:z,onClose:O})}),E&&(null==z?void 0:z.requestTypeId)===38&&(0,l.jsx)(c.A,{size:L?"xs":"xl",title:"Purchasing Details",onClose:O,children:(0,l.jsx)(D.F,{mainRequest:z,onClose:O})}),B&&(0,l.jsx)(c.A,{size:"md",title:"Reject Remarks",onClose:()=>F(!1),children:(0,l.jsxs)("div",{className:"flex flex-col gap-2 flex-1",children:[(0,l.jsx)("label",{className:"font-semibold text-[#333333]",htmlFor:String(name),children:"Remarks"}),(0,l.jsx)("textarea",{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg   focus:outline-none  block w-full p-2.5  focus:ring-2 focus:ring-green-500 focus:border-green-500 min-h-40 ",placeholder:"Enter reject remarks",onChange:e=>S(e.target.value)}),(0,l.jsx)("div",{className:"flex justify-end gap-2",children:(0,l.jsx)(a.A,{label:"Reject",variant:"danger",size:"xs",icon:(0,l.jsx)(x.A,{fontSize:"small"}),onClick:()=>void((null==z?void 0:z.id)&&m.A.confirmationAlert("Are you sure?","You want to reject this <b><u>"+(null==z?void 0:z.requestType.requestName)+"</u></b> request submitted by <b>"+z.requestBy.name+"</b>",()=>{w.mutate({id:z.id,action:"REJECTED",remarks:k},{onSuccess:()=>{F(!1),S(""),(0,u.Te)({message:"Request rejected!",position:"top-center"})},onError:e=>{console.error("Error approving:",e),(0,u.Qg)({message:"Failed to reject request",position:"top-center"})}})}))})})]})}),E&&(null==z?void 0:z.requestTypeId)!==void 0&&[11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33].includes(null==z?void 0:z.requestTypeId)&&(0,l.jsx)(c.A,{size:"lg",nested:!0,title:z.requestType.requestName,onClose:O,children:(0,l.jsx)(v.A,{onClose:O,mainRequest:z})})]})}function I(){var e;let[s,t]=(0,i.useState)("PENDING"),[r,a]=(0,i.useState)(1),{data:o,isLoading:d,isFetching:x}=(0,n.j)(s,r,10);if(d)return(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Loading requests..."});if(!o)return(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"No data returned from API"});let c=null!=(e=o.data)?e:[],u=o.pagination;return console.log("requests:",c),console.log("pagination:",u),(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)("div",{className:"py-4 px-2",children:(0,l.jsx)("h1",{className:"text-xl font-bold text-black",children:"Request Approval Dashboard"})}),(0,l.jsx)("div",{className:"flex items-center",children:["PENDING","APPROVED","REJECTED"].map(e=>(0,l.jsx)("button",{onClick:()=>{t(e),a(1)},className:"px-7 py-2 text-xs font-bold cursor-pointer ".concat(s===e?"bg-[#32B695] text-white":"bg-white text-[#8B8A8A] hover:bg-green-200"," ").concat("PENDING"===e?"rounded-l-md":""," ").concat("REJECTED"===e?"rounded-r-md":""),children:e.charAt(0)+e.slice(1).toLowerCase()},e))}),(0,l.jsx)("p",{className:"text-sm text-[#8B8A8A] py-3",children:"List of Requests"}),0===c.length?(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"No requests found"}):(0,l.jsx)(E,{requests:c,status:s}),u?(0,l.jsxs)("div",{className:"flex items-center gap-2 mt-4 text-sm text-gray-600",children:[(0,l.jsx)("button",{disabled:1===r,onClick:()=>a(e=>e-1),className:"px-3 py-1 border rounded disabled:opacity-50",children:"Prev"}),(0,l.jsxs)("span",{children:["Page ",u.page," of ",u.totalPages," (",u.total," total)",x&&(0,l.jsx)("span",{className:"ml-2 text-gray-400",children:"⏳ Updating..."})]}),(0,l.jsx)("button",{disabled:r>=u.totalPages,onClick:()=>a(e=>e+1),className:"px-3 py-1 border rounded disabled:opacity-50",children:"Next"})]}):null]})}}},e=>{e.O(0,[320,466,960,322,280,568,626,660,441,964,358],()=>e(e.s=13459)),_N_E=e.O()}]);