(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[144],{14041:(e,t,s)=>{Promise.resolve().then(s.bind(s,84129))},16304:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var r=s(95155),a=s(52596);function l(e){let{type:t="button",label:s,variant:l="success",size:n="md",icon:i,className:d,...c}=e,u={xs:"px-2 py-1 text-[0.6rem]",sm:"px-3 py-1 text-sm",md:"px-4 py-2 text-sm",lg:"px-5 py-3 text-base"},x=!!i&&!s;return(0,r.jsxs)("button",{type:t,className:(0,a.A)("inline-flex items-center justify-center rounded-md font-medium cursor-pointer transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",u[n],{success:"bg-[#32B695] text-white hover:bg-green-600",info:"bg-blue-500 text-white hover:bg-blue-600",danger:"bg-red-500 text-white hover:bg-red-600",secondary:"bg-gray-100 text-black hover:bg-gray-200"}[l],x?({xs:"p-1",sm:"p-1.5",md:"p-2",lg:"p-3"})[n]:u[n],d),...c,children:[i&&(0,r.jsx)("span",{className:(0,a.A)(s?"mr-2":""),children:i}),s]})}},31886:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var r=s(23464),a=s(49509);let l=r.A.create({baseURL:"".concat(a.env.NEXT_PUBLIC_APP_URL,"/api"),withCredentials:!0})},84129:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var r=s(95155),a=s(12115),l=s(83540),n=s(90170),i=s(18357),d=s(54811),c=s(27086),u=s(64683),x=s(57046),o=s(94754),m=s(96025),h=s(16238),y=s(23541),p=s(42366),f=s(93504),j=s(83548),g=s(1379),b=s(63042),v=s(16304),w=s(32960),N=s(31886);let q=async()=>(await N.A.get("/status-summary")).data.data,A=async()=>(await N.A.get("/daily-trend")).data.data,k=async()=>(await N.A.get("/requests-by-category")).data.data,F=async()=>(await N.A.get("/volume-heatmap")).data.data;var K=s(85803);let R=["#32B695","#FFC107","#F44336"];function C(){var e,t;let[s,N]=(0,a.useState)(!1),{data:C,isLoading:D,error:B}=(0,w.I)({queryKey:["requestStatus"],queryFn:q}),{data:I,isLoading:S,error:_}=(0,w.I)({queryKey:["requestDailyTrend"],queryFn:A}),{data:L,isLoading:M,error:T}=(0,w.I)({queryKey:["requestsByCategory"],queryFn:k}),{data:O}=(0,w.I)({queryKey:["requestVolumeByBranchAndType"],queryFn:F}),P=Array.from(new Set(null!=(e=null==O?void 0:O.map(e=>e.branch))?e:[])),W=Array.from(new Set(null!=(t=null==O?void 0:O.map(e=>e.type))?t:[])),E=(0,a.useMemo)(()=>{if(!L)return[];let e=[...L].sort((e,t)=>t.requests-e.requests);if(!s){let t=e.slice(0,5),s=e.slice(5);if(s.length>0){let e=s.reduce((e,t)=>e+t.requests,0);t.push({category:"Other",requests:e,cumulative:100})}return t}return e},[L,s]);if(D||S||M)return(0,r.jsx)("p",{children:"Loading chart..."});if(B||_||T)return(0,r.jsx)("p",{children:"Error loading chart"});if(!C||0===C.length)return(0,r.jsx)("p",{children:"No request status data found"});if(!I||0===I.length||!L||0===L.length)return(0,r.jsx)("p",{children:"No daily trend data found"});let U=L[0];return(0,r.jsxs)("div",{className:"",children:[(0,r.jsxs)("div",{className:"w-full flex flex-wrap gap-8 justify-center my-[1rem]",children:[(0,r.jsxs)("div",{className:"w-full md:max-w-[400px] min-w-[300px] h-[500px] bg-white p-[1.5rem] rounded-2xl pb-[4rem]",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4 text-center text-[#333333]",children:"Overall Request Status"}),(0,r.jsx)(l.u,{width:"100%",height:"100%",children:(0,r.jsxs)(n.r,{children:[(0,r.jsx)(i.F,{data:C,dataKey:"value",nameKey:"name",cx:"50%",cy:"45%",outerRadius:120,label:e=>{let t=Number(e.cx)||0,s=Number(e.cy)||0,a=Number(e.midAngle)||0,l=Number(e.innerRadius)||0,n=Number(e.outerRadius)||0,i=Number(e.value)||0,d=Math.PI/180,c=l+(n-l)*.5,u=t+c*Math.cos(-a*d),x=s+c*Math.sin(-a*d);return(0,r.jsx)("text",{x:u,y:x,fill:"#fff",textAnchor:"middle",dominantBaseline:"central",fontSize:12,fontWeight:"bold",children:i})},children:C.map((e,t)=>(0,r.jsx)(d.f,{fill:R[t%R.length]},"cell-".concat(t)))}),(0,r.jsx)(c.m,{}),(0,r.jsx)(u.s,{})]})})]}),(0,r.jsxs)("div",{className:"flex-1 min-w-[300px] h-[500px] flex flex-col items-center bg-white p-[1.5rem] rounded-2xl",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4 text-center text-[#333333]",children:"Requests per Category (Pareto)"}),(0,r.jsx)(l.u,{width:"100%",height:"100%",children:(0,r.jsxs)(x.X,{data:E,margin:{top:20,right:30,left:20,bottom:5},children:[(0,r.jsx)(o.d,{strokeDasharray:"3 3"}),(0,r.jsx)(m.W,{dataKey:"category"}),(0,r.jsx)(h.h,{yAxisId:"left",orientation:"left"}),(0,r.jsx)(h.h,{yAxisId:"right",orientation:"right",domain:[0,100],tickFormatter:e=>"".concat(e,"%")}),(0,r.jsx)(c.m,{}),(0,r.jsx)(u.s,{}),(0,r.jsx)(y.y,{yAxisId:"left",dataKey:"requests",fill:"#4CAF50"}),(0,r.jsx)(p.N,{yAxisId:"right",type:"monotone",dataKey:"cumulative",stroke:"#FF9800",strokeWidth:2,dot:{r:4}})]})}),(0,r.jsxs)("div",{className:"flex flex-col gap-[2rem] justify-between w-full px-[3rem]",children:[(0,r.jsxs)("p",{className:"mt-4 text-lg",children:["\uD83D\uDCCC Most Frequent Request:"," ",(0,r.jsx)("strong",{children:U.category})," (",U.requests," requests)"]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(v.A,{label:s?"See Less":"See More",onClick:()=>N(!s),size:"md",type:"button",icon:(0,r.jsx)(K.A,{})})})]})]})]}),(0,r.jsxs)("div",{className:"w-full flex flex-col flex-wrap gap-8 justify-center my-[2rem]",children:[(0,r.jsxs)("div",{className:"w-full h-[500px] flex flex-col items-center bg-white p-[1.5rem] rounded-2xl",children:[(0,r.jsx)("div",{className:"flex w-full px-[1rem]",children:(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4 text-[#333333]",children:"Requests Over Time (Daily Trends)"})}),(0,r.jsx)(l.u,{width:"100%",height:"100%",children:(0,r.jsxs)(f.b,{data:I,margin:{top:20,right:30,left:20,bottom:5},children:[(0,r.jsx)(o.d,{strokeDasharray:"3 3"}),(0,r.jsx)(m.W,{dataKey:"date"}),(0,r.jsx)(h.h,{}),(0,r.jsx)(c.m,{}),(0,r.jsx)(u.s,{}),(0,r.jsx)(p.N,{type:"monotone",dataKey:"SevenDaysTrend",stroke:"#32B695",strokeWidth:3,dot:{r:4},activeDot:{r:6}})]})})]}),(0,r.jsxs)("div",{className:"w-full h-[500px] flex flex-col items-center bg-white p-[1.5rem] rounded-2xl ",children:[(0,r.jsx)("div",{className:"flex w-full px-[1rem]",children:(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4 text-[#333333]",children:"Request Volume by Branch vs. Request Type"})}),(0,r.jsx)(l.u,{width:"100%",height:"100%",children:(0,r.jsxs)(j.t,{margin:{top:20,right:20,bottom:20,left:20},children:[(0,r.jsx)(o.d,{}),(0,r.jsx)(m.W,{type:"number",dataKey:"type",name:"Request Type",domain:[0,W.length-1],tickFormatter:e=>{var t;return null!=(t=W[e])?t:""},allowDecimals:!1,tickMargin:20}),(0,r.jsx)(h.h,{type:"number",dataKey:"branch",name:"Branch",domain:[0,P.length-1],tickFormatter:e=>{var t;return null!=(t=P[e])?t:""},allowDecimals:!1,tickMargin:20}),(0,r.jsx)(g.K,{type:"number",dataKey:"volume",range:[100,800]}),(0,r.jsx)(c.m,{cursor:{strokeDasharray:"3 3"},content:e=>{let{payload:t}=e;if(!t||0===t.length)return null;let s=t[0].payload;return(0,r.jsxs)("div",{className:"bg-white shadow p-2 text-sm",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:s.branch})," - ",s.type]}),(0,r.jsxs)("p",{children:["Volume: ",s.volume," requests"]})]})}}),(0,r.jsx)(b.X,{name:"Requests",data:null==O?void 0:O.map(e=>{let t,s;return{...e,type:(t=e.type,W.indexOf(t)),branch:(s=e.branch,P.indexOf(s))}}),fill:"#32B695"})]})})]})]})]})}}},e=>{e.O(0,[466,960,322,47,441,964,358],()=>e(e.s=14041)),_N_E=e.O()}]);